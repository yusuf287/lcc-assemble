import{r as y,a as Er,b as te}from"./vendor-Gm9i_4Ku.js";import{u as Ye,L as Ve,a as Sr,b as Os,B as Ar,R as Pr,c as ke,N as es}from"./router-C8Drx-ap.js";import{g as Tr,i as Ir,a as Lr,b as Vr,c as Rr,o as Fr,d as _e,u as Ke,s as Dr,e as Qt,f as Dt,h as sa,E as Or,r as Mr,j as $r,k as Ur,l as zr,m as Br,n as _s,p as qr,q as Zr,t as me,v as Re,w as He,x as dt,y as ut,z as ds,B as Rt,T as Wr,C as Yr,D as Hr,F as Gr}from"./firebase-CG_PbfpS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=a(i);fetch(i.href,n)}})();var $a={exports:{}},us={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr=y,Jr=Symbol.for("react.element"),Kr=Symbol.for("react.fragment"),Xr=Object.prototype.hasOwnProperty,ei=Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ti={key:!0,ref:!0,__self:!0,__source:!0};function Ua(s,t,a){var r,i={},n=null,l=null;a!==void 0&&(n=""+a),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Xr.call(t,r)&&!ti.hasOwnProperty(r)&&(i[r]=t[r]);if(s&&s.defaultProps)for(r in t=s.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Jr,type:s,key:n,ref:l,props:i,_owner:ei.current}}us.Fragment=Kr;us.jsx=Ua;us.jsxs=Ua;$a.exports=us;var e=$a.exports,ks={},aa=Er;ks.createRoot=aa.createRoot,ks.hydrateRoot=aa.hydrateRoot;const si={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"development",VITE_APP_TITLE:"LCC Assemble",VITE_APP_VERSION:"1.0.0",VITE_FIREBASE_API_KEY:"AIzaSyCg1TwctyoWuTijSYrZAhXJ3IAj47HGPPM",VITE_FIREBASE_APP_ID:"1:203524932489:web:0db75b2a40c9ba86061758",VITE_FIREBASE_AUTH_DOMAIN:"lcc-assemble-49d97.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BYZGHSG9RP",VITE_FIREBASE_MESSAGING_SENDER_ID:"203524932489",VITE_FIREBASE_PROJECT_ID:"lcc-assemble-49d97",VITE_FIREBASE_STORAGE_BUCKET:"lcc-assemble-49d97.firebasestorage.app",VITE_SKIP_EMAIL_VERIFICATION:"true"},ai={apiKey:"AIzaSyCg1TwctyoWuTijSYrZAhXJ3IAj47HGPPM",authDomain:"lcc-assemble-49d97.firebaseapp.com",projectId:"lcc-assemble-49d97",storageBucket:"lcc-assemble-49d97.firebasestorage.app",messagingSenderId:"203524932489",appId:"1:203524932489:web:0db75b2a40c9ba86061758"},ri=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],vs=ri.filter(s=>!si[s]);if(vs.length>0)throw console.error("Missing Firebase environment variables:",vs),new Error(`Missing Firebase configuration: ${vs.join(", ")}`);let $t;const ra=Tr();ra.length>0?($t=ra[0],console.log("🔥 Using existing Firebase app instance")):($t=Ir(ai),console.log("🔥 Created new Firebase app instance"));const xe=Lr($t),oe=Vr($t),ii=Rr($t),za=y.createContext(void 0),ve=()=>{const s=y.useContext(za);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},ni=({children:s})=>{const[t,a]=y.useState(null),[r,i]=y.useState(!0),[n,l]=y.useState(null),[o,c]=y.useState(!1),d=async D=>{var x;const k=_e(oe,"users",D.uid),T=await Dt(k);if(T.exists()){const _=T.data();return{uid:D.uid,..._}}else{const _={uid:D.uid,email:D.email||"",displayName:D.displayName||((x=D.email)==null?void 0:x.split("@")[0])||"User",interests:[],dietaryPreferences:[],privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"pending",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date,updatedAt:new Date};return await _s(k,_),_}};y.useEffect(()=>{const D=Fr(xe,async k=>{try{if(k){const T=await d(k);a(T)}else a(null)}catch(T){console.error("Error in auth state change:",T),a(null)}finally{i(!1)}});return()=>D()},[]);const u=async(D,k)=>{try{l(null);const T=await Dr(xe,D,k);if(await T.user.reload(),!T.user.emailVerified)throw await Qt(xe),new Error("Please verify your email before logging in. Check your inbox for the verification link.");const x=await Dt(_e(oe,"users",T.user.uid));if(x.exists()&&x.data().status==="suspended")throw await Qt(xe),new Error("Your account has been suspended. Please contact an administrator.")}catch(T){console.error("Login error:",T);const x=T.code==="auth/user-not-found"?"No account found with this email address. Please check your email or sign up for a new account.":T.code==="auth/wrong-password"?"Incorrect password. Please try again or reset your password.":T.code==="auth/invalid-credential"?"Invalid email or password. Please check your credentials and try again.":T.code==="auth/invalid-email"?"Please enter a valid email address.":T.code==="auth/user-disabled"?"This account has been disabled. Please contact an administrator.":T.code==="auth/too-many-requests"?"Too many failed login attempts. Please wait a few minutes before trying again.":T.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":T.code==="auth/operation-not-allowed"?"This sign-in method is not enabled. Please contact support.":T.message||"Login failed. Please try again.";throw l(x),new Error(x)}},f=async(D,k,T,x)=>{try{c(!0),l(null),console.log("🔥 Starting registration process..."),console.log("📧 Email:",D),console.log("👤 Display Name:",T),console.log("🔥 Creating Firebase Auth user...");const _=await zr(xe,D,k);console.log("✅ Firebase Auth user created:",_.user.uid),console.log("🔥 Updating Firebase Auth profile..."),await Br(_.user,{displayName:T}),console.log("✅ Firebase Auth profile updated"),console.log("🔥 Creating Firestore user document...");const A=_e(oe,"users",_.user.uid),U={uid:_.user.uid,email:D,displayName:T,phoneNumber:(x==null?void 0:x.phoneNumber)||"",whatsappNumber:(x==null?void 0:x.whatsappNumber)||"",bio:(x==null?void 0:x.bio)||"",interests:(x==null?void 0:x.interests)||[],dietaryPreferences:(x==null?void 0:x.dietaryPreferences)||[],address:(x==null?void 0:x.address)||{street:"",city:"",postalCode:""},privacy:(x==null?void 0:x.privacy)||{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"pending",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date,updatedAt:new Date};console.log("🔥 User data to save:",U),await _s(A,U),console.log("✅ Firestore user document created"),console.log("🔥 Sending email verification...");try{window.localStorage.setItem("emailForSignIn",D),await sa(_.user),console.log("✅ Email verification sent successfully")}catch(M){console.error("❌ Email verification failed:",M),console.error("❌ Email error code:",M.code),console.error("❌ Email error message:",M.message),console.warn("⚠️ Registration completed but email verification failed. User may need to verify manually.")}console.log("🔄 Signing out user after registration to require email verification..."),await Qt(xe),console.log("✅ User signed out after registration"),console.log("🎉 Registration completed successfully!")}catch(_){console.error("❌ Registration error:",_),console.error("❌ Error code:",_.code),console.error("❌ Error message:",_.message);const A=_.code==="auth/email-already-in-use"?"This email is already registered. Please try logging in instead.":_.code==="auth/weak-password"?"Password is too weak. Please choose a stronger password (at least 6 characters).":_.code==="auth/invalid-email"?"Please enter a valid email address.":_.code==="auth/operation-not-allowed"?"Email/password registration is not enabled. Please contact support.":_.code==="auth/too-many-requests"?"Too many registration attempts. Please wait a few minutes before trying again.":_.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":_.code==="permission-denied"?"Registration is currently disabled. Please contact an administrator.":_.code==="unavailable"?"Service temporarily unavailable. Please try again later.":_.message||"Registration failed. Please try again.";throw l(A),new Error(A)}finally{c(!1)}},h=async()=>{try{await Qt(xe)}catch(D){throw console.error("Logout error:",D),new Error(D.message||"Logout failed")}},p=async D=>{try{await Ur(xe,D)}catch(k){console.error("Password reset error:",k),console.error("Error code:",k.code),console.error("Error message:",k.message);const T=k.code==="auth/user-not-found"?"No account found with this email address.":k.code==="auth/invalid-email"?"Please enter a valid email address.":k.code==="auth/too-many-requests"?"Too many password reset requests. Please wait before trying again.":k.code==="auth/network-request-failed"?"Network error. Please check your internet connection and try again.":k.message||"Password reset failed. Please try again.";throw new Error(T)}},v=async D=>{if(!t)throw new Error("No user logged in");try{const k=_e(oe,"users",t.uid),T={...D,updatedAt:new Date};await Ke(k,T),a(x=>x?{...x,...D}:null)}catch(k){throw console.error("Profile update error:",k),new Error(k.message||"Profile update failed")}},ie={user:t,loading:r,isRegistering:o,login:u,register:f,logout:h,resetPassword:p,updateProfile:v,changePassword:async(D,k)=>{if(!xe.currentUser)throw new Error("No user logged in");if(!xe.currentUser.email)throw new Error("User email not available");try{const T=Or.credential(xe.currentUser.email,D);await Mr(xe.currentUser,T),await $r(xe.currentUser,k),console.log("✅ Password changed successfully")}catch(T){console.error("❌ Password change error:",T),console.error("❌ Error code:",T.code),console.error("❌ Error message:",T.message);const x=T.code==="auth/wrong-password"?"Current password is incorrect":T.code==="auth/weak-password"?"New password is too weak. Please choose a stronger password.":T.code==="auth/requires-recent-login"?"Please log out and log back in before changing your password.":T.message||"Failed to change password";throw new Error(x)}},resendEmailVerification:async()=>{if(!xe.currentUser)throw new Error("No user logged in");try{console.log("🔄 Resending email verification..."),await sa(xe.currentUser),console.log("✅ Email verification resent successfully")}catch(D){console.error("❌ Resend email verification failed:",D),console.error("❌ Error code:",D.code),console.error("❌ Error message:",D.message);const k=D.code==="auth/too-many-requests"?"Too many requests. Please wait before requesting another verification email.":D.code==="auth/user-token-expired"?"Your session has expired. Please log in again.":D.message||"Failed to resend verification email";throw new Error(k)}},checkEmailVerificationStatus:async()=>{if(!xe.currentUser)return!1;try{await xe.currentUser.reload();const D=xe.currentUser.emailVerified;console.log("📧 Email verification status:",D);const k=await Dt(_e(oe,"users",xe.currentUser.uid));if(k.exists()){const x=k.data().emailVerified||!1;return console.log("📧 Database email verification status:",x),x}return D}catch(D){return console.error("❌ Error checking email verification status:",D),!1}},verifyEmailManually:async D=>{try{console.log("🔧 Manually verifying email for user:",D);const k=_e(oe,"users",D);await Ke(k,{emailVerified:!0,updatedAt:new Date}),console.log("✅ Email manually verified for testing")}catch(k){throw console.error("Manual verification error:",k),new Error("Manual verification failed")}},signIn:u,isLoading:r,error:n,clearError:()=>l(null),userProfile:t,updateUserProfile:v};return e.jsx(za.Provider,{value:ie,children:s})};let li={data:""},oi=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||li,ci=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,di=/\/\*[^]*?\*\/|  +/g,ia=/\n+/g,ot=(s,t)=>{let a="",r="",i="";for(let n in s){let l=s[n];n[0]=="@"?n[1]=="i"?a=n+" "+l+";":r+=n[1]=="f"?ot(l,n):n+"{"+ot(l,n[1]=="k"?"":t)+"}":typeof l=="object"?r+=ot(l,t?t.replace(/([^,])+/g,o=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):n):l!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ot.p?ot.p(n,l):n+":"+l+";")}return a+(t&&i?t+"{"+i+"}":i)+r},Xe={},Ba=s=>{if(typeof s=="object"){let t="";for(let a in s)t+=a+Ba(s[a]);return t}return s},ui=(s,t,a,r,i)=>{let n=Ba(s),l=Xe[n]||(Xe[n]=(c=>{let d=0,u=11;for(;d<c.length;)u=101*u+c.charCodeAt(d++)>>>0;return"go"+u})(n));if(!Xe[l]){let c=n!==s?s:(d=>{let u,f,h=[{}];for(;u=ci.exec(d.replace(di,""));)u[4]?h.shift():u[3]?(f=u[3].replace(ia," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][u[1]]=u[2].replace(ia," ").trim();return h[0]})(s);Xe[l]=ot(i?{["@keyframes "+l]:c}:c,a?"":"."+l)}let o=a&&Xe.g?Xe.g:null;return a&&(Xe.g=Xe[l]),((c,d,u,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=u?c+d.data:d.data+c)})(Xe[l],t,r,o),l},mi=(s,t,a)=>s.reduce((r,i,n)=>{let l=t[n];if(l&&l.call){let o=l(a),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":ot(o,""):o===!1?"":o}return r+i+(l??"")},"");function ms(s){let t=this||{},a=s.call?s(t.p):s;return ui(a.unshift?a.raw?mi(a,[].slice.call(arguments,1),t.p):a.reduce((r,i)=>Object.assign(r,i&&i.call?i(t.p):i),{}):a,oi(t.target),t.g,t.o,t.k)}let qa,Cs,Es;ms.bind({g:1});let rt=ms.bind({k:1});function hi(s,t,a,r){ot.p=t,qa=s,Cs=a,Es=r}function ft(s,t){let a=this||{};return function(){let r=arguments;function i(n,l){let o=Object.assign({},n),c=o.className||i.className;a.p=Object.assign({theme:Cs&&Cs()},o),a.o=/ *go\d+/.test(c),o.className=ms.apply(a,r)+(c?" "+c:"");let d=s;return s[0]&&(d=o.as||s,delete o.as),Es&&d[0]&&Es(o),qa(d,o)}return i}}var xi=s=>typeof s=="function",ts=(s,t)=>xi(s)?s(t):s,fi=(()=>{let s=0;return()=>(++s).toString()})(),Za=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),gi=20,Ms="default",Wa=(s,t)=>{let{toastLimit:a}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:r}=t;return Wa(s,{type:s.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return{...s,toasts:s.toasts.map(l=>l.id===i||i===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let n=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+n}))}}},Xt=[],Ya={toasts:[],pausedAt:void 0,settings:{toastLimit:gi}},Ge={},Ha=(s,t=Ms)=>{Ge[t]=Wa(Ge[t]||Ya,s),Xt.forEach(([a,r])=>{a===t&&r(Ge[t])})},Ga=s=>Object.keys(Ge).forEach(t=>Ha(s,t)),pi=s=>Object.keys(Ge).find(t=>Ge[t].toasts.some(a=>a.id===s)),hs=(s=Ms)=>t=>{Ha(t,s)},yi={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bi=(s={},t=Ms)=>{let[a,r]=y.useState(Ge[t]||Ya),i=y.useRef(Ge[t]);y.useEffect(()=>(i.current!==Ge[t]&&r(Ge[t]),Xt.push([t,r]),()=>{let l=Xt.findIndex(([o])=>o===t);l>-1&&Xt.splice(l,1)}),[t]);let n=a.toasts.map(l=>{var o,c,d;return{...s,...s[l.type],...l,removeDelay:l.removeDelay||((o=s[l.type])==null?void 0:o.removeDelay)||(s==null?void 0:s.removeDelay),duration:l.duration||((c=s[l.type])==null?void 0:c.duration)||(s==null?void 0:s.duration)||yi[l.type],style:{...s.style,...(d=s[l.type])==null?void 0:d.style,...l.style}}});return{...a,toasts:n}},vi=(s,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:(a==null?void 0:a.id)||fi()}),qt=s=>(t,a)=>{let r=vi(t,s,a);return hs(r.toasterId||pi(r.id))({type:2,toast:r}),r.id},we=(s,t)=>qt("blank")(s,t);we.error=qt("error");we.success=qt("success");we.loading=qt("loading");we.custom=qt("custom");we.dismiss=(s,t)=>{let a={type:3,toastId:s};t?hs(t)(a):Ga(a)};we.dismissAll=s=>we.dismiss(void 0,s);we.remove=(s,t)=>{let a={type:4,toastId:s};t?hs(t)(a):Ga(a)};we.removeAll=s=>we.remove(void 0,s);we.promise=(s,t,a)=>{let r=we.loading(t.loading,{...a,...a==null?void 0:a.loading});return typeof s=="function"&&(s=s()),s.then(i=>{let n=t.success?ts(t.success,i):void 0;return n?we.success(n,{id:r,...a,...a==null?void 0:a.success}):we.dismiss(r),i}).catch(i=>{let n=t.error?ts(t.error,i):void 0;n?we.error(n,{id:r,...a,...a==null?void 0:a.error}):we.dismiss(r)}),s};var ji=1e3,Ni=(s,t="default")=>{let{toasts:a,pausedAt:r}=bi(s,t),i=y.useRef(new Map).current,n=y.useCallback((f,h=ji)=>{if(i.has(f))return;let p=setTimeout(()=>{i.delete(f),l({type:4,toastId:f})},h);i.set(f,p)},[]);y.useEffect(()=>{if(r)return;let f=Date.now(),h=a.map(p=>{if(p.duration===1/0)return;let v=(p.duration||0)+p.pauseDuration-(f-p.createdAt);if(v<0){p.visible&&we.dismiss(p.id);return}return setTimeout(()=>we.dismiss(p.id,t),v)});return()=>{h.forEach(p=>p&&clearTimeout(p))}},[a,r,t]);let l=y.useCallback(hs(t),[t]),o=y.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=y.useCallback((f,h)=>{l({type:1,toast:{id:f,height:h}})},[l]),d=y.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),u=y.useCallback((f,h)=>{let{reverseOrder:p=!1,gutter:v=8,defaultPosition:L}=h||{},N=a.filter(F=>(F.position||L)===(f.position||L)&&F.height),C=N.findIndex(F=>F.id===f.id),S=N.filter((F,w)=>w<C&&F.visible).length;return N.filter(F=>F.visible).slice(...p?[S+1]:[0,S]).reduce((F,w)=>F+(w.height||0)+v,0)},[a]);return y.useEffect(()=>{a.forEach(f=>{if(f.dismissed)n(f.id,f.removeDelay);else{let h=i.get(f.id);h&&(clearTimeout(h),i.delete(f.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:c,startPause:o,endPause:d,calculateOffset:u}}},wi=rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,_i=rt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ki=rt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Ci=ft("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wi} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${_i} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${ki} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ei=rt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Si=ft("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${Ei} 1s linear infinite;
`,Ai=rt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Pi=rt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ti=ft("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ai} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Pi} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ii=ft("div")`
  position: absolute;
`,Li=ft("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Vi=rt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ri=ft("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Vi} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Fi=({toast:s})=>{let{icon:t,type:a,iconTheme:r}=s;return t!==void 0?typeof t=="string"?y.createElement(Ri,null,t):t:a==="blank"?null:y.createElement(Li,null,y.createElement(Si,{...r}),a!=="loading"&&y.createElement(Ii,null,a==="error"?y.createElement(Ci,{...r}):y.createElement(Ti,{...r})))},Di=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Oi=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Mi="0%{opacity:0;} 100%{opacity:1;}",$i="0%{opacity:1;} 100%{opacity:0;}",Ui=ft("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,zi=ft("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Bi=(s,t)=>{let a=s.includes("top")?1:-1,[r,i]=Za()?[Mi,$i]:[Di(a),Oi(a)];return{animation:t?`${rt(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${rt(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qi=y.memo(({toast:s,position:t,style:a,children:r})=>{let i=s.height?Bi(s.position||t||"top-center",s.visible):{opacity:0},n=y.createElement(Fi,{toast:s}),l=y.createElement(zi,{...s.ariaProps},ts(s.message,s));return y.createElement(Ui,{className:s.className,style:{...i,...a,...s.style}},typeof r=="function"?r({icon:n,message:l}):y.createElement(y.Fragment,null,n,l))});hi(y.createElement);var Zi=({id:s,className:t,style:a,onHeightUpdate:r,children:i})=>{let n=y.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;r(s,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[s,r]);return y.createElement("div",{ref:n,className:t,style:a},i)},Wi=(s,t)=>{let a=s.includes("top"),r=a?{top:0}:{bottom:0},i=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Za()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...r,...i}},Yi=ms`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jt=16,Hi=({reverseOrder:s,position:t="top-center",toastOptions:a,gutter:r,children:i,toasterId:n,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:d}=Ni(a,n);return y.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:Jt,left:Jt,right:Jt,bottom:Jt,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(u=>{let f=u.position||t,h=d.calculateOffset(u,{reverseOrder:s,gutter:r,defaultPosition:t}),p=Wi(f,h);return y.createElement(Zi,{id:u.id,key:u.id,onHeightUpdate:d.updateHeight,className:u.visible?Yi:"",style:p},u.type==="custom"?ts(u.message,u):i?i(u):y.createElement(qi,{toast:u,position:f}))}))},Z=we;const R=({variant:s="primary",size:t="md",isLoading:a=!1,disabled:r,className:i,children:n,...l})=>{const o="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},d={sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},u=[o,c[s],d[t],a&&"cursor-wait",i].filter(Boolean).join(" ");return e.jsxs("button",{className:u,disabled:r||a,...l,children:[a&&e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a?"Loading...":n]})},K=te.forwardRef(({type:s="text",name:t,value:a,onChange:r,placeholder:i,required:n=!1,disabled:l=!1,error:o,label:c,helperText:d,className:u="",...f},h)=>{const N=`block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${o?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${l?"bg-gray-100 cursor-not-allowed":""} ${u}`.trim();return e.jsxs("div",{className:"space-y-1",children:[c&&e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700",children:c}),e.jsx("input",{ref:h,type:s,name:t,id:t,value:a,onChange:r,placeholder:i,required:n,disabled:l,className:N,...f}),o&&e.jsx("p",{className:"text-sm text-red-600",children:o}),d&&!o&&e.jsx("p",{className:"text-sm text-gray-500",children:d})]})});K.displayName="Input";const Y=({children:s,className:t="",padding:a="md",shadow:r="md"})=>{const i="bg-white rounded-lg border border-gray-200",n={none:"",sm:"p-4",md:"p-6",lg:"p-8"},l={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},o=[i,n[a],l[r],t].filter(Boolean).join(" ");return e.jsx("div",{className:o,children:s})},De=({variant:s="info",type:t,message:a,children:r,className:i=""})=>{const c=`p-4 rounded-md ${{success:"bg-green-50 border border-green-200 text-green-800",error:"bg-red-50 border border-red-200 text-red-800",warning:"bg-yellow-50 border border-yellow-200 text-yellow-800",info:"bg-blue-50 border border-blue-200 text-blue-800"}[t||s]} ${i}`.trim();return e.jsx("div",{className:c,role:"alert",children:a||r})},Gi=()=>{const[s,t]=y.useState(""),[a,r]=y.useState(""),[i,n]=y.useState(!1),[l,o]=y.useState(""),{login:c}=ve(),d=Ye(),u=async f=>{f.preventDefault(),o(""),n(!0);try{await c(s,a),Z.success("Login successful!"),d("/dashboard")}catch(h){console.error("Login error:",h);const p=h.message||"Login failed. Please try again.";o(p),Z.error(p)}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to LCC Assemble"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Connect with your community"})]}),e.jsx(Y,{className:"p-8",children:e.jsxs("form",{className:"space-y-6",onSubmit:u,children:[l&&e.jsx(De,{variant:"error",children:l}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:f=>t(f.target.value),placeholder:"Enter your email"})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:f=>r(f.target.value),placeholder:"Enter your password"})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Forgot your password?"})}),e.jsx("div",{className:"text-sm",children:e.jsx(Ve,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign up"})})]}),e.jsx("div",{children:e.jsx(R,{type:"submit",className:"w-full",disabled:i,isLoading:i,children:i?"Signing in...":"Sign in"})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["By signing in, you agree to our"," ",e.jsx(Ve,{to:"/terms",className:"font-medium text-blue-600 hover:text-blue-500",children:"Terms of Service"})," ","and"," ",e.jsx(Ve,{to:"/privacy",className:"font-medium text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})})]})})};var Zt=s=>s.type==="checkbox",gt=s=>s instanceof Date,Ee=s=>s==null;const Qa=s=>typeof s=="object";var be=s=>!Ee(s)&&!Array.isArray(s)&&Qa(s)&&!gt(s),Ja=s=>be(s)&&s.target?Zt(s.target)?s.target.checked:s.target.value:s,Qi=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,Ka=(s,t)=>s.has(Qi(t)),Ji=s=>{const t=s.constructor&&s.constructor.prototype;return be(t)&&t.hasOwnProperty("isPrototypeOf")},$s=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function je(s){let t;const a=Array.isArray(s),r=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)t=new Date(s);else if(!($s&&(s instanceof Blob||r))&&(a||be(s)))if(t=a?[]:Object.create(Object.getPrototypeOf(s)),!a&&!Ji(s))t=s;else for(const i in s)s.hasOwnProperty(i)&&(t[i]=je(s[i]));else return s;return t}var xs=s=>/^\w*$/.test(s),ge=s=>s===void 0,Us=s=>Array.isArray(s)?s.filter(Boolean):[],zs=s=>Us(s.replace(/["|']|\]/g,"").split(/\.|\[/)),$=(s,t,a)=>{if(!t||!be(s))return a;const r=(xs(t)?[t]:zs(t)).reduce((i,n)=>Ee(i)?i:i[n],s);return ge(r)||r===s?ge(s[t])?a:s[t]:r},Ie=s=>typeof s=="boolean",de=(s,t,a)=>{let r=-1;const i=xs(t)?[t]:zs(t),n=i.length,l=n-1;for(;++r<n;){const o=i[r];let c=a;if(r!==l){const d=s[o];c=be(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;s[o]=c,s=s[o]}};const ss={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Be={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},et={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Xa=te.createContext(null);Xa.displayName="HookFormContext";const Bs=()=>te.useContext(Xa);var er=(s,t,a,r=!0)=>{const i={defaultValues:t._defaultValues};for(const n in s)Object.defineProperty(i,n,{get:()=>{const l=n;return t._proxyFormState[l]!==Be.all&&(t._proxyFormState[l]=!r||Be.all),a&&(a[l]=!0),s[l]}});return i};const qs=typeof window<"u"?te.useLayoutEffect:te.useEffect;function Ki(s){const t=Bs(),{control:a=t.control,disabled:r,name:i,exact:n}=s||{},[l,o]=te.useState(a._formState),c=te.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return qs(()=>a._subscribe({name:i,formState:c.current,exact:n,callback:d=>{!r&&o({...a._formState,...d})}}),[i,r,n]),te.useEffect(()=>{c.current.isValid&&a._setValid(!0)},[a]),te.useMemo(()=>er(l,a,c.current,!1),[l,a])}var Le=s=>typeof s=="string",tr=(s,t,a,r,i)=>Le(s)?(r&&t.watch.add(s),$(a,s,i)):Array.isArray(s)?s.map(n=>(r&&t.watch.add(n),$(a,n))):(r&&(t.watchAll=!0),a),Ss=s=>Ee(s)||!Qa(s);function st(s,t,a=new WeakSet){if(Ss(s)||Ss(t))return s===t;if(gt(s)&&gt(t))return s.getTime()===t.getTime();const r=Object.keys(s),i=Object.keys(t);if(r.length!==i.length)return!1;if(a.has(s)||a.has(t))return!0;a.add(s),a.add(t);for(const n of r){const l=s[n];if(!i.includes(n))return!1;if(n!=="ref"){const o=t[n];if(gt(l)&&gt(o)||be(l)&&be(o)||Array.isArray(l)&&Array.isArray(o)?!st(l,o,a):l!==o)return!1}}return!0}function Xi(s){const t=Bs(),{control:a=t.control,name:r,defaultValue:i,disabled:n,exact:l,compute:o}=s||{},c=te.useRef(i),d=te.useRef(o),u=te.useRef(void 0);d.current=o;const f=te.useMemo(()=>a._getWatch(r,c.current),[a,r]),[h,p]=te.useState(d.current?d.current(f):f);return qs(()=>a._subscribe({name:r,formState:{values:!0},exact:l,callback:v=>{if(!n){const L=tr(r,a._names,v.values||a._formValues,!1,c.current);if(d.current){const N=d.current(L);st(N,u.current)||(p(N),u.current=N)}else p(L)}}}),[a,n,r,l]),te.useEffect(()=>a._removeUnmounted()),h}function en(s){const t=Bs(),{name:a,disabled:r,control:i=t.control,shouldUnregister:n,defaultValue:l}=s,o=Ka(i._names.array,a),c=te.useMemo(()=>$(i._formValues,a,$(i._defaultValues,a,l)),[i,a,l]),d=Xi({control:i,name:a,defaultValue:c,exact:!0}),u=Ki({control:i,name:a,exact:!0}),f=te.useRef(s),h=te.useRef(void 0),p=te.useRef(i.register(a,{...s.rules,value:d,...Ie(s.disabled)?{disabled:s.disabled}:{}}));f.current=s;const v=te.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!$(u.errors,a)},isDirty:{enumerable:!0,get:()=>!!$(u.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!$(u.touchedFields,a)},isValidating:{enumerable:!0,get:()=>!!$(u.validatingFields,a)},error:{enumerable:!0,get:()=>$(u.errors,a)}}),[u,a]),L=te.useCallback(F=>p.current.onChange({target:{value:Ja(F),name:a},type:ss.CHANGE}),[a]),N=te.useCallback(()=>p.current.onBlur({target:{value:$(i._formValues,a),name:a},type:ss.BLUR}),[a,i._formValues]),C=te.useCallback(F=>{const w=$(i._fields,a);w&&F&&(w._f.ref={focus:()=>F.focus&&F.focus(),select:()=>F.select&&F.select(),setCustomValidity:P=>F.setCustomValidity(P),reportValidity:()=>F.reportValidity()})},[i._fields,a]),S=te.useMemo(()=>({name:a,value:d,...Ie(r)||u.disabled?{disabled:u.disabled||r}:{},onChange:L,onBlur:N,ref:C}),[a,r,u.disabled,L,N,C,d]);return te.useEffect(()=>{const F=i._options.shouldUnregister||n,w=h.current;w&&w!==a&&!o&&i.unregister(w),i.register(a,{...f.current.rules,...Ie(f.current.disabled)?{disabled:f.current.disabled}:{}});const P=(b,E)=>{const ie=$(i._fields,b);ie&&ie._f&&(ie._f.mount=E)};if(P(a,!0),F){const b=je($(i._options.defaultValues,a));de(i._defaultValues,a,b),ge($(i._formValues,a))&&de(i._formValues,a,b)}return!o&&i.register(a),h.current=a,()=>{(o?F&&!i._state.action:F)?i.unregister(a):P(a,!1)}},[a,i,o,n]),te.useEffect(()=>{i._setDisabledField({disabled:r,name:a})},[r,a,i]),te.useMemo(()=>({field:S,formState:u,fieldState:v}),[S,u,v])}const Te=s=>s.render(en(s));var Zs=(s,t,a,r,i)=>t?{...a[s],types:{...a[s]&&a[s].types?a[s].types:{},[r]:i||!0}}:{},Ot=s=>Array.isArray(s)?s:[s],na=()=>{let s=[];return{get observers(){return s},next:i=>{for(const n of s)n.next&&n.next(i)},subscribe:i=>(s.push(i),{unsubscribe:()=>{s=s.filter(n=>n!==i)}}),unsubscribe:()=>{s=[]}}};function sr(s,t){const a={};for(const r in s)if(s.hasOwnProperty(r)){const i=s[r],n=t[r];if(i&&be(i)&&n){const l=sr(i,n);be(l)&&(a[r]=l)}else s[r]&&(a[r]=n)}return a}var Pe=s=>be(s)&&!Object.keys(s).length,Ws=s=>s.type==="file",qe=s=>typeof s=="function",as=s=>{if(!$s)return!1;const t=s?s.ownerDocument:0;return s instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},ar=s=>s.type==="select-multiple",Ys=s=>s.type==="radio",tn=s=>Ys(s)||Zt(s),js=s=>as(s)&&s.isConnected;function sn(s,t){const a=t.slice(0,-1).length;let r=0;for(;r<a;)s=ge(s)?r++:s[t[r++]];return s}function an(s){for(const t in s)if(s.hasOwnProperty(t)&&!ge(s[t]))return!1;return!0}function pe(s,t){const a=Array.isArray(t)?t:xs(t)?[t]:zs(t),r=a.length===1?s:sn(s,a),i=a.length-1,n=a[i];return r&&delete r[n],i!==0&&(be(r)&&Pe(r)||Array.isArray(r)&&an(r))&&pe(s,a.slice(0,-1)),s}var rn=s=>{for(const t in s)if(qe(s[t]))return!0;return!1};function rr(s){return Array.isArray(s)||be(s)&&!rn(s)}function As(s,t={}){for(const a in s)rr(s[a])?(t[a]=Array.isArray(s[a])?[]:{},As(s[a],t[a])):Ee(s[a])||(t[a]=!0);return t}function wt(s,t,a){a||(a=As(t));for(const r in s)rr(s[r])?ge(t)||Ss(a[r])?a[r]=As(s[r],Array.isArray(s[r])?[]:{}):wt(s[r],Ee(t)?{}:t[r],a[r]):a[r]=!st(s[r],t[r]);return a}const la={value:!1,isValid:!1},oa={value:!0,isValid:!0};var ir=s=>{if(Array.isArray(s)){if(s.length>1){const t=s.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:t,isValid:!!t.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!ge(s[0].attributes.value)?ge(s[0].value)||s[0].value===""?oa:{value:s[0].value,isValid:!0}:oa:la}return la},nr=(s,{valueAsNumber:t,valueAsDate:a,setValueAs:r})=>ge(s)?s:t?s===""?NaN:s&&+s:a&&Le(s)?new Date(s):r?r(s):s;const ca={isValid:!1,value:null};var lr=s=>Array.isArray(s)?s.reduce((t,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:t,ca):ca;function da(s){const t=s.ref;return Ws(t)?t.files:Ys(t)?lr(s.refs).value:ar(t)?[...t.selectedOptions].map(({value:a})=>a):Zt(t)?ir(s.refs).value:nr(ge(t.value)?s.ref.value:t.value,s)}var nn=(s,t,a,r)=>{const i={};for(const n of s){const l=$(t,n);l&&de(i,n,l._f)}return{criteriaMode:a,names:[...s],fields:i,shouldUseNativeValidation:r}},rs=s=>s instanceof RegExp,Vt=s=>ge(s)?s:rs(s)?s.source:be(s)?rs(s.value)?s.value.source:s.value:s,ua=s=>({isOnSubmit:!s||s===Be.onSubmit,isOnBlur:s===Be.onBlur,isOnChange:s===Be.onChange,isOnAll:s===Be.all,isOnTouch:s===Be.onTouched});const ma="AsyncFunction";var ln=s=>!!s&&!!s.validate&&!!(qe(s.validate)&&s.validate.constructor.name===ma||be(s.validate)&&Object.values(s.validate).find(t=>t.constructor.name===ma)),on=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),ha=(s,t,a)=>!a&&(t.watchAll||t.watch.has(s)||[...t.watch].some(r=>s.startsWith(r)&&/^\.\w+/.test(s.slice(r.length))));const Mt=(s,t,a,r)=>{for(const i of a||Object.keys(s)){const n=$(s,i);if(n){const{_f:l,...o}=n;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],i)&&!r)return!0;if(l.ref&&t(l.ref,l.name)&&!r)return!0;if(Mt(o,t))break}else if(be(o)&&Mt(o,t))break}}};function xa(s,t,a){const r=$(s,a);if(r||xs(a))return{error:r,name:a};const i=a.split(".");for(;i.length;){const n=i.join("."),l=$(t,n),o=$(s,n);if(l&&!Array.isArray(l)&&a!==n)return{name:a};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:a}}var cn=(s,t,a,r)=>{a(s);const{name:i,...n}=s;return Pe(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(l=>t[l]===(!r||Be.all))},dn=(s,t,a)=>!s||!t||s===t||Ot(s).some(r=>r&&(a?r===t:r.startsWith(t)||t.startsWith(r))),un=(s,t,a,r,i)=>i.isOnAll?!1:!a&&i.isOnTouch?!(t||s):(a?r.isOnBlur:i.isOnBlur)?!s:(a?r.isOnChange:i.isOnChange)?s:!0,mn=(s,t)=>!Us($(s,t)).length&&pe(s,t),hn=(s,t,a)=>{const r=Ot($(s,a));return de(r,"root",t[a]),de(s,a,r),s};function fa(s,t,a="validate"){if(Le(s)||Array.isArray(s)&&s.every(Le)||Ie(s)&&!s)return{type:a,message:Le(s)?s:"",ref:t}}var vt=s=>be(s)&&!rs(s)?s:{value:s,message:""},ga=async(s,t,a,r,i,n)=>{const{ref:l,refs:o,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:p,validate:v,name:L,valueAsNumber:N,mount:C}=s._f,S=$(a,L);if(!C||t.has(L))return{};const F=o?o[0]:l,w=x=>{i&&F.reportValidity&&(F.setCustomValidity(Ie(x)?"":x||""),F.reportValidity())},P={},b=Ys(l),E=Zt(l),ie=b||E,D=(N||Ws(l))&&ge(l.value)&&ge(S)||as(l)&&l.value===""||S===""||Array.isArray(S)&&!S.length,k=Zs.bind(null,L,r,P),T=(x,_,A,U=et.maxLength,M=et.minLength)=>{const re=x?_:A;P[L]={type:x?U:M,message:re,ref:l,...k(x?U:M,re)}};if(n?!Array.isArray(S)||!S.length:c&&(!ie&&(D||Ee(S))||Ie(S)&&!S||E&&!ir(o).isValid||b&&!lr(o).isValid)){const{value:x,message:_}=Le(c)?{value:!!c,message:c}:vt(c);if(x&&(P[L]={type:et.required,message:_,ref:F,...k(et.required,_)},!r))return w(_),P}if(!D&&(!Ee(f)||!Ee(h))){let x,_;const A=vt(h),U=vt(f);if(!Ee(S)&&!isNaN(S)){const M=l.valueAsNumber||S&&+S;Ee(A.value)||(x=M>A.value),Ee(U.value)||(_=M<U.value)}else{const M=l.valueAsDate||new Date(S),re=yt=>new Date(new Date().toDateString()+" "+yt),Ce=l.type=="time",Ae=l.type=="week";Le(A.value)&&S&&(x=Ce?re(S)>re(A.value):Ae?S>A.value:M>new Date(A.value)),Le(U.value)&&S&&(_=Ce?re(S)<re(U.value):Ae?S<U.value:M<new Date(U.value))}if((x||_)&&(T(!!x,A.message,U.message,et.max,et.min),!r))return w(P[L].message),P}if((d||u)&&!D&&(Le(S)||n&&Array.isArray(S))){const x=vt(d),_=vt(u),A=!Ee(x.value)&&S.length>+x.value,U=!Ee(_.value)&&S.length<+_.value;if((A||U)&&(T(A,x.message,_.message),!r))return w(P[L].message),P}if(p&&!D&&Le(S)){const{value:x,message:_}=vt(p);if(rs(x)&&!S.match(x)&&(P[L]={type:et.pattern,message:_,ref:l,...k(et.pattern,_)},!r))return w(_),P}if(v){if(qe(v)){const x=await v(S,a),_=fa(x,F);if(_&&(P[L]={..._,...k(et.validate,_.message)},!r))return w(_.message),P}else if(be(v)){let x={};for(const _ in v){if(!Pe(x)&&!r)break;const A=fa(await v[_](S,a),F,_);A&&(x={...A,...k(_,A.message)},w(A.message),r&&(P[L]=x))}if(!Pe(x)&&(P[L]={ref:F,...x},!r))return P}}return w(!0),P};const xn={mode:Be.onSubmit,reValidateMode:Be.onChange,shouldFocusError:!0};function fn(s={}){let t={...xn,...s},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:qe(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},r={},i=be(t.defaultValues)||be(t.values)?je(t.defaultValues||t.values)||{}:{},n=t.shouldUnregister?{}:je(i),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:na(),state:na()},p=t.criteriaMode===Be.all,v=m=>g=>{clearTimeout(d),d=setTimeout(m,g)},L=async m=>{if(!t.disabled&&(u.isValid||f.isValid||m)){const g=t.resolver?Pe((await E()).errors):await D(r,!0);g!==a.isValid&&h.state.next({isValid:g})}},N=(m,g)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((m||Array.from(o.mount)).forEach(j=>{j&&(g?de(a.validatingFields,j,g):pe(a.validatingFields,j))}),h.state.next({validatingFields:a.validatingFields,isValidating:!Pe(a.validatingFields)}))},C=(m,g=[],j,q,O=!0,V=!0)=>{if(q&&j&&!t.disabled){if(l.action=!0,V&&Array.isArray($(r,m))){const Q=j($(r,m),q.argA,q.argB);O&&de(r,m,Q)}if(V&&Array.isArray($(a.errors,m))){const Q=j($(a.errors,m),q.argA,q.argB);O&&de(a.errors,m,Q),mn(a.errors,m)}if((u.touchedFields||f.touchedFields)&&V&&Array.isArray($(a.touchedFields,m))){const Q=j($(a.touchedFields,m),q.argA,q.argB);O&&de(a.touchedFields,m,Q)}(u.dirtyFields||f.dirtyFields)&&(a.dirtyFields=wt(i,n)),h.state.next({name:m,isDirty:T(m,g),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else de(n,m,g)},S=(m,g)=>{de(a.errors,m,g),h.state.next({errors:a.errors})},F=m=>{a.errors=m,h.state.next({errors:a.errors,isValid:!1})},w=(m,g,j,q)=>{const O=$(r,m);if(O){const V=$(n,m,ge(j)?$(i,m):j);ge(V)||q&&q.defaultChecked||g?de(n,m,g?V:da(O._f)):A(m,V),l.mount&&L()}},P=(m,g,j,q,O)=>{let V=!1,Q=!1;const ce={name:m};if(!t.disabled){if(!j||q){(u.isDirty||f.isDirty)&&(Q=a.isDirty,a.isDirty=ce.isDirty=T(),V=Q!==ce.isDirty);const ue=st($(i,m),g);Q=!!$(a.dirtyFields,m),ue?pe(a.dirtyFields,m):de(a.dirtyFields,m,!0),ce.dirtyFields=a.dirtyFields,V=V||(u.dirtyFields||f.dirtyFields)&&Q!==!ue}if(j){const ue=$(a.touchedFields,m);ue||(de(a.touchedFields,m,j),ce.touchedFields=a.touchedFields,V=V||(u.touchedFields||f.touchedFields)&&ue!==j)}V&&O&&h.state.next(ce)}return V?ce:{}},b=(m,g,j,q)=>{const O=$(a.errors,m),V=(u.isValid||f.isValid)&&Ie(g)&&a.isValid!==g;if(t.delayError&&j?(c=v(()=>S(m,j)),c(t.delayError)):(clearTimeout(d),c=null,j?de(a.errors,m,j):pe(a.errors,m)),(j?!st(O,j):O)||!Pe(q)||V){const Q={...q,...V&&Ie(g)?{isValid:g}:{},errors:a.errors,name:m};a={...a,...Q},h.state.next(Q)}},E=async m=>{N(m,!0);const g=await t.resolver(n,t.context,nn(m||o.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return N(m),g},ie=async m=>{const{errors:g}=await E(m);if(m)for(const j of m){const q=$(g,j);q?de(a.errors,j,q):pe(a.errors,j)}else a.errors=g;return g},D=async(m,g,j={valid:!0})=>{for(const q in m){const O=m[q];if(O){const{_f:V,...Q}=O;if(V){const ce=o.array.has(V.name),ue=O._f&&ln(O._f);ue&&u.validatingFields&&N([V.name],!0);const Me=await ga(O,o.disabled,n,p,t.shouldUseNativeValidation&&!g,ce);if(ue&&u.validatingFields&&N([V.name]),Me[V.name]&&(j.valid=!1,g))break;!g&&($(Me,V.name)?ce?hn(a.errors,Me,V.name):de(a.errors,V.name,Me[V.name]):pe(a.errors,V.name))}!Pe(Q)&&await D(Q,g,j)}}return j.valid},k=()=>{for(const m of o.unMount){const g=$(r,m);g&&(g._f.refs?g._f.refs.every(j=>!js(j)):!js(g._f.ref))&&Lt(m)}o.unMount=new Set},T=(m,g)=>!t.disabled&&(m&&g&&de(n,m,g),!st(yt(),i)),x=(m,g,j)=>tr(m,o,{...l.mount?n:ge(g)?i:Le(m)?{[m]:g}:g},j,g),_=m=>Us($(l.mount?n:i,m,t.shouldUnregister?$(i,m,[]):[])),A=(m,g,j={})=>{const q=$(r,m);let O=g;if(q){const V=q._f;V&&(!V.disabled&&de(n,m,nr(g,V)),O=as(V.ref)&&Ee(g)?"":g,ar(V.ref)?[...V.ref.options].forEach(Q=>Q.selected=O.includes(Q.value)):V.refs?Zt(V.ref)?V.refs.forEach(Q=>{(!Q.defaultChecked||!Q.disabled)&&(Array.isArray(O)?Q.checked=!!O.find(ce=>ce===Q.value):Q.checked=O===Q.value||!!O)}):V.refs.forEach(Q=>Q.checked=Q.value===O):Ws(V.ref)?V.ref.value="":(V.ref.value=O,V.ref.type||h.state.next({name:m,values:je(n)})))}(j.shouldDirty||j.shouldTouch)&&P(m,O,j.shouldTouch,j.shouldDirty,!0),j.shouldValidate&&Ae(m)},U=(m,g,j)=>{for(const q in g){if(!g.hasOwnProperty(q))return;const O=g[q],V=m+"."+q,Q=$(r,V);(o.array.has(m)||be(O)||Q&&!Q._f)&&!gt(O)?U(V,O,j):A(V,O,j)}},M=(m,g,j={})=>{const q=$(r,m),O=o.array.has(m),V=je(g);de(n,m,V),O?(h.array.next({name:m,values:je(n)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&j.shouldDirty&&h.state.next({name:m,dirtyFields:wt(i,n),isDirty:T(m,V)})):q&&!q._f&&!Ee(V)?U(m,V,j):A(m,V,j),ha(m,o)&&h.state.next({...a,name:m}),h.state.next({name:l.mount?m:void 0,values:je(n)})},re=async m=>{l.mount=!0;const g=m.target;let j=g.name,q=!0;const O=$(r,j),V=ue=>{q=Number.isNaN(ue)||gt(ue)&&isNaN(ue.getTime())||st(ue,$(n,j,ue))},Q=ua(t.mode),ce=ua(t.reValidateMode);if(O){let ue,Me;const Gt=g.type?da(O._f):Ja(m),nt=m.type===ss.BLUR||m.type===ss.FOCUS_OUT,_r=!on(O._f)&&!t.resolver&&!$(a.errors,j)&&!O._f.deps||un(nt,$(a.touchedFields,j),a.isSubmitted,ce,Q),ys=ha(j,o,nt);de(n,j,Gt),nt?(!g||!g.readOnly)&&(O._f.onBlur&&O._f.onBlur(m),c&&c(0)):O._f.onChange&&O._f.onChange(m);const bs=P(j,Gt,nt),kr=!Pe(bs)||ys;if(!nt&&h.state.next({name:j,type:m.type,values:je(n)}),_r)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?nt&&L():nt||L()),kr&&h.state.next({name:j,...ys?{}:bs});if(!nt&&ys&&h.state.next({...a}),t.resolver){const{errors:ea}=await E([j]);if(V(Gt),q){const Cr=xa(a.errors,r,j),ta=xa(ea,r,Cr.name||j);ue=ta.error,j=ta.name,Me=Pe(ea)}}else N([j],!0),ue=(await ga(O,o.disabled,n,p,t.shouldUseNativeValidation))[j],N([j]),V(Gt),q&&(ue?Me=!1:(u.isValid||f.isValid)&&(Me=await D(r,!0)));q&&(O._f.deps&&(!Array.isArray(O._f.deps)||O._f.deps.length>0)&&Ae(O._f.deps),b(j,Me,ue,bs))}},Ce=(m,g)=>{if($(a.errors,g)&&m.focus)return m.focus(),1},Ae=async(m,g={})=>{let j,q;const O=Ot(m);if(t.resolver){const V=await ie(ge(m)?m:O);j=Pe(V),q=m?!O.some(Q=>$(V,Q)):j}else m?(q=(await Promise.all(O.map(async V=>{const Q=$(r,V);return await D(Q&&Q._f?{[V]:Q}:Q)}))).every(Boolean),!(!q&&!a.isValid)&&L()):q=j=await D(r);return h.state.next({...!Le(m)||(u.isValid||f.isValid)&&j!==a.isValid?{}:{name:m},...t.resolver||!m?{isValid:j}:{},errors:a.errors}),g.shouldFocus&&!q&&Mt(r,Ce,m?O:o.mount),q},yt=(m,g)=>{let j={...l.mount?n:i};return g&&(j=sr(g.dirtyFields?a.dirtyFields:a.touchedFields,j)),ge(m)?j:Le(m)?$(j,m):m.map(q=>$(j,q))},Wt=(m,g)=>({invalid:!!$((g||a).errors,m),isDirty:!!$((g||a).dirtyFields,m),error:$((g||a).errors,m),isValidating:!!$(a.validatingFields,m),isTouched:!!$((g||a).touchedFields,m)}),fs=m=>{m&&Ot(m).forEach(g=>pe(a.errors,g)),h.state.next({errors:m?a.errors:{}})},Yt=(m,g,j)=>{const q=($(r,m,{_f:{}})._f||{}).ref,O=$(a.errors,m)||{},{ref:V,message:Q,type:ce,...ue}=O;de(a.errors,m,{...ue,...g,ref:q}),h.state.next({name:m,errors:a.errors,isValid:!1}),j&&j.shouldFocus&&q&&q.focus&&q.focus()},gs=(m,g)=>qe(m)?h.state.subscribe({next:j=>"values"in j&&m(x(void 0,g),j)}):x(m,g,!0),Ht=m=>h.state.subscribe({next:g=>{dn(m.name,g.name,m.exact)&&cn(g,m.formState||u,wr,m.reRenderRoot)&&m.callback({values:{...n},...a,...g,defaultValues:i})}}).unsubscribe,ps=m=>(l.mount=!0,f={...f,...m.formState},Ht({...m,formState:f})),Lt=(m,g={})=>{for(const j of m?Ot(m):o.mount)o.mount.delete(j),o.array.delete(j),g.keepValue||(pe(r,j),pe(n,j)),!g.keepError&&pe(a.errors,j),!g.keepDirty&&pe(a.dirtyFields,j),!g.keepTouched&&pe(a.touchedFields,j),!g.keepIsValidating&&pe(a.validatingFields,j),!t.shouldUnregister&&!g.keepDefaultValue&&pe(i,j);h.state.next({values:je(n)}),h.state.next({...a,...g.keepDirty?{isDirty:T()}:{}}),!g.keepIsValid&&L()},z=({disabled:m,name:g})=>{(Ie(m)&&l.mount||m||o.disabled.has(g))&&(m?o.disabled.add(g):o.disabled.delete(g))},J=(m,g={})=>{let j=$(r,m);const q=Ie(g.disabled)||Ie(t.disabled);return de(r,m,{...j||{},_f:{...j&&j._f?j._f:{ref:{name:m}},name:m,mount:!0,...g}}),o.mount.add(m),j?z({disabled:Ie(g.disabled)?g.disabled:t.disabled,name:m}):w(m,!0,g.value),{...q?{disabled:g.disabled||t.disabled}:{},...t.progressive?{required:!!g.required,min:Vt(g.min),max:Vt(g.max),minLength:Vt(g.minLength),maxLength:Vt(g.maxLength),pattern:Vt(g.pattern)}:{},name:m,onChange:re,onBlur:re,ref:O=>{if(O){J(m,g),j=$(r,m);const V=ge(O.value)&&O.querySelectorAll&&O.querySelectorAll("input,select,textarea")[0]||O,Q=tn(V),ce=j._f.refs||[];if(Q?ce.find(ue=>ue===V):V===j._f.ref)return;de(r,m,{_f:{...j._f,...Q?{refs:[...ce.filter(js),V,...Array.isArray($(i,m))?[{}]:[]],ref:{type:V.type,name:m}}:{ref:V}}}),w(m,!1,void 0,V)}else j=$(r,m,{}),j._f&&(j._f.mount=!1),(t.shouldUnregister||g.shouldUnregister)&&!(Ka(o.array,m)&&l.action)&&o.unMount.add(m)}}},G=()=>t.shouldFocusError&&Mt(r,Ce,o.mount),he=m=>{Ie(m)&&(h.state.next({disabled:m}),Mt(r,(g,j)=>{const q=$(r,j);q&&(g.disabled=q._f.disabled||m,Array.isArray(q._f.refs)&&q._f.refs.forEach(O=>{O.disabled=q._f.disabled||m}))},0,!1))},ze=(m,g)=>async j=>{let q;j&&(j.preventDefault&&j.preventDefault(),j.persist&&j.persist());let O=je(n);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:V,values:Q}=await E();a.errors=V,O=je(Q)}else await D(r);if(o.disabled.size)for(const V of o.disabled)pe(O,V);if(pe(a.errors,"root"),Pe(a.errors)){h.state.next({errors:{}});try{await m(O,j)}catch(V){q=V}}else g&&await g({...a.errors},j),G(),setTimeout(G);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Pe(a.errors)&&!q,submitCount:a.submitCount+1,errors:a.errors}),q)throw q},bt=(m,g={})=>{$(r,m)&&(ge(g.defaultValue)?M(m,je($(i,m))):(M(m,g.defaultValue),de(i,m,je(g.defaultValue))),g.keepTouched||pe(a.touchedFields,m),g.keepDirty||(pe(a.dirtyFields,m),a.isDirty=g.defaultValue?T(m,je($(i,m))):T()),g.keepError||(pe(a.errors,m),u.isValid&&L()),h.state.next({...a}))},Js=(m,g={})=>{const j=m?je(m):i,q=je(j),O=Pe(m),V=O?i:q;if(g.keepDefaultValues||(i=j),!g.keepValues){if(g.keepDirtyValues){const Q=new Set([...o.mount,...Object.keys(wt(i,n))]);for(const ce of Array.from(Q))$(a.dirtyFields,ce)?de(V,ce,$(n,ce)):M(ce,$(V,ce))}else{if($s&&ge(m))for(const Q of o.mount){const ce=$(r,Q);if(ce&&ce._f){const ue=Array.isArray(ce._f.refs)?ce._f.refs[0]:ce._f.ref;if(as(ue)){const Me=ue.closest("form");if(Me){Me.reset();break}}}}if(g.keepFieldsRef)for(const Q of o.mount)M(Q,$(V,Q));else r={}}n=t.shouldUnregister?g.keepDefaultValues?je(i):{}:je(V),h.array.next({values:{...V}}),h.state.next({values:{...V}})}o={mount:g.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!u.isValid||!!g.keepIsValid||!!g.keepDirtyValues,l.watch=!!t.shouldUnregister,h.state.next({submitCount:g.keepSubmitCount?a.submitCount:0,isDirty:O?!1:g.keepDirty?a.isDirty:!!(g.keepDefaultValues&&!st(m,i)),isSubmitted:g.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:O?{}:g.keepDirtyValues?g.keepDefaultValues&&n?wt(i,n):a.dirtyFields:g.keepDefaultValues&&m?wt(i,m):g.keepDirty?a.dirtyFields:{},touchedFields:g.keepTouched?a.touchedFields:{},errors:g.keepErrors?a.errors:{},isSubmitSuccessful:g.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Ks=(m,g)=>Js(qe(m)?m(n):m,g),Nr=(m,g={})=>{const j=$(r,m),q=j&&j._f;if(q){const O=q.refs?q.refs[0]:q.ref;O.focus&&(O.focus(),g.shouldSelect&&qe(O.select)&&O.select())}},wr=m=>{a={...a,...m}},Xs={control:{register:J,unregister:Lt,getFieldState:Wt,handleSubmit:ze,setError:Yt,_subscribe:Ht,_runSchema:E,_focusError:G,_getWatch:x,_getDirty:T,_setValid:L,_setFieldArray:C,_setDisabledField:z,_setErrors:F,_getFieldArray:_,_reset:Js,_resetDefaultValues:()=>qe(t.defaultValues)&&t.defaultValues().then(m=>{Ks(m,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:k,_disableForm:he,_subjects:h,_proxyFormState:u,get _fields(){return r},get _formValues(){return n},get _state(){return l},set _state(m){l=m},get _defaultValues(){return i},get _names(){return o},set _names(m){o=m},get _formState(){return a},get _options(){return t},set _options(m){t={...t,...m}}},subscribe:ps,trigger:Ae,register:J,handleSubmit:ze,watch:gs,setValue:M,getValues:yt,reset:Ks,resetField:bt,clearErrors:fs,unregister:Lt,setError:Yt,setFocus:Nr,getFieldState:Wt};return{...Xs,formControl:Xs}}function gn(s={}){const t=te.useRef(void 0),a=te.useRef(void 0),[r,i]=te.useState({isDirty:!1,isValidating:!1,isLoading:qe(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:qe(s.defaultValues)?void 0:s.defaultValues});if(!t.current)if(s.formControl)t.current={...s.formControl,formState:r},s.defaultValues&&!qe(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:l,...o}=fn(s);t.current={...o,formState:r}}const n=t.current.control;return n._options=s,qs(()=>{const l=n._subscribe({formState:n._proxyFormState,callback:()=>i({...n._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),n._formState.isReady=!0,l},[n]),te.useEffect(()=>n._disableForm(s.disabled),[n,s.disabled]),te.useEffect(()=>{s.mode&&(n._options.mode=s.mode),s.reValidateMode&&(n._options.reValidateMode=s.reValidateMode)},[n,s.mode,s.reValidateMode]),te.useEffect(()=>{s.errors&&(n._setErrors(s.errors),n._focusError())},[n,s.errors]),te.useEffect(()=>{s.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,s.shouldUnregister]),te.useEffect(()=>{if(n._proxyFormState.isDirty){const l=n._getDirty();l!==r.isDirty&&n._subjects.state.next({isDirty:l})}},[n,r.isDirty]),te.useEffect(()=>{s.values&&!st(s.values,a.current)?(n._reset(s.values,{keepFieldsRef:!0,...n._options.resetOptions}),a.current=s.values,i(l=>({...l}))):n._resetDefaultValues()},[n,s.values]),te.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),t.current.formState=er(r,n),t.current}const pa=(s,t,a)=>{if(s&&"reportValidity"in s){const r=$(a,t);s.setCustomValidity(r&&r.message||""),s.reportValidity()}},Ps=(s,t)=>{for(const a in t.fields){const r=t.fields[a];r&&r.ref&&"reportValidity"in r.ref?pa(r.ref,a,s):r&&r.refs&&r.refs.forEach(i=>pa(i,a,s))}},ya=(s,t)=>{t.shouldUseNativeValidation&&Ps(s,t);const a={};for(const r in s){const i=$(t.fields,r),n=Object.assign(s[r]||{},{ref:i&&i.ref});if(pn(t.names||Object.keys(s),r)){const l=Object.assign({},$(a,r));de(l,"root",n),de(a,r,l)}else de(a,r,n)}return a},pn=(s,t)=>{const a=ba(t);return s.some(r=>ba(r).match(`^${a}\\.\\d+`))};function ba(s){return s.replace(/\]|\[/g,"")}function or(s,t,a){function r(o,c){var d;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(d=o._zod).traits??(d.traits=new Set),o._zod.traits.add(s),t(o,c);for(const u in l.prototype)u in o||Object.defineProperty(o,u,{value:l.prototype[u].bind(o)});o._zod.constr=l,o._zod.def=c}const i=(a==null?void 0:a.Parent)??Object;class n extends i{}Object.defineProperty(n,"name",{value:s});function l(o){var c;const d=a!=null&&a.Parent?new n:this;r(d,o),(c=d._zod).deferred??(c.deferred=[]);for(const u of d._zod.deferred)u();return d}return Object.defineProperty(l,"init",{value:r}),Object.defineProperty(l,Symbol.hasInstance,{value:o=>{var c,d;return a!=null&&a.Parent&&o instanceof a.Parent?!0:(d=(c=o==null?void 0:o._zod)==null?void 0:c.traits)==null?void 0:d.has(s)}}),Object.defineProperty(l,"name",{value:s}),l}class yn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const bn={};function cr(s){return bn}function vn(s,t){return typeof t=="bigint"?t.toString():t}const dr=Error.captureStackTrace?Error.captureStackTrace:(...s)=>{};function Kt(s){return typeof s=="string"?s:s==null?void 0:s.message}function ur(s,t,a){var i,n,l,o,c,d;const r={...s,path:s.path??[]};if(!s.message){const u=Kt((l=(n=(i=s.inst)==null?void 0:i._zod.def)==null?void 0:n.error)==null?void 0:l.call(n,s))??Kt((o=t==null?void 0:t.error)==null?void 0:o.call(t,s))??Kt((c=a.customError)==null?void 0:c.call(a,s))??Kt((d=a.localeError)==null?void 0:d.call(a,s))??"Invalid input";r.message=u}return delete r.inst,delete r.continue,t!=null&&t.reportInput||delete r.input,r}const mr=(s,t)=>{s.name="$ZodError",Object.defineProperty(s,"_zod",{value:s._zod,enumerable:!1}),Object.defineProperty(s,"issues",{value:t,enumerable:!1}),Object.defineProperty(s,"message",{get(){return JSON.stringify(t,vn,2)},enumerable:!0}),Object.defineProperty(s,"toString",{value:()=>s.message,enumerable:!1})},jn=or("$ZodError",mr),hr=or("$ZodError",mr,{Parent:Error}),Nn=s=>(t,a,r,i)=>{const n=r?Object.assign(r,{async:!1}):{async:!1},l=t._zod.run({value:a,issues:[]},n);if(l instanceof Promise)throw new yn;if(l.issues.length){const o=new((i==null?void 0:i.Err)??s)(l.issues.map(c=>ur(c,n,cr())));throw dr(o,i==null?void 0:i.callee),o}return l.value},wn=Nn(hr),_n=s=>async(t,a,r,i)=>{const n=r?Object.assign(r,{async:!0}):{async:!0};let l=t._zod.run({value:a,issues:[]},n);if(l instanceof Promise&&(l=await l),l.issues.length){const o=new((i==null?void 0:i.Err)??s)(l.issues.map(c=>ur(c,n,cr())));throw dr(o,i==null?void 0:i.callee),o}return l.value},kn=_n(hr);function va(s,t){try{var a=s()}catch(r){return t(r)}return a&&a.then?a.then(void 0,t):a}function Cn(s,t){for(var a={};s.length;){var r=s[0],i=r.code,n=r.message,l=r.path.join(".");if(!a[l])if("unionErrors"in r){var o=r.unionErrors[0].errors[0];a[l]={message:o.message,type:o.code}}else a[l]={message:n,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return s.push(f)})}),t){var c=a[l].types,d=c&&c[r.code];a[l]=Zs(l,t,a,i,d?[].concat(d,r.message):r.message)}s.shift()}return a}function En(s,t){for(var a={};s.length;){var r=s[0],i=r.code,n=r.message,l=r.path.join(".");if(!a[l])if(r.code==="invalid_union"&&r.errors.length>0){var o=r.errors[0][0];a[l]={message:o.message,type:o.code}}else a[l]={message:n,type:i};if(r.code==="invalid_union"&&r.errors.forEach(function(u){return u.forEach(function(f){return s.push(f)})}),t){var c=a[l].types,d=c&&c[r.code];a[l]=Zs(l,t,a,i,d?[].concat(d,r.message):r.message)}s.shift()}return a}function Sn(s,t,a){if(a===void 0&&(a={}),function(r){return"_def"in r&&typeof r._def=="object"&&"typeName"in r._def}(s))return function(r,i,n){try{return Promise.resolve(va(function(){return Promise.resolve(s[a.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(l){return n.shouldUseNativeValidation&&Ps({},n),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(o){return Array.isArray(o==null?void 0:o.issues)}(l))return{values:{},errors:ya(Cn(l.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};if(function(r){return"_zod"in r&&typeof r._zod=="object"}(s))return function(r,i,n){try{return Promise.resolve(va(function(){return Promise.resolve((a.mode==="sync"?wn:kn)(s,r,t)).then(function(l){return n.shouldUseNativeValidation&&Ps({},n),{errors:{},values:a.raw?Object.assign({},r):l}})},function(l){if(function(o){return o instanceof jn}(l))return{values:{},errors:ya(En(l.issues,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}var le;(function(s){s.assertEqual=i=>{};function t(i){}s.assertIs=t;function a(i){throw new Error}s.assertNever=a,s.arrayToEnum=i=>{const n={};for(const l of i)n[l]=l;return n},s.getValidEnumValues=i=>{const n=s.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),l={};for(const o of n)l[o]=i[o];return s.objectValues(l)},s.objectValues=i=>s.objectKeys(i).map(function(n){return i[n]}),s.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const n=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.push(l);return n},s.find=(i,n)=>{for(const l of i)if(n(l))return l},s.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,n=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(n)}s.joinValues=r,s.jsonStringifyReplacer=(i,n)=>typeof n=="bigint"?n.toString():n})(le||(le={}));var ja;(function(s){s.mergeShapes=(t,a)=>({...t,...a})})(ja||(ja={}));const W=le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lt=s=>{switch(typeof s){case"undefined":return W.undefined;case"string":return W.string;case"number":return Number.isNaN(s)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(s)?W.array:s===null?W.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?W.promise:typeof Map<"u"&&s instanceof Map?W.map:typeof Set<"u"&&s instanceof Set?W.set:typeof Date<"u"&&s instanceof Date?W.date:W.object;default:return W.unknown}},I=le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class it extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=t}format(t){const a=t||function(n){return n.message},r={_errors:[]},i=n=>{for(const l of n.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(a(l));else{let o=r,c=0;for(;c<l.path.length;){const d=l.path[c];c===l.path.length-1?(o[d]=o[d]||{_errors:[]},o[d]._errors.push(a(l))):o[d]=o[d]||{_errors:[]},o=o[d],c++}}};return i(this),r}static assert(t){if(!(t instanceof it))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=a=>a.message){const a={},r=[];for(const i of this.issues)if(i.path.length>0){const n=i.path[0];a[n]=a[n]||[],a[n].push(t(i))}else r.push(t(i));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}it.create=s=>new it(s);const Ts=(s,t)=>{let a;switch(s.code){case I.invalid_type:s.received===W.undefined?a="Required":a=`Expected ${s.expected}, received ${s.received}`;break;case I.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(s.expected,le.jsonStringifyReplacer)}`;break;case I.unrecognized_keys:a=`Unrecognized key(s) in object: ${le.joinValues(s.keys,", ")}`;break;case I.invalid_union:a="Invalid input";break;case I.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${le.joinValues(s.options)}`;break;case I.invalid_enum_value:a=`Invalid enum value. Expected ${le.joinValues(s.options)}, received '${s.received}'`;break;case I.invalid_arguments:a="Invalid function arguments";break;case I.invalid_return_type:a="Invalid function return type";break;case I.invalid_date:a="Invalid date";break;case I.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(a=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?a=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?a=`Invalid input: must end with "${s.validation.endsWith}"`:le.assertNever(s.validation):s.validation!=="regex"?a=`Invalid ${s.validation}`:a="Invalid";break;case I.too_small:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="bigint"?a=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:a="Invalid input";break;case I.too_big:s.type==="array"?a=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?a=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?a=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?a=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?a=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:a="Invalid input";break;case I.custom:a="Invalid input";break;case I.invalid_intersection_types:a="Intersection results could not be merged";break;case I.not_multiple_of:a=`Number must be a multiple of ${s.multipleOf}`;break;case I.not_finite:a="Number must be finite";break;default:a=t.defaultError,le.assertNever(s)}return{message:a}};let An=Ts;function Pn(){return An}const Tn=s=>{const{data:t,path:a,errorMaps:r,issueData:i}=s,n=[...a,...i.path||[]],l={...i,path:n};if(i.message!==void 0)return{...i,path:n,message:i.message};let o="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)o=d(l,{data:t,defaultError:o}).message;return{...i,path:n,message:o}};function B(s,t){const a=Pn(),r=Tn({issueData:t,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,a,a===Ts?void 0:Ts].filter(i=>!!i)});s.common.issues.push(r)}class Oe{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,a){const r=[];for(const i of a){if(i.status==="aborted")return X;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,a){const r=[];for(const i of a){const n=await i.key,l=await i.value;r.push({key:n,value:l})}return Oe.mergeObjectSync(t,r)}static mergeObjectSync(t,a){const r={};for(const i of a){const{key:n,value:l}=i;if(n.status==="aborted"||l.status==="aborted")return X;n.status==="dirty"&&t.dirty(),l.status==="dirty"&&t.dirty(),n.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[n.value]=l.value)}return{status:t.value,value:r}}}const X=Object.freeze({status:"aborted"}),Ft=s=>({status:"dirty",value:s}),Ue=s=>({status:"valid",value:s}),Na=s=>s.status==="aborted",wa=s=>s.status==="dirty",Et=s=>s.status==="valid",is=s=>typeof Promise<"u"&&s instanceof Promise;var H;(function(s){s.errToObj=t=>typeof t=="string"?{message:t}:t||{},s.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(H||(H={}));class ht{constructor(t,a,r,i){this._cachedPath=[],this.parent=t,this.data=a,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _a=(s,t)=>{if(Et(t))return{success:!0,data:t.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new it(s.common.issues);return this._error=a,this._error}}};function ae(s){if(!s)return{};const{errorMap:t,invalid_type_error:a,required_error:r,description:i}=s;if(t&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(l,o)=>{const{message:c}=s;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??r??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??a??o.defaultError}},description:i}}class ne{get description(){return this._def.description}_getType(t){return lt(t.data)}_getOrReturnCtx(t,a){return a||{common:t.parent.common,data:t.data,parsedType:lt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Oe,ctx:{common:t.parent.common,data:t.data,parsedType:lt(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const a=this._parse(t);if(is(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(t){const a=this._parse(t);return Promise.resolve(a)}parse(t,a){const r=this.safeParse(t,a);if(r.success)return r.data;throw r.error}safeParse(t,a){const r={common:{issues:[],async:(a==null?void 0:a.async)??!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lt(t)},i=this._parseSync({data:t,path:r.path,parent:r});return _a(r,i)}"~validate"(t){var r,i;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lt(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:a});return Et(n)?{value:n.value}:{issues:a.common.issues}}catch(n){(i=(r=n==null?void 0:n.message)==null?void 0:r.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(n=>Et(n)?{value:n.value}:{issues:a.common.issues})}async parseAsync(t,a){const r=await this.safeParseAsync(t,a);if(r.success)return r.data;throw r.error}async safeParseAsync(t,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lt(t)},i=this._parse({data:t,path:r.path,parent:r}),n=await(is(i)?i:Promise.resolve(i));return _a(r,n)}refine(t,a){const r=i=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(i):a;return this._refinement((i,n)=>{const l=t(i),o=()=>n.addIssue({code:I.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(t,a){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof a=="function"?a(r,i):a),!1))}_refinement(t){return new Pt({schema:this,typeName:ee.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return mt.create(this,this._def)}nullable(){return Tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Qe.create(this)}promise(){return os.create(this,this._def)}or(t){return ns.create([this,t],this._def)}and(t){return ls.create(this,t,this._def)}transform(t){return new Pt({...ae(this._def),schema:this,typeName:ee.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const a=typeof t=="function"?t:()=>t;return new Vs({...ae(this._def),innerType:this,defaultValue:a,typeName:ee.ZodDefault})}brand(){return new el({typeName:ee.ZodBranded,type:this,...ae(this._def)})}catch(t){const a=typeof t=="function"?t:()=>t;return new Rs({...ae(this._def),innerType:this,catchValue:a,typeName:ee.ZodCatch})}describe(t){const a=this.constructor;return new a({...this._def,description:t})}pipe(t){return Hs.create(this,t)}readonly(){return Fs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const In=/^c[^\s-]{8,}$/i,Ln=/^[0-9a-z]+$/,Vn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Rn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Fn=/^[a-z0-9_-]{21}$/i,Dn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,On=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Mn=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$n="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ns;const Un=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Bn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Zn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Wn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,xr="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Yn=new RegExp(`^${xr}$`);function fr(s){let t="[0-5]\\d";s.precision?t=`${t}\\.\\d{${s.precision}}`:s.precision==null&&(t=`${t}(\\.\\d+)?`);const a=s.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${a}`}function Hn(s){return new RegExp(`^${fr(s)}$`)}function Gn(s){let t=`${xr}T${fr(s)}`;const a=[];return a.push(s.local?"Z?":"Z"),s.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function Qn(s,t){return!!((t==="v4"||!t)&&Un.test(s)||(t==="v6"||!t)&&Bn.test(s))}function Jn(s,t){if(!Dn.test(s))return!1;try{const[a]=s.split(".");if(!a)return!1;const r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function Kn(s,t){return!!((t==="v4"||!t)&&zn.test(s)||(t==="v6"||!t)&&qn.test(s))}class ct extends ne{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==W.string){const n=this._getOrReturnCtx(t);return B(n,{code:I.invalid_type,expected:W.string,received:n.parsedType}),X}const r=new Oe;let i;for(const n of this._def.checks)if(n.kind==="min")t.data.length<n.value&&(i=this._getOrReturnCtx(t,i),B(i,{code:I.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="max")t.data.length>n.value&&(i=this._getOrReturnCtx(t,i),B(i,{code:I.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),r.dirty());else if(n.kind==="length"){const l=t.data.length>n.value,o=t.data.length<n.value;(l||o)&&(i=this._getOrReturnCtx(t,i),l?B(i,{code:I.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&B(i,{code:I.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),r.dirty())}else if(n.kind==="email")Mn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"email",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="emoji")Ns||(Ns=new RegExp($n,"u")),Ns.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"emoji",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="uuid")Rn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"uuid",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="nanoid")Fn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"nanoid",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid")In.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"cuid",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="cuid2")Ln.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"cuid2",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="ulid")Vn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"ulid",code:I.invalid_string,message:n.message}),r.dirty());else if(n.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),B(i,{validation:"url",code:I.invalid_string,message:n.message}),r.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"regex",code:I.invalid_string,message:n.message}),r.dirty())):n.kind==="trim"?t.data=t.data.trim():n.kind==="includes"?t.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),r.dirty()):n.kind==="toLowerCase"?t.data=t.data.toLowerCase():n.kind==="toUpperCase"?t.data=t.data.toUpperCase():n.kind==="startsWith"?t.data.startsWith(n.value)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:{startsWith:n.value},message:n.message}),r.dirty()):n.kind==="endsWith"?t.data.endsWith(n.value)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:{endsWith:n.value},message:n.message}),r.dirty()):n.kind==="datetime"?Gn(n).test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:"datetime",message:n.message}),r.dirty()):n.kind==="date"?Yn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:"date",message:n.message}),r.dirty()):n.kind==="time"?Hn(n).test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{code:I.invalid_string,validation:"time",message:n.message}),r.dirty()):n.kind==="duration"?On.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"duration",code:I.invalid_string,message:n.message}),r.dirty()):n.kind==="ip"?Qn(t.data,n.version)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"ip",code:I.invalid_string,message:n.message}),r.dirty()):n.kind==="jwt"?Jn(t.data,n.alg)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"jwt",code:I.invalid_string,message:n.message}),r.dirty()):n.kind==="cidr"?Kn(t.data,n.version)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"cidr",code:I.invalid_string,message:n.message}),r.dirty()):n.kind==="base64"?Zn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"base64",code:I.invalid_string,message:n.message}),r.dirty()):n.kind==="base64url"?Wn.test(t.data)||(i=this._getOrReturnCtx(t,i),B(i,{validation:"base64url",code:I.invalid_string,message:n.message}),r.dirty()):le.assertNever(n);return{status:r.value,value:t.data}}_regex(t,a,r){return this.refinement(i=>t.test(i),{validation:a,code:I.invalid_string,...H.errToObj(r)})}_addCheck(t){return new ct({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...H.errToObj(t)})}url(t){return this._addCheck({kind:"url",...H.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...H.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...H.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...H.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...H.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...H.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...H.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...H.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...H.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...H.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...H.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...H.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...H.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...H.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...H.errToObj(t)})}regex(t,a){return this._addCheck({kind:"regex",regex:t,...H.errToObj(a)})}includes(t,a){return this._addCheck({kind:"includes",value:t,position:a==null?void 0:a.position,...H.errToObj(a==null?void 0:a.message)})}startsWith(t,a){return this._addCheck({kind:"startsWith",value:t,...H.errToObj(a)})}endsWith(t,a){return this._addCheck({kind:"endsWith",value:t,...H.errToObj(a)})}min(t,a){return this._addCheck({kind:"min",value:t,...H.errToObj(a)})}max(t,a){return this._addCheck({kind:"max",value:t,...H.errToObj(a)})}length(t,a){return this._addCheck({kind:"length",value:t,...H.errToObj(a)})}nonempty(t){return this.min(1,H.errToObj(t))}trim(){return new ct({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ct({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ct({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxLength(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}ct.create=s=>new ct({checks:[],typeName:ee.ZodString,coerce:(s==null?void 0:s.coerce)??!1,...ae(s)});function Xn(s,t){const a=(s.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=a>r?a:r,n=Number.parseInt(s.toFixed(i).replace(".","")),l=Number.parseInt(t.toFixed(i).replace(".",""));return n%l/10**i}class St extends ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==W.number){const n=this._getOrReturnCtx(t);return B(n,{code:I.invalid_type,expected:W.number,received:n.parsedType}),X}let r;const i=new Oe;for(const n of this._def.checks)n.kind==="int"?le.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),B(r,{code:I.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):n.kind==="min"?(n.inclusive?t.data<n.value:t.data<=n.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?t.data>n.value:t.data>=n.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="multipleOf"?Xn(t.data,n.value)!==0&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):n.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),B(r,{code:I.not_finite,message:n.message}),i.dirty()):le.assertNever(n);return{status:i.value,value:t.data}}gte(t,a){return this.setLimit("min",t,!0,H.toString(a))}gt(t,a){return this.setLimit("min",t,!1,H.toString(a))}lte(t,a){return this.setLimit("max",t,!0,H.toString(a))}lt(t,a){return this.setLimit("max",t,!1,H.toString(a))}setLimit(t,a,r,i){return new St({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:H.toString(i)}]})}_addCheck(t){return new St({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:H.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:H.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:H.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:H.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:H.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:H.toString(a)})}finite(t){return this._addCheck({kind:"finite",message:H.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:H.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:H.toString(t)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&le.isInteger(t.value))}get isFinite(){let t=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(a)&&Number.isFinite(t)}}St.create=s=>new St({checks:[],typeName:ee.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...ae(s)});class Ut extends ne{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==W.bigint)return this._getInvalidInput(t);let r;const i=new Oe;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?t.data<n.value:t.data<=n.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?t.data>n.value:t.data>=n.value)&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="multipleOf"?t.data%n.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),B(r,{code:I.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):le.assertNever(n);return{status:i.value,value:t.data}}_getInvalidInput(t){const a=this._getOrReturnCtx(t);return B(a,{code:I.invalid_type,expected:W.bigint,received:a.parsedType}),X}gte(t,a){return this.setLimit("min",t,!0,H.toString(a))}gt(t,a){return this.setLimit("min",t,!1,H.toString(a))}lte(t,a){return this.setLimit("max",t,!0,H.toString(a))}lt(t,a){return this.setLimit("max",t,!1,H.toString(a))}setLimit(t,a,r,i){return new Ut({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:H.toString(i)}]})}_addCheck(t){return new Ut({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:H.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:H.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:H.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:H.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:H.toString(a)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}Ut.create=s=>new Ut({checks:[],typeName:ee.ZodBigInt,coerce:(s==null?void 0:s.coerce)??!1,...ae(s)});class Is extends ne{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==W.boolean){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.boolean,received:r.parsedType}),X}return Ue(t.data)}}Is.create=s=>new Is({typeName:ee.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...ae(s)});class zt extends ne{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==W.date){const n=this._getOrReturnCtx(t);return B(n,{code:I.invalid_type,expected:W.date,received:n.parsedType}),X}if(Number.isNaN(t.data.getTime())){const n=this._getOrReturnCtx(t);return B(n,{code:I.invalid_date}),X}const r=new Oe;let i;for(const n of this._def.checks)n.kind==="min"?t.data.getTime()<n.value&&(i=this._getOrReturnCtx(t,i),B(i,{code:I.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),r.dirty()):n.kind==="max"?t.data.getTime()>n.value&&(i=this._getOrReturnCtx(t,i),B(i,{code:I.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),r.dirty()):le.assertNever(n);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new zt({...this._def,checks:[...this._def.checks,t]})}min(t,a){return this._addCheck({kind:"min",value:t.getTime(),message:H.toString(a)})}max(t,a){return this._addCheck({kind:"max",value:t.getTime(),message:H.toString(a)})}get minDate(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t!=null?new Date(t):null}}zt.create=s=>new zt({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:ee.ZodDate,...ae(s)});class ka extends ne{_parse(t){if(this._getType(t)!==W.symbol){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.symbol,received:r.parsedType}),X}return Ue(t.data)}}ka.create=s=>new ka({typeName:ee.ZodSymbol,...ae(s)});class Ca extends ne{_parse(t){if(this._getType(t)!==W.undefined){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.undefined,received:r.parsedType}),X}return Ue(t.data)}}Ca.create=s=>new Ca({typeName:ee.ZodUndefined,...ae(s)});class Ea extends ne{_parse(t){if(this._getType(t)!==W.null){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.null,received:r.parsedType}),X}return Ue(t.data)}}Ea.create=s=>new Ea({typeName:ee.ZodNull,...ae(s)});class Sa extends ne{constructor(){super(...arguments),this._any=!0}_parse(t){return Ue(t.data)}}Sa.create=s=>new Sa({typeName:ee.ZodAny,...ae(s)});class Aa extends ne{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ue(t.data)}}Aa.create=s=>new Aa({typeName:ee.ZodUnknown,...ae(s)});class xt extends ne{_parse(t){const a=this._getOrReturnCtx(t);return B(a,{code:I.invalid_type,expected:W.never,received:a.parsedType}),X}}xt.create=s=>new xt({typeName:ee.ZodNever,...ae(s)});class Pa extends ne{_parse(t){if(this._getType(t)!==W.undefined){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.void,received:r.parsedType}),X}return Ue(t.data)}}Pa.create=s=>new Pa({typeName:ee.ZodVoid,...ae(s)});class Qe extends ne{_parse(t){const{ctx:a,status:r}=this._processInputParams(t),i=this._def;if(a.parsedType!==W.array)return B(a,{code:I.invalid_type,expected:W.array,received:a.parsedType}),X;if(i.exactLength!==null){const l=a.data.length>i.exactLength.value,o=a.data.length<i.exactLength.value;(l||o)&&(B(a,{code:l?I.too_big:I.too_small,minimum:o?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&a.data.length<i.minLength.value&&(B(a,{code:I.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&a.data.length>i.maxLength.value&&(B(a,{code:I.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((l,o)=>i.type._parseAsync(new ht(a,l,a.path,o)))).then(l=>Oe.mergeArray(r,l));const n=[...a.data].map((l,o)=>i.type._parseSync(new ht(a,l,a.path,o)));return Oe.mergeArray(r,n)}get element(){return this._def.type}min(t,a){return new Qe({...this._def,minLength:{value:t,message:H.toString(a)}})}max(t,a){return new Qe({...this._def,maxLength:{value:t,message:H.toString(a)}})}length(t,a){return new Qe({...this._def,exactLength:{value:t,message:H.toString(a)}})}nonempty(t){return this.min(1,t)}}Qe.create=(s,t)=>new Qe({type:s,minLength:null,maxLength:null,exactLength:null,typeName:ee.ZodArray,...ae(t)});function _t(s){if(s instanceof ye){const t={};for(const a in s.shape){const r=s.shape[a];t[a]=mt.create(_t(r))}return new ye({...s._def,shape:()=>t})}else return s instanceof Qe?new Qe({...s._def,type:_t(s.element)}):s instanceof mt?mt.create(_t(s.unwrap())):s instanceof Tt?Tt.create(_t(s.unwrap())):s instanceof pt?pt.create(s.items.map(t=>_t(t))):s}class ye extends ne{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),a=le.objectKeys(t);return this._cached={shape:t,keys:a},this._cached}_parse(t){if(this._getType(t)!==W.object){const d=this._getOrReturnCtx(t);return B(d,{code:I.invalid_type,expected:W.object,received:d.parsedType}),X}const{status:r,ctx:i}=this._processInputParams(t),{shape:n,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof xt&&this._def.unknownKeys==="strip"))for(const d in i.data)l.includes(d)||o.push(d);const c=[];for(const d of l){const u=n[d],f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new ht(i,f,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof xt){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of o)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(d==="strict")o.length>0&&(B(i,{code:I.unrecognized_keys,keys:o}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of o){const f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new ht(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,h=await u.value;d.push({key:f,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Oe.mergeObjectSync(r,d)):Oe.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return H.errToObj,new ye({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(a,r)=>{var n,l;const i=((l=(n=this._def).errorMap)==null?void 0:l.call(n,a,r).message)??r.defaultError;return a.code==="unrecognized_keys"?{message:H.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new ye({...this._def,unknownKeys:"strip"})}passthrough(){return new ye({...this._def,unknownKeys:"passthrough"})}extend(t){return new ye({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ye({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ee.ZodObject})}setKey(t,a){return this.augment({[t]:a})}catchall(t){return new ye({...this._def,catchall:t})}pick(t){const a={};for(const r of le.objectKeys(t))t[r]&&this.shape[r]&&(a[r]=this.shape[r]);return new ye({...this._def,shape:()=>a})}omit(t){const a={};for(const r of le.objectKeys(this.shape))t[r]||(a[r]=this.shape[r]);return new ye({...this._def,shape:()=>a})}deepPartial(){return _t(this)}partial(t){const a={};for(const r of le.objectKeys(this.shape)){const i=this.shape[r];t&&!t[r]?a[r]=i:a[r]=i.optional()}return new ye({...this._def,shape:()=>a})}required(t){const a={};for(const r of le.objectKeys(this.shape))if(t&&!t[r])a[r]=this.shape[r];else{let n=this.shape[r];for(;n instanceof mt;)n=n._def.innerType;a[r]=n}return new ye({...this._def,shape:()=>a})}keyof(){return gr(le.objectKeys(this.shape))}}ye.create=(s,t)=>new ye({shape:()=>s,unknownKeys:"strip",catchall:xt.create(),typeName:ee.ZodObject,...ae(t)});ye.strictCreate=(s,t)=>new ye({shape:()=>s,unknownKeys:"strict",catchall:xt.create(),typeName:ee.ZodObject,...ae(t)});ye.lazycreate=(s,t)=>new ye({shape:s,unknownKeys:"strip",catchall:xt.create(),typeName:ee.ZodObject,...ae(t)});class ns extends ne{_parse(t){const{ctx:a}=this._processInputParams(t),r=this._def.options;function i(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return a.common.issues.push(...o.ctx.common.issues),o.result;const l=n.map(o=>new it(o.ctx.common.issues));return B(a,{code:I.invalid_union,unionErrors:l}),X}if(a.common.async)return Promise.all(r.map(async n=>{const l={...a,common:{...a.common,issues:[]},parent:null};return{result:await n._parseAsync({data:a.data,path:a.path,parent:l}),ctx:l}})).then(i);{let n;const l=[];for(const c of r){const d={...a,common:{...a.common,issues:[]},parent:null},u=c._parseSync({data:a.data,path:a.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!n&&(n={result:u,ctx:d}),d.common.issues.length&&l.push(d.common.issues)}if(n)return a.common.issues.push(...n.ctx.common.issues),n.result;const o=l.map(c=>new it(c));return B(a,{code:I.invalid_union,unionErrors:o}),X}}get options(){return this._def.options}}ns.create=(s,t)=>new ns({options:s,typeName:ee.ZodUnion,...ae(t)});function Ls(s,t){const a=lt(s),r=lt(t);if(s===t)return{valid:!0,data:s};if(a===W.object&&r===W.object){const i=le.objectKeys(t),n=le.objectKeys(s).filter(o=>i.indexOf(o)!==-1),l={...s,...t};for(const o of n){const c=Ls(s[o],t[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(a===W.array&&r===W.array){if(s.length!==t.length)return{valid:!1};const i=[];for(let n=0;n<s.length;n++){const l=s[n],o=t[n],c=Ls(l,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return a===W.date&&r===W.date&&+s==+t?{valid:!0,data:s}:{valid:!1}}class ls extends ne{_parse(t){const{status:a,ctx:r}=this._processInputParams(t),i=(n,l)=>{if(Na(n)||Na(l))return X;const o=Ls(n.value,l.value);return o.valid?((wa(n)||wa(l))&&a.dirty(),{status:a.value,value:o.data}):(B(r,{code:I.invalid_intersection_types}),X)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([n,l])=>i(n,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ls.create=(s,t,a)=>new ls({left:s,right:t,typeName:ee.ZodIntersection,...ae(a)});class pt extends ne{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==W.array)return B(r,{code:I.invalid_type,expected:W.array,received:r.parsedType}),X;if(r.data.length<this._def.items.length)return B(r,{code:I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),X;!this._def.rest&&r.data.length>this._def.items.length&&(B(r,{code:I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const n=[...r.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new ht(r,l,r.path,o)):null}).filter(l=>!!l);return r.common.async?Promise.all(n).then(l=>Oe.mergeArray(a,l)):Oe.mergeArray(a,n)}get items(){return this._def.items}rest(t){return new pt({...this._def,rest:t})}}pt.create=(s,t)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pt({items:s,typeName:ee.ZodTuple,rest:null,...ae(t)})};class Ta extends ne{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==W.map)return B(r,{code:I.invalid_type,expected:W.map,received:r.parsedType}),X;const i=this._def.keyType,n=this._def.valueType,l=[...r.data.entries()].map(([o,c],d)=>({key:i._parse(new ht(r,o,r.path,[d,"key"])),value:n._parse(new ht(r,c,r.path,[d,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return X;(d.status==="dirty"||u.status==="dirty")&&a.dirty(),o.set(d.value,u.value)}return{status:a.value,value:o}})}else{const o=new Map;for(const c of l){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return X;(d.status==="dirty"||u.status==="dirty")&&a.dirty(),o.set(d.value,u.value)}return{status:a.value,value:o}}}}Ta.create=(s,t,a)=>new Ta({valueType:t,keyType:s,typeName:ee.ZodMap,...ae(a)});class Bt extends ne{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==W.set)return B(r,{code:I.invalid_type,expected:W.set,received:r.parsedType}),X;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(B(r,{code:I.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),a.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(B(r,{code:I.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),a.dirty());const n=this._def.valueType;function l(c){const d=new Set;for(const u of c){if(u.status==="aborted")return X;u.status==="dirty"&&a.dirty(),d.add(u.value)}return{status:a.value,value:d}}const o=[...r.data.values()].map((c,d)=>n._parse(new ht(r,c,r.path,d)));return r.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(t,a){return new Bt({...this._def,minSize:{value:t,message:H.toString(a)}})}max(t,a){return new Bt({...this._def,maxSize:{value:t,message:H.toString(a)}})}size(t,a){return this.min(t,a).max(t,a)}nonempty(t){return this.min(1,t)}}Bt.create=(s,t)=>new Bt({valueType:s,minSize:null,maxSize:null,typeName:ee.ZodSet,...ae(t)});class Ia extends ne{get schema(){return this._def.getter()}_parse(t){const{ctx:a}=this._processInputParams(t);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}Ia.create=(s,t)=>new Ia({getter:s,typeName:ee.ZodLazy,...ae(t)});class La extends ne{_parse(t){if(t.data!==this._def.value){const a=this._getOrReturnCtx(t);return B(a,{received:a.data,code:I.invalid_literal,expected:this._def.value}),X}return{status:"valid",value:t.data}}get value(){return this._def.value}}La.create=(s,t)=>new La({value:s,typeName:ee.ZodLiteral,...ae(t)});function gr(s,t){return new At({values:s,typeName:ee.ZodEnum,...ae(t)})}class At extends ne{_parse(t){if(typeof t.data!="string"){const a=this._getOrReturnCtx(t),r=this._def.values;return B(a,{expected:le.joinValues(r),received:a.parsedType,code:I.invalid_type}),X}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const a=this._getOrReturnCtx(t),r=this._def.values;return B(a,{received:a.data,code:I.invalid_enum_value,options:r}),X}return Ue(t.data)}get options(){return this._def.values}get enum(){const t={};for(const a of this._def.values)t[a]=a;return t}get Values(){const t={};for(const a of this._def.values)t[a]=a;return t}get Enum(){const t={};for(const a of this._def.values)t[a]=a;return t}extract(t,a=this._def){return At.create(t,{...this._def,...a})}exclude(t,a=this._def){return At.create(this.options.filter(r=>!t.includes(r)),{...this._def,...a})}}At.create=gr;class Va extends ne{_parse(t){const a=le.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==W.string&&r.parsedType!==W.number){const i=le.objectValues(a);return B(r,{expected:le.joinValues(i),received:r.parsedType,code:I.invalid_type}),X}if(this._cache||(this._cache=new Set(le.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=le.objectValues(a);return B(r,{received:r.data,code:I.invalid_enum_value,options:i}),X}return Ue(t.data)}get enum(){return this._def.values}}Va.create=(s,t)=>new Va({values:s,typeName:ee.ZodNativeEnum,...ae(t)});class os extends ne{unwrap(){return this._def.type}_parse(t){const{ctx:a}=this._processInputParams(t);if(a.parsedType!==W.promise&&a.common.async===!1)return B(a,{code:I.invalid_type,expected:W.promise,received:a.parsedType}),X;const r=a.parsedType===W.promise?a.data:Promise.resolve(a.data);return Ue(r.then(i=>this._def.type.parseAsync(i,{path:a.path,errorMap:a.common.contextualErrorMap})))}}os.create=(s,t)=>new os({type:s,typeName:ee.ZodPromise,...ae(t)});class Pt extends ne{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:a,ctx:r}=this._processInputParams(t),i=this._def.effect||null,n={addIssue:l=>{B(r,l),l.fatal?a.abort():a.dirty()},get path(){return r.path}};if(n.addIssue=n.addIssue.bind(n),i.type==="preprocess"){const l=i.transform(r.data,n);if(r.common.async)return Promise.resolve(l).then(async o=>{if(a.value==="aborted")return X;const c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?X:c.status==="dirty"||a.value==="dirty"?Ft(c.value):c});{if(a.value==="aborted")return X;const o=this._def.schema._parseSync({data:l,path:r.path,parent:r});return o.status==="aborted"?X:o.status==="dirty"||a.value==="dirty"?Ft(o.value):o}}if(i.type==="refinement"){const l=o=>{const c=i.refinement(o,n);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?X:(o.status==="dirty"&&a.dirty(),l(o.value),{status:a.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?X:(o.status==="dirty"&&a.dirty(),l(o.value).then(()=>({status:a.value,value:o.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Et(l))return X;const o=i.transform(l.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Et(l)?Promise.resolve(i.transform(l.value,n)).then(o=>({status:a.value,value:o})):X);le.assertNever(i)}}Pt.create=(s,t,a)=>new Pt({schema:s,typeName:ee.ZodEffects,effect:t,...ae(a)});Pt.createWithPreprocess=(s,t,a)=>new Pt({schema:t,effect:{type:"preprocess",transform:s},typeName:ee.ZodEffects,...ae(a)});class mt extends ne{_parse(t){return this._getType(t)===W.undefined?Ue(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}mt.create=(s,t)=>new mt({innerType:s,typeName:ee.ZodOptional,...ae(t)});class Tt extends ne{_parse(t){return this._getType(t)===W.null?Ue(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Tt.create=(s,t)=>new Tt({innerType:s,typeName:ee.ZodNullable,...ae(t)});class Vs extends ne{_parse(t){const{ctx:a}=this._processInputParams(t);let r=a.data;return a.parsedType===W.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Vs.create=(s,t)=>new Vs({innerType:s,typeName:ee.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ae(t)});class Rs extends ne{_parse(t){const{ctx:a}=this._processInputParams(t),r={...a,common:{...a.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return is(i)?i.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new it(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new it(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Rs.create=(s,t)=>new Rs({innerType:s,typeName:ee.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ae(t)});class Ra extends ne{_parse(t){if(this._getType(t)!==W.nan){const r=this._getOrReturnCtx(t);return B(r,{code:I.invalid_type,expected:W.nan,received:r.parsedType}),X}return{status:"valid",value:t.data}}}Ra.create=s=>new Ra({typeName:ee.ZodNaN,...ae(s)});class el extends ne{_parse(t){const{ctx:a}=this._processInputParams(t),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class Hs extends ne{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?X:n.status==="dirty"?(a.dirty(),Ft(n.value)):this._def.out._parseAsync({data:n.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?X:i.status==="dirty"?(a.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,a){return new Hs({in:t,out:a,typeName:ee.ZodPipeline})}}class Fs extends ne{_parse(t){const a=this._def.innerType._parse(t),r=i=>(Et(i)&&(i.value=Object.freeze(i.value)),i);return is(a)?a.then(i=>r(i)):r(a)}unwrap(){return this._def.innerType}}Fs.create=(s,t)=>new Fs({innerType:s,typeName:ee.ZodReadonly,...ae(t)});var ee;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(ee||(ee={}));const se=ct.create,kt=St.create,Ne=Is.create,Ds=zt.create;xt.create;const Ze=Qe.create,fe=ye.create;ns.create;ls.create;pt.create;const Je=At.create;os.create;mt.create;Tt.create;const tl=fe({email:se().min(1,"Email is required").email("Please enter a valid email address"),password:se().min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters"),confirmPassword:se().min(1,"Please confirm your password"),displayName:se().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Display name can only contain letters, numbers, spaces, hyphens, and underscores"),phoneNumber:se().optional().refine(s=>!s||/^\+?[\d\s\-\(\)]{10,}$/.test(s),"Please enter a valid phone number"),whatsappNumber:se().optional().refine(s=>!s||/^\+?[\d\s\-\(\)]{10,}$/.test(s),"Please enter a valid WhatsApp number"),bio:se().max(500,"Bio must be less than 500 characters").optional(),interests:Ze(se()).min(1,"Please select at least 1 interest").max(10,"You can select up to 10 interests"),dietaryPreferences:Ze(se()).min(1,"Please select at least 1 dietary preference").max(10,"You can select up to 10 dietary preferences"),address:fe({street:se().min(1,"Street address is required"),city:se().min(1,"City is required"),postalCode:se().min(1,"Postal code is required")}).optional(),privacy:fe({phoneVisible:Ne(),whatsappVisible:Ne(),addressVisible:Ne()})}).refine(s=>s.password===s.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});fe({email:se().min(1,"Email is required").email("Please enter a valid email address"),password:se().min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters")});fe({email:se().min(1,"Email is required").email("Please enter a valid email address")});const sl=fe({title:se().min(3,"Event title must be at least 3 characters").max(100,"Event title must be less than 100 characters"),description:se().min(10,"Event description must be at least 10 characters").max(2e3,"Event description must be less than 2000 characters"),type:Je(["birthday","potluck","farewell","celebration","other"]),visibility:Je(["public","private"]),dateTime:Ds().min(new Date,"Event date and time must be in the future"),duration:kt().min(15,"Event duration must be at least 15 minutes").max(480,"Event duration cannot exceed 8 hours"),location:fe({name:se().min(1,"Location name is required").max(100,"Location name must be less than 100 characters"),address:se().min(1,"Address is required").max(200,"Address must be less than 200 characters"),coordinates:fe({lat:kt().min(-90).max(90),lng:kt().min(-180).max(180)}).optional()}),capacity:kt().min(1,"Capacity must be at least 1").max(1e3,"Capacity cannot exceed 1000").optional(),bringList:fe({enabled:Ne(),items:Ze(fe({item:se().min(1,"Item name is required").max(50,"Item name must be less than 50 characters"),quantity:kt().min(1,"Quantity must be at least 1").max(100,"Quantity cannot exceed 100")})).max(20,"Cannot have more than 20 items on bring list")})});sl.partial().extend({status:Je(["draft","published","cancelled","completed"]).optional()});fe({status:Je(["going","maybe","not_going"]),guestCount:kt().min(0,"Guest count cannot be negative").max(10,"Cannot bring more than 10 guests").default(0),bringItems:Ze(se()).max(10,"Cannot claim more than 10 items").optional()});fe({displayName:se().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Display name can only contain letters, numbers, spaces, hyphens, and underscores").optional(),phoneNumber:se().optional().refine(s=>!s||/^\+?[\d\s\-\(\)]{10,}$/.test(s),"Please enter a valid phone number"),whatsappNumber:se().min(1,"WhatsApp number is required").refine(s=>/^\+?[\d\s\-\(\)]{10,}$/.test(s),"Please enter a valid WhatsApp number"),bio:se().max(500,"Bio must be less than 500 characters").optional(),interests:Ze(se()).max(10,"You can select up to 10 interests").optional(),dietaryPreferences:Ze(se()).max(10,"You can select up to 10 dietary preferences").optional(),address:fe({street:se().min(1,"Street address is required"),city:se().min(1,"City is required"),postalCode:se().min(1,"Postal code is required")}),privacy:fe({phoneVisible:Ne(),whatsappVisible:Ne(),addressVisible:Ne()}).optional()});fe({query:se().max(100,"Search query must be less than 100 characters").optional(),interests:Ze(se()).max(10,"Cannot filter by more than 10 interests").optional(),availability:Ze(Je(["weekdays","evenings","weekends"])).max(3).optional()});fe({query:se().max(100,"Search query must be less than 100 characters").optional(),type:Ze(Je(["birthday","potluck","farewell","celebration","other"])).max(5).optional(),dateRange:fe({start:Ds(),end:Ds()}).optional(),location:se().max(100,"Location must be less than 100 characters").optional(),status:Ze(Je(["draft","published","cancelled","completed"])).max(4).optional(),visibility:Ze(Je(["public","private"])).max(2).optional()});fe({userId:se().min(1,"User ID is required"),action:Je(["approve","suspend","activate"]),reason:se().max(500,"Reason must be less than 500 characters").optional()});fe({eventId:se().min(1,"Event ID is required"),action:Je(["publish","cancel","feature"]),reason:se().max(500,"Reason must be less than 500 characters").optional()});fe({email:fe({eventInvites:Ne(),eventUpdates:Ne(),eventReminders:Ne(),systemMessages:Ne()}),inApp:fe({eventInvites:Ne(),eventUpdates:Ne(),eventReminders:Ne(),systemMessages:Ne()}),push:fe({eventInvites:Ne(),eventUpdates:Ne(),eventReminders:Ne(),systemMessages:Ne()})});const al=()=>{const[s,t]=y.useState(!1),[a,r]=y.useState(1),i=Ye(),{register:n,error:l,clearError:o}=ve(),{control:c,handleSubmit:d,formState:{errors:u},watch:f,setValue:h,trigger:p}=gn({resolver:Sn(tl),mode:"onSubmit",defaultValues:{email:"",password:"",confirmPassword:"",displayName:"",phoneNumber:"",whatsappNumber:"",bio:"",interests:[],dietaryPreferences:[],address:{street:"",city:"",postalCode:""},privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1}}}),v=f("interests"),L=f("dietaryPreferences"),N=f("phoneNumber"),C=f("whatsappNumber"),S=f("address"),F=f("privacy");y.useEffect(()=>{a===4&&console.log("🎯 Step 4 reached, privacy values:",F)},[a,F]);const w=()=>{l&&o&&o()},P=["Cooking","Baking","Gardening","Photography","Music","Sports","Reading","Travel","Art","Technology","Volunteering","Fitness"],b=["Vegetarian","Vegan","Gluten-Free","Dairy-Free","Nut-Free","Kosher","Halal","Low-Carb","Paleo","Mediterranean"],E=async()=>{if(console.log("🔥 handleFormSubmit called with currentStep:",a),a!==4){console.log("❌ Attempted to submit form from step",a,"- blocking submission");return}console.log("✅ Form submission allowed - on step 4");try{t(!0),console.log("🚀 Starting registration submission from step 4...");const x=f();console.log("📝 Form data:",x),o&&(o(),console.log("🧹 Cleared previous errors")),console.log("🔍 Running final validation...");const _=await p();if(console.log("✅ Form validation result:",_),!_){console.log("❌ Form validation failed"),Z.error("Please fill in all required fields correctly."),t(!1);return}console.log("📤 Calling register function..."),await n(x.email,x.password,x.displayName,{phoneNumber:x.phoneNumber,whatsappNumber:x.whatsappNumber,bio:x.bio,interests:x.interests,dietaryPreferences:x.dietaryPreferences,address:x.address,privacy:x.privacy}),console.log("🎉 Registration successful!"),Z.success("🎉 Registration successful! Please check your email for verification.",{duration:5e3,style:{background:"#10B981",color:"#fff",fontSize:"16px",fontWeight:"bold"}}),setTimeout(()=>{i(`/email-verification?email=${encodeURIComponent(x.email)}`)},2e3)}catch(x){console.error("❌ Registration submission error:",x),console.error("❌ Error details:",{message:x.message,code:x.code,stack:x.stack}),x.message?Z.error(x.message):Z.error("Registration failed. Please try again.")}finally{t(!1),console.log("🏁 Registration submission completed")}},ie=async()=>{console.log("➡️ handleNextStep called for step",a);let x=[];switch(a){case 1:x=["email","password","confirmPassword","displayName"];break;case 2:x=["phoneNumber","whatsappNumber","bio","address"];break;case 3:x=["interests","dietaryPreferences"];break;case 4:x=[];break}console.log("🔍 Validating fields for step",a,":",x);const _=await p(x);console.log("✅ Step validation result for step",a,":",_),_?(console.log("➡️ Advancing to step",a+1),r(a+1)):console.log("❌ Step validation failed for step",a)},D=()=>{r(a-1)},k=x=>{const _=v||[];_.includes(x)?h("interests",_.filter(A=>A!==x)):_.length<10&&h("interests",[..._,x])},T=x=>{const _=L||[];_.includes(x)?h("dietaryPreferences",_.filter(A=>A!==x)):_.length<10&&h("dietaryPreferences",[..._,x])};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join LCC Assemble"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Connect with your community through shared events and experiences"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex items-center justify-center space-x-4",children:[1,2,3,4].map(x=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x<=a?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:x}),x<4&&e.jsx("div",{className:`w-12 h-1 mx-2 ${x<a?"bg-orange-500":"bg-gray-200"}`})]},x))}),e.jsxs("div",{className:"flex justify-center mt-2 space-x-8 text-sm text-gray-600",children:[e.jsx("span",{className:a>=1?"text-orange-600 font-medium":"",children:"Account"}),e.jsx("span",{className:a>=2?"text-orange-600 font-medium":"",children:"Profile"}),e.jsx("span",{className:a>=3?"text-orange-600 font-medium":"",children:"Preferences"}),e.jsx("span",{className:a>=4?"text-orange-600 font-medium":"",children:"Privacy"})]})]}),e.jsxs(Y,{className:"p-8",children:[l&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-800",children:l})})]})}),e.jsxs("form",{onSubmit:x=>x.preventDefault(),className:"space-y-6",children:[a===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create Your Account"}),e.jsx("p",{className:"text-sm text-gray-600",children:"* Required fields"}),e.jsx(Te,{name:"email",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,onChange:A=>{x.onChange(A),w()},type:"email",label:"Email Address *",placeholder:"your.email@example.com",error:(_=u.email)==null?void 0:_.message,required:!0})}}),e.jsx(Te,{name:"displayName",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,onChange:A=>{x.onChange(A),w()},label:"Display Name *",placeholder:"How you want to be known in the community",error:(_=u.displayName)==null?void 0:_.message,required:!0})}}),e.jsx(Te,{name:"password",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,onChange:A=>{x.onChange(A),w()},type:"password",label:"Password *",placeholder:"Create a secure password",error:(_=u.password)==null?void 0:_.message,required:!0})}}),e.jsx(Te,{name:"confirmPassword",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,onChange:A=>{x.onChange(A),w()},type:"password",label:"Confirm Password *",placeholder:"Confirm your password",error:(_=u.confirmPassword)==null?void 0:_.message,required:!0})}})]}),a===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Tell Us About Yourself"}),e.jsx("p",{className:"text-sm text-gray-600",children:"All fields are optional but help us personalize your experience"}),e.jsx(Te,{name:"phoneNumber",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,value:x.value||"",type:"tel",label:"Phone Number (Optional)",placeholder:"+1 (555) 123-4567",error:(_=u.phoneNumber)==null?void 0:_.message})}}),e.jsx(Te,{name:"whatsappNumber",control:c,render:({field:x})=>{var _;return e.jsx(K,{...x,value:x.value||"",type:"tel",label:"WhatsApp Number *",placeholder:"+1 (555) 123-4567",error:(_=u.whatsappNumber)==null?void 0:_.message,required:!0})}}),e.jsx(Te,{name:"bio",control:c,render:({field:x})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),e.jsx("textarea",{...x,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Tell us a bit about yourself..."}),u.bio&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.bio.message})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Address *"}),e.jsx("p",{className:"text-sm text-gray-600",children:"* Required for community events and connections"}),e.jsx(Te,{name:"address.street",control:c,render:({field:x})=>{var _,A;return e.jsx(K,{...x,label:"Street Address",placeholder:"123 Main Street",error:(A=(_=u.address)==null?void 0:_.street)==null?void 0:A.message})}}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Te,{name:"address.city",control:c,render:({field:x})=>{var _,A;return e.jsx(K,{...x,label:"City",placeholder:"Your City",error:(A=(_=u.address)==null?void 0:_.city)==null?void 0:A.message})}}),e.jsx(Te,{name:"address.postalCode",control:c,render:({field:x})=>{var _,A;return e.jsx(K,{...x,label:"Postal Code",placeholder:"A1A 1A1",error:(A=(_=u.address)==null?void 0:_.postalCode)==null?void 0:A.message})}})]})]})]}),a===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Interests & Preferences"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Help us connect you with like-minded community members"}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["💡 ",e.jsx("strong",{children:"Required:"})," Please select at least 1 interest and 1 dietary preference."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Interests * (Select 1-10)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:P.map(x=>e.jsx("button",{type:"button",onClick:()=>k(x),className:`px-3 py-2 text-sm rounded-full border transition-colors ${v!=null&&v.includes(x)?"bg-orange-500 text-white border-orange-500":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`,children:x},x))}),u.interests&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.interests.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Dietary Preferences * (Select 1-10)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:b.map(x=>e.jsx("button",{type:"button",onClick:()=>T(x),className:`px-3 py-2 text-sm rounded-full border transition-colors ${L!=null&&L.includes(x)?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`,children:x},x))}),u.dietaryPreferences&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.dietaryPreferences.message})]})]}),a===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Privacy Settings"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Control what information is visible to other community members. These settings are required."}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["🔒 ",e.jsx("strong",{children:"Final Step:"}),' Set your privacy preferences and click "Join the Community" to complete your registration.']})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Te,{name:"privacy.phoneVisible",control:c,render:({field:x})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.value,onChange:x.onChange,onBlur:x.onBlur,name:x.name,ref:x.ref,disabled:!N||N.trim()==="",className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsxs("label",{className:`ml-2 text-sm ${!N||N.trim()===""?"text-gray-400":"text-gray-700"}`,children:["Make phone number visible to other members",!N||N.trim()===""&&e.jsx("span",{className:"text-xs text-gray-500 block",children:"Add a phone number in the previous step to enable this option"})]})]})}),e.jsx(Te,{name:"privacy.whatsappVisible",control:c,render:({field:x})=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.value,onChange:x.onChange,onBlur:x.onBlur,name:x.name,ref:x.ref,disabled:!C||C.trim()==="",className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsxs("label",{className:`ml-2 text-sm ${!C||C.trim()===""?"text-gray-400":"text-gray-700"}`,children:["Make WhatsApp number visible to other members",!C||C.trim()===""&&e.jsx("span",{className:"text-xs text-gray-500 block",children:"Add a WhatsApp number in the previous step to enable this option"})]})]})}),e.jsx(Te,{name:"privacy.addressVisible",control:c,render:({field:x})=>{var A,U,M;const _=S&&(((A=S.street)==null?void 0:A.trim())||((U=S.city)==null?void 0:U.trim())||((M=S.postalCode)==null?void 0:M.trim()));return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:x.value,onChange:x.onChange,onBlur:x.onBlur,name:x.name,ref:x.ref,disabled:!_,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsxs("label",{className:`ml-2 text-sm ${_?"text-gray-700":"text-gray-400"}`,children:["Make address visible to other members",!_&&e.jsx("span",{className:"text-xs text-gray-500 block",children:"Add address information in the previous step to enable this option"})]})]})}})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"Privacy Promise"}),e.jsx("p",{className:"text-sm text-green-700",children:"Your privacy is important to us. You can change these settings anytime in your profile. We never share your information with third parties without your explicit consent."})]})]}),e.jsxs("div",{className:"flex justify-between pt-6",children:[a>1&&e.jsx(R,{type:"button",variant:"outline",onClick:D,disabled:s,children:"Previous"}),e.jsx("div",{className:"flex-1"}),a<4?e.jsx(R,{type:"button",onClick:ie,disabled:s,className:"px-6 py-2",children:"Next"}):e.jsx(R,{type:"button",disabled:s,className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:E,children:s?"Creating Account...":"Join the Community"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(Ve,{to:"/login",className:"font-medium text-orange-600 hover:text-orange-500",children:"Sign in here"})]})})]})]})})},rl=()=>{const[s,t]=y.useState(""),[a,r]=y.useState(!1),[i,n]=y.useState(""),[l,o]=y.useState(!1),{resetPassword:c}=ve(),d=async u=>{u.preventDefault(),n(""),r(!0);try{await c(s),o(!0),Z.success("Password reset email sent! Check your inbox.")}catch(f){console.error("Password reset error:",f);const h=f.message||"Failed to send password reset email. Please try again.";n(h),Z.error(h)}finally{r(!1)}};return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Check your email"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",e.jsx("strong",{children:s})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"If you don't see the email in your inbox, please check your spam folder."}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{onClick:()=>o(!1),variant:"outline",className:"w-full",children:"Send another email"}),e.jsx(Ve,{to:"/login",className:"block w-full text-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-600 bg-blue-50 hover:bg-blue-100 transition-colors",children:"Back to login"})]})]})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset your password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsx(Y,{className:"p-8",children:e.jsxs("form",{className:"space-y-6",onSubmit:d,children:[i&&e.jsx(De,{variant:"error",children:i}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsx("div",{className:"mt-1",children:e.jsx(K,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:u=>t(u.target.value),placeholder:"Enter your email address"})})]}),e.jsx("div",{children:e.jsx(R,{type:"submit",className:"w-full",disabled:a,isLoading:a,children:a?"Sending reset email...":"Send reset email"})})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(Ve,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Back to login"})]})})]})})},il=()=>{const s=Ye(),[t]=Sr(),{user:a,resendEmailVerification:r,checkEmailVerificationStatus:i,error:n,clearError:l}=ve(),[o,c]=y.useState(!1),[d,u]=y.useState(!1),[f,h]=y.useState(null),p=t.get("email")||(a==null?void 0:a.email)||"";y.useEffect(()=>{(async()=>{try{if(qr(xe,window.location.href)){console.log("🔗 Detected email verification link");let S=window.localStorage.getItem("emailForSignIn");if(S||(S=p),!S){console.error("❌ No email found for verification"),Z.error("Unable to verify email. Please try registering again."),s("/register");return}u(!0),console.log("📧 Verifying email for:",S);try{await Zr(xe,S,window.location.href),console.log("✅ Email verified and user signed in"),window.localStorage.removeItem("emailForSignIn"),h(!0),Z.success("Email verified successfully! Redirecting to dashboard..."),setTimeout(()=>{console.log("🚀 Redirecting to dashboard..."),s("/dashboard")},2e3)}catch(F){console.error("❌ Email verification failed:",F),F.code==="auth/expired-action-code"?Z.error("Verification link has expired. Please request a new one."):F.code==="auth/invalid-action-code"?Z.error("Invalid verification link. Please check the link and try again."):Z.error("Email verification failed. Please try again."),s("/login")}finally{u(!1)}}else if(console.log("📧 Not an email verification link, checking current user status"),a&&xe.currentUser){u(!0);try{const S=await i();h(S),S?(console.log("✅ Email already verified, redirecting to login"),Z.success("Email verified successfully! You can now sign in."),setTimeout(()=>{s("/login")},2e3)):console.log("❌ Email not verified yet")}catch(S){console.error("Error checking verification status:",S)}finally{u(!1)}}else console.log("⏳ Waiting for user authentication...")}catch(S){console.error("Error in email verification handling:",S),u(!1)}})()},[a,i,s,p]);const v=async()=>{c(!0);try{await r(),Z.success("Verification email sent! Check your inbox.")}catch(C){console.error("Resend email error:",C),Z.error(`Failed to resend email: ${C.message}`)}finally{c(!1)}},L=async()=>{if(!a||!xe.currentUser){console.log("❌ User not authenticated - email not verified"),Z.error("Please click the verification link in your email first before trying to sign in.",{icon:"❌",duration:5e3});return}u(!0);try{console.log("🔍 Manual check: Checking email verification status...");const C=await i();console.log("📧 Manual check result:",C),h(C),C?(Z.success("Email verified successfully! Redirecting to dashboard..."),console.log("🚀 Manual check: Redirecting to dashboard..."),s("/dashboard")):Z.error("Email not yet verified. Please check your inbox and click the verification link.",{icon:"📧",duration:5e3})}catch(C){console.error("Check status error:",C),Z.error(`Failed to check status: ${C.message}`)}finally{u(!1)}},N=()=>{s("/login")};return!a&&!p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(Y,{className:"max-w-md w-full p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Email Verification Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please log in to verify your email address."}),e.jsx(R,{onClick:N,children:"Go to Login"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx(Y,{className:"max-w-2xl w-full p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 mb-4",children:e.jsx("svg",{className:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Check Your Email"}),e.jsxs("p",{className:"text-lg text-gray-600 mb-6",children:["We've sent a verification link to ",e.jsx("strong",{children:p})]}),n&&e.jsx("div",{className:"mb-6",children:e.jsx(De,{type:"error",message:n})}),f===!0&&e.jsx("div",{className:"mb-6",children:e.jsx(De,{type:"success",message:"Email verified successfully! Redirecting to dashboard..."})}),f===!1&&e.jsx("div",{className:"mb-6",children:e.jsx(De,{type:"warning",message:"Email not yet verified. Please check your inbox and click the verification link."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"What to do next:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[e.jsx("li",{children:"1. Check your email inbox (and spam folder)"}),e.jsx("li",{children:'2. Click the "Verify Email" link in the email'}),e.jsx("li",{children:"3. You'll be automatically signed in and redirected to the dashboard"}),e.jsx("li",{children:`4. If you return here manually, click "I've Clicked the Verification Link"`})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(R,{onClick:L,disabled:d,variant:"outline",children:d?"Checking...":"I've Clicked the Verification Link"}),e.jsx(R,{onClick:v,disabled:o,variant:"outline",children:o?"Sending...":"Resend Verification Email"}),e.jsx(R,{onClick:N,variant:"ghost",children:"Back to Login"})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Didn't receive the email? Check your spam folder or try resending."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"The verification link will expire in 24 hours."})]})]})})})},nl=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"LCC Assemble - Test Page"}),e.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"If you can see this, React is working correctly!"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(R,{onClick:()=>window.location.href="/login",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg",children:"Go to Login"}),e.jsx(R,{onClick:()=>window.location.href="/register",variant:"outline",className:"ml-4",children:"Go to Registration"})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Debug Info:"}),e.jsxs("p",{className:"text-xs text-gray-600",children:["URL: ",window.location.href,e.jsx("br",{}),"Time: ",new Date().toLocaleString(),e.jsx("br",{}),"User Agent: ",navigator.userAgent.substring(0,50),"..."]})]})]})})}),We=({size:s="md",className:t=""})=>{const i=`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[s]} ${t}`.trim();return e.jsx("div",{className:i,role:"status","aria-label":"Loading",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})},Se="events",Fe=s=>s.toDate(),$e=s=>Wr.fromDate(s),It=async s=>{try{const t=_e(oe,Se,s),a=await Dt(t);if(a.exists()){const r=a.data();return{...r,id:a.id,dateTime:Fe(r.dateTime),createdAt:Fe(r.createdAt),updatedAt:Fe(r.updatedAt),attendees:Object.fromEntries(Object.entries(r.attendees||{}).map(([i,n])=>[i,{status:n.status,guestCount:n.guestCount,rsvpAt:Fe(n.rsvpAt),bringItems:n.bringItems||[]}]))}}return null}catch(t){throw console.error("Error getting event:",t),new Error("Failed to get event")}},ll=async(s,t)=>{try{const a=_e(Re(oe,Se)),r=new Date,i={title:t.title,description:t.description,type:t.type,visibility:t.visibility,organizer:s,dateTime:t.dateTime,duration:t.duration,location:{name:t.location.name,address:t.location.address,...t.location.coordinates&&{coordinates:t.location.coordinates}},...t.capacity&&{capacity:t.capacity},images:[],bringList:{enabled:t.bringList.enabled,items:t.bringList.items.map((n,l)=>({id:`item_${l}`,item:n.item,quantity:n.quantity,fulfilled:!1}))},attendees:{},waitlist:[],status:"published",createdAt:r,updatedAt:r};return await _s(a,{...i,dateTime:$e(i.dateTime),createdAt:$e(i.createdAt),updatedAt:$e(i.updatedAt)}),a.id}catch(a){throw console.error("Error creating event:",a),new Error("Failed to create event")}},ol=async(s,t)=>{try{const a={...t,updatedAt:new Date};t.dateTime&&(a.dateTime=$e(t.dateTime)),a.updatedAt=$e(a.updatedAt),await Ke(_e(oe,Se,s),a)}catch(a){throw console.error("Error updating event:",a),new Error("Failed to update event")}},Gs=async(s={},t=20,a)=>{var r,i;try{console.log("🔍 Searching events with filters:",s);const n=s.status&&s.status.length>0||s.visibility&&s.visibility.length>0||s.type&&s.type.length>0;if(console.log("🔍 hasComplexFilters:",n,"filters:",s),!n){console.log("🔍 No complex filters, using simple query");const l=me(Re(oe,Se),He(t*2)),o=await dt(l);let c=[];o.forEach(f=>{const h=f.data();c.push({id:f.id,title:h.title,type:h.type,visibility:h.visibility,organizer:h.organizer,dateTime:Fe(h.dateTime).toISOString(),location:h.location,capacity:h.capacity,attendeeCount:Object.keys(h.attendees||{}).length,coverImage:h.coverImage,status:h.status})}),s.location&&s.location.trim()&&(console.log("🔍 Filtering by location:",s.location),c=c.filter(f=>{var h,p,v,L;return((p=(h=f.location)==null?void 0:h.name)==null?void 0:p.toLowerCase().includes(s.location.toLowerCase()))||((L=(v=f.location)==null?void 0:v.address)==null?void 0:L.toLowerCase().includes(s.location.toLowerCase()))})),c.sort((f,h)=>new Date(h.dateTime).getTime()-new Date(f.dateTime).getTime());const d=a?c.findIndex(f=>f.id===a.id)+1:0,u=c.slice(d,d+t);return console.log(`✅ Found ${u.length} events (simple query)`),{events:u,totalCount:c.length,hasMore:d+t<c.length}}try{let l=me(Re(oe,Se));s.status&&s.status.length>0&&(l=me(l,ut("status","in",s.status))),s.visibility&&s.visibility.length>0&&(l=me(l,ut("visibility","in",s.visibility))),s.type&&s.type.length>0&&(l=me(l,ut("type","in",s.type))),l=me(l,ds("dateTime","asc")),l=me(l,He(t));const o=await dt(l),c=[];return o.forEach(d=>{const u=d.data();c.push({id:d.id,title:u.title,type:u.type,visibility:u.visibility,organizer:u.organizer,dateTime:Fe(u.dateTime).toISOString(),location:u.location,capacity:u.capacity,attendeeCount:Object.keys(u.attendees||{}).length,coverImage:u.coverImage,status:u.status})}),console.log(`✅ Found ${c.length} events (optimized query)`),{events:c,totalCount:c.length,hasMore:o.size===t}}catch(l){if((r=l.message)!=null&&r.includes("index")){console.warn("⚠️ Firestore index not ready, using client-side filtering");const o=me(Re(oe,Se),He(100)),c=await dt(o);let d=[];c.forEach(h=>{const p=h.data();console.log("📄 Raw event data:",{id:h.id,status:p.status,title:p.title}),d.push({id:h.id,title:p.title,type:p.type,visibility:p.visibility,organizer:p.organizer,dateTime:Fe(p.dateTime).toISOString(),location:p.location,capacity:p.capacity,attendeeCount:Object.keys(p.attendees||{}).length,coverImage:p.coverImage,status:p.status})}),console.log("🎯 Applying client-side filters:",s),console.log("📊 Events before filtering:",d.length,d.map(h=>({id:h.id,status:h.status,visibility:h.visibility,type:h.type}))),s.status&&s.status.length>0&&(console.log("🔍 Filtering by status:",s.status),d=d.filter(h=>{const p=s.status.includes(h.status);return console.log(`Event ${h.id}: status=${h.status}, matches=${p}`),p})),s.visibility&&s.visibility.length>0&&(console.log("🔍 Filtering by visibility:",s.visibility),d=d.filter(h=>s.visibility.includes(h.visibility))),s.type&&s.type.length>0&&(console.log("🔍 Filtering by type:",s.type),d=d.filter(h=>s.type.includes(h.type))),console.log("📊 Events after filtering:",d.length),d.sort((h,p)=>new Date(h.dateTime).getTime()-new Date(p.dateTime).getTime());const u=a?d.findIndex(h=>h.id===a.id)+1:0,f=d.slice(u,u+t);return console.log(`✅ Found ${f.length} events (client-side filtered)`),{events:f,totalCount:d.length,hasMore:u+t<d.length}}else throw l}}catch(n){throw console.error("❌ Error searching events:",n),(i=n.message)!=null&&i.includes("index")?(console.warn("⚠️ Database index being created. Please wait a few minutes and try again."),new Error("Database is being optimized. Please wait a few minutes and try again.")):new Error("Failed to search events. Please try again.")}},cl=async(s,t,a)=>{try{const r=await It(s);if(!r)throw new Error("Event not found");const i=Object.keys(r.attendees).length,n=r.attendees[t];if(a.status==="going"&&!n&&r.capacity&&i>=r.capacity){const d=[...r.waitlist];return d.includes(t)||d.push(t),await Ke(_e(oe,Se,s),{waitlist:d,updatedAt:$e(new Date)}),{success:!1,message:"Event is at capacity. You have been added to the waitlist.",waitlistPosition:d.length}}const l={status:a.status,guestCount:a.guestCount||0,rsvpAt:new Date,bringItems:a.bringItems||[]},o={...r.attendees},c=[...r.waitlist];if(o[t]=l,a.status==="going"){const d=c.indexOf(t);d>-1&&c.splice(d,1)}else if(a.status==="not_going"){const d=c.indexOf(t);d>-1&&c.splice(d,1)}return await Ke(_e(oe,Se,s),{attendees:{...o,[t]:{...l,rsvpAt:$e(l.rsvpAt)}},waitlist:c,updatedAt:$e(new Date)}),{success:!0,message:`RSVP ${a.status} recorded successfully.`,attendeeInfo:l}}catch(r){throw console.error("Error RSVPing to event:",r),new Error("Failed to RSVP to event")}},dl=async(s,t,a)=>{try{const r=await It(s);if(!r||!r.bringList.enabled)throw new Error("Event or bring list not found");const i=r.bringList.items.find(l=>l.id===t);if(!i)throw new Error("Item not found");if(i.assignedTo&&i.assignedTo!==a)throw new Error("Item already claimed by another user");const n=r.bringList.items.map(l=>l.id===t?{...l,assignedTo:a}:l);await Ke(_e(oe,Se,s),{"bringList.items":n,updatedAt:$e(new Date)})}catch(r){throw console.error("Error claiming bring list item:",r),new Error("Failed to claim item")}},pr=async(s,t,a=!1)=>{try{console.log("📤 Starting image upload for event:",s,"isCoverImage:",a);const r=Yr(ii,`events/${s}/${t.name}`),i=await Hr(r,t),n=await Gr(i.ref);if(console.log("✅ Image uploaded to storage, URL:",n),a)console.log("🖼️ Updating event document with cover image"),await Ke(_e(oe,Se,s),{coverImage:n,updatedAt:$e(new Date)}),console.log("✅ Cover image updated in event document");else{const l=await It(s);if(l){const o=[...l.images,n];await Ke(_e(oe,Se,s),{images:o,updatedAt:$e(new Date)}),console.log("✅ Additional image added to event document")}}return n}catch(r){throw console.error("❌ Error uploading event image:",r),new Error("Failed to upload image")}},ul=async s=>{var t;try{try{const a=me(Re(oe,Se),ut("organizer","==",s),ds("dateTime","desc")),r=await dt(a),i=[];return r.forEach(n=>{const l=n.data();i.push({id:n.id,title:l.title,type:l.type,visibility:l.visibility,organizer:l.organizer,dateTime:Fe(l.dateTime).toISOString(),location:l.location,capacity:l.capacity,attendeeCount:Object.keys(l.attendees||{}).length,coverImage:l.coverImage,status:l.status})}),console.log(`✅ Found ${i.length} user events (optimized query)`),i}catch(a){if((t=a.message)!=null&&t.includes("index")){console.warn("⚠️ Firestore index not ready for user events, using client-side filtering");const r=me(Re(oe,Se),He(100)),i=await dt(r);let n=[];return i.forEach(l=>{const o=l.data();o.organizer===s&&n.push({id:l.id,title:o.title,type:o.type,visibility:o.visibility,organizer:o.organizer,dateTime:Fe(o.dateTime).toISOString(),location:o.location,capacity:o.capacity,attendeeCount:Object.keys(o.attendees||{}).length,coverImage:o.coverImage,status:o.status})}),n.sort((l,o)=>new Date(o.dateTime).getTime()-new Date(l.dateTime).getTime()),console.log(`✅ Found ${n.length} user events (client-side filtered)`),n}else throw a}}catch(a){throw console.error("Error getting user events:",a),new Error("Failed to get user events")}},ml=(s,t)=>{const a=_e(oe,Se,s);return Rt(a,r=>{if(r.exists()){const i=r.data(),n={...i,id:r.id,dateTime:Fe(i.dateTime),createdAt:Fe(i.createdAt),updatedAt:Fe(i.updatedAt),attendees:Object.fromEntries(Object.entries(i.attendees||{}).map(([l,o])=>[l,{...o,rsvpAt:Fe(o.rsvpAt)}]))};t(n)}else t(null)},r=>{console.error("Event listener error:",r),t(null)})},hl=async s=>{try{await Ke(_e(oe,Se,s),{status:"cancelled",updatedAt:$e(new Date)})}catch(t){throw console.error("Error cancelling event:",t),new Error("Failed to cancel event")}},at="users",Fa=s=>s!=null&&s.toDate?s.toDate().toISOString():s instanceof Date?s.toISOString():typeof s=="string"?s:new Date().toISOString(),Ct=async s=>{try{const t=_e(oe,at,s),a=await Dt(t);if(a.exists()){const r=a.data();return{...r,createdAt:Fa(r.createdAt),updatedAt:Fa(r.updatedAt)}}return null}catch(t){throw console.error("Error getting user profile:",t),new Error("Failed to get user profile")}},yr=async(s,t)=>{try{const a=_e(oe,at,s),r={...t,updatedAt:new Date};await Ke(a,r)}catch(a){throw console.error("Error updating user profile:",a),new Error("Failed to update user profile")}},cs=async(s={},t=20,a)=>{var r,i;try{console.log("🔍 Searching users with filters:",s);try{let n=me(Re(oe,at));s.status&&(n=me(n,ut("status","==",s.status))),s.role&&(n=me(n,ut("role","==",s.role))),n=me(n,ds("displayName","asc")),n=me(n,He(t));const l=await dt(n),o=[];return l.forEach(c=>{const d=c.data();o.push({uid:d.uid,displayName:d.displayName,profileImage:d.profileImage,interests:d.interests,defaultAvailability:d.defaultAvailability})}),console.log(`✅ Found ${o.length} users (optimized query)`),{users:o,hasMore:l.size===t,lastDoc:l.docs[l.docs.length-1]||void 0}}catch(n){if((r=n.message)!=null&&r.includes("index")){console.warn("⚠️ Firestore index not ready, using client-side filtering for users");const l=me(Re(oe,at),He(100)),o=await dt(l);let c=[];o.forEach(f=>{const h=f.data();c.push({uid:h.uid,displayName:h.displayName,profileImage:h.profileImage,interests:h.interests,defaultAvailability:h.defaultAvailability})}),s.status&&(c=c.filter(f=>!0)),s.role&&(c=c.filter(f=>!0)),c.sort((f,h)=>f.displayName.localeCompare(h.displayName));const d=a?c.findIndex(f=>f.uid===a.id)+1:0,u=c.slice(d,d+t);return console.log(`✅ Found ${u.length} users (client-side filtered)`),{users:u,hasMore:d+t<c.length,lastDoc:u.length>0?{id:u[u.length-1].uid}:void 0}}else throw n}}catch(n){throw console.error("❌ Error searching users:",n),(i=n.message)!=null&&i.includes("index")?(console.warn("⚠️ Database index being created. Using simplified user search."),new Error("Database is being optimized. Some features may be limited temporarily.")):new Error("Failed to search users. Please try again.")}},Da=async s=>{try{await yr(s,{status:"approved"})}catch(t){throw console.error("Error approving user:",t),new Error("Failed to approve user")}},xl=async s=>{try{await yr(s,{status:"suspended"})}catch(t){throw console.error("Error suspending user:",t),new Error("Failed to suspend user")}},br=async()=>{try{const s=me(Re(oe,at)),t=await dt(s),a={pending:0,approved:0,suspended:0};return t.forEach(r=>{const i=r.data();a[i.status]=(a[i.status]||0)+1}),a}catch(s){throw console.error("Error getting user count by status:",s),new Error("Failed to get user statistics")}},fl=(s={},t)=>{if(s.status||s.role)try{let r=me(Re(oe,at));return s.status&&(r=me(r,ut("status","==",s.status))),s.role&&(r=me(r,ut("role","==",s.role))),r=me(r,ds("displayName","asc"),He(100)),Rt(r,i=>{const n=[];i.forEach(l=>{const o=l.data();n.push({uid:o.uid,displayName:o.displayName,profileImage:o.profileImage,interests:o.interests,defaultAvailability:o.defaultAvailability})}),t(n)},i=>{var n;if(console.error("Users list listener error:",i),(n=i.message)!=null&&n.includes("index")){console.warn("⚠️ Falling back to simple user listener (no real-time updates)");const l=me(Re(oe,at),He(100));return Rt(l,c=>{const d=[];c.forEach(u=>{const f=u.data();(!s.status||f.status===s.status)&&(!s.role||f.role===s.role)&&d.push({uid:f.uid,displayName:f.displayName,profileImage:f.profileImage,interests:f.interests,defaultAvailability:f.defaultAvailability})}),d.sort((u,f)=>u.displayName.localeCompare(f.displayName)),t(d)},c=>{console.error("Fallback users listener error:",c),t([])})}else return t([]),()=>{}})}catch(r){console.error("Error setting up complex user listener:",r);const i=me(Re(oe,at),He(100));return Rt(i,n=>{const l=[];n.forEach(o=>{const c=o.data();(!s.status||c.status===s.status)&&(!s.role||c.role===s.role)&&l.push({uid:c.uid,displayName:c.displayName,profileImage:c.profileImage,interests:c.interests,defaultAvailability:c.defaultAvailability})}),l.sort((o,c)=>o.displayName.localeCompare(c.displayName)),t(l)},n=>{console.error("Fallback users listener error:",n),t([])})}else{const r=me(Re(oe,at),He(100));return Rt(r,i=>{const n=[];i.forEach(l=>{const o=l.data();n.push({uid:o.uid,displayName:o.displayName,profileImage:o.profileImage,interests:o.interests,defaultAvailability:o.defaultAvailability})}),n.sort((l,o)=>l.displayName.localeCompare(o.displayName)),t(n)},i=>{console.error("Simple users listener error:",i),t([])})}},gl=()=>{const{user:s,userProfile:t,loading:a}=ve(),r=Ye(),[i,n]=y.useState([]),[l,o]=y.useState([]),[c,d]=y.useState(!0),[u,f]=y.useState(!0),[h,p]=y.useState({totalEvents:0,totalMembers:0,myEvents:0});y.useEffect(()=>{s&&!a&&v()},[s,a]);const v=async()=>{try{d(!0);const C=await Gs({status:["published"]},3);n(C.events),f(!0);const S=await cs({status:"approved"},5);o(S.users);let F=[];if(s!=null&&s.uid)try{F=await ul(s.uid)}catch(P){console.warn("Could not load user events:",P)}let w=0;if((s==null?void 0:s.role)==="admin")try{const P=await br();w=P.approved+P.pending+P.suspended}catch(P){console.warn("Could not load admin statistics:",P)}p({totalEvents:C.totalCount,totalMembers:w,myEvents:F.length})}catch(C){console.error("Error loading dashboard data:",C),Z.error("Failed to load dashboard data")}finally{d(!1),f(!1)}},L=C=>C?(C.toDate?C.toDate():new Date(C)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"TBD",N=()=>{const C=new Date().getHours();return C<12?"Good morning":C<17?"Good afternoon":"Good evening"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[N(),", ",(t==null?void 0:t.displayName)||(s==null?void 0:s.displayName)||"Member","! 👋"]}),e.jsx("p",{className:"text-gray-600",children:"Welcome to your LCC Assemble dashboard"})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsx(R,{onClick:()=>r("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"📅 Create Event"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"📊"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.totalEvents}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"👥"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.totalMembers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Community Members"})]})]})}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"📅"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.myEvents}),e.jsx("p",{className:"text-sm text-gray-600",children:"My Events"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{onClick:()=>r("/events/create"),className:"w-full justify-start bg-orange-500 hover:bg-orange-600",children:"📅 Create New Event"}),e.jsx(R,{variant:"outline",onClick:()=>r("/events"),className:"w-full justify-start",children:"📋 Browse All Events"}),e.jsx(R,{variant:"outline",onClick:()=>r("/members"),className:"w-full justify-start",children:"👥 Find Members"}),e.jsx(R,{variant:"outline",onClick:()=>r("/profile"),className:"w-full justify-start",children:"⚙️ Update Profile"})]})]}),e.jsxs(Y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Events"}),e.jsx(Ve,{to:"/events",className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all →"})]}),c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(We,{})}):i.length>0?e.jsx("div",{className:"space-y-3",children:i.slice(0,3).map(C=>{var S;return e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>r(`/events/${C.id}`),children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:C.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:L(C.dateTime)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((S=C.location)==null?void 0:S.name)||"Location TBD"})]},C.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-3",children:"No upcoming events"}),e.jsx(R,{size:"sm",onClick:()=>r("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"Create First Event"})]})]}),e.jsxs(Y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Members"}),e.jsx(Ve,{to:"/members",className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all →"})]}),u?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(We,{})}):l.length>0?e.jsx("div",{className:"space-y-3",children:l.slice(0,4).map(C=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",onClick:()=>r(`/members/${C.uid}`),children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:C.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:C.displayName}),e.jsx("p",{className:"text-xs text-gray-500",children:C.interests.length>0?C.interests[0]:"New member"})]})]},C.uid))}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No recent members"})})]})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Community Overview"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:h.totalEvents}),e.jsx("div",{className:"text-sm text-gray-600",children:"Events Created"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.totalMembers}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Members"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.myEvents}),e.jsx("div",{className:"text-sm text-gray-600",children:"Your Events"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Events This Month"})]})]})]})]})},pl=()=>{const s=Ye(),{user:t}=ve(),[a,r]=y.useState([]),[i,n]=y.useState(!0),[l,o]=y.useState(""),[c,d]=y.useState("all"),[u,f]=y.useState("all"),[h,p]=y.useState("grid"),[v,L]=y.useState(!1);y.useEffect(()=>{f("published")},[t]);const N=[{value:"all",label:"All Types"},{value:"birthday",label:"Birthday"},{value:"potluck",label:"Potluck"},{value:"farewell",label:"Farewell"},{value:"celebration",label:"Celebration"},{value:"other",label:"Other"}];y.useEffect(()=>{C()},[l,c,u,t]);const C=async()=>{try{n(!0),console.log("🔍 Loading events with filters:",{selectedStatus:u,selectedType:c,searchQuery:l});const b={};u!=="all"?(b.status=[u],console.log("📋 Applying status filter:",b.status)):console.log("📋 No status filter applied (showing all events)"),c!=="all"&&(b.type=[c]),l.trim()&&(b.location=l),console.log("🔍 Final filters:",b);const E=await Gs(b,20);console.log("✅ Search result:",{eventsCount:E.events.length,hasMore:E.hasMore,events:E.events}),r(E.events),L(E.hasMore)}catch(b){console.error("❌ Error loading events:",b),Z.error("Failed to load events")}finally{n(!1)}},S=b=>{const E=new Date(b),ie=new Date,D=E.getTime()-ie.getTime(),k=Math.ceil(D/(1e3*60*60*24));return k===0?"Today":k===1?"Tomorrow":k<7?`In ${k} days`:E.toLocaleDateString("en-US",{month:"short",day:"numeric",year:E.getFullYear()!==ie.getFullYear()?"numeric":void 0})},F=b=>{const E=b.capacity||0,ie=b.attendeeCount;return E===0?null:ie>=E?"Full":ie>=E*.8?"Almost Full":`${ie}/${E} attending`},w=({event:b})=>e.jsx("div",{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>s(`/events/${b.id}`),children:e.jsxs(Y,{className:"h-full",children:[b.coverImage&&e.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[e.jsx("img",{src:b.coverImage,alt:b.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.visibility==="public"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:b.visibility})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:`text-lg font-semibold line-clamp-2 ${b.status==="cancelled"?"text-gray-500 line-through":"text-gray-900"}`,children:b.title}),e.jsxs("div",{className:"flex items-center space-x-2 ml-2 flex-shrink-0",children:[b.status==="cancelled"&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"CANCELLED"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.type==="birthday"?"bg-pink-100 text-pink-800":b.type==="potluck"?"bg-orange-100 text-orange-800":b.type==="farewell"?"bg-blue-100 text-blue-800":b.type==="celebration"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.type})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📅"}),e.jsx("span",{children:S(b.dateTime)})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📍"}),e.jsx("span",{className:"truncate",children:b.location.name})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"👥"}),e.jsx("span",{children:F(b)||`${b.attendeeCount} attending`})]}),b.status==="published"&&e.jsx(R,{size:"sm",variant:"outline",className:"text-xs",children:"View Details"})]})]})]})]})}),P=({event:b})=>e.jsx("div",{className:"cursor-pointer",onClick:()=>s(`/events/${b.id}`),children:e.jsx(Y,{className:"p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[b.coverImage?e.jsx("img",{src:b.coverImage,alt:b.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}):e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center",children:"📅"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h3",{className:`text-lg font-semibold truncate ${b.status==="cancelled"?"text-gray-500 line-through":"text-gray-900"}`,children:b.title}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[b.status==="cancelled"&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"CANCELLED"}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.type==="birthday"?"bg-pink-100 text-pink-800":b.type==="potluck"?"bg-orange-100 text-orange-800":b.type==="farewell"?"bg-blue-100 text-blue-800":b.type==="celebration"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:b.type}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.visibility==="public"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:b.visibility})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["📅 ",S(b.dateTime)]}),e.jsxs("span",{children:["📍 ",b.location.name]}),e.jsxs("span",{children:["👥 ",F(b)||`${b.attendeeCount} attending`]})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(R,{size:"sm",variant:"outline",children:"View Details"})})]})})});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events"}),e.jsx("p",{className:"text-gray-600",children:"Discover and join community events"})]}),e.jsx(R,{onClick:()=>s("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"📅 Create Event"})]}),e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{type:"text",placeholder:"Search events by location...",value:l,onChange:b=>o(b.target.value),className:"w-full"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("select",{value:c,onChange:b=>d(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:N.map(b=>e.jsx("option",{value:b.value,children:b.label},b.value))}),e.jsxs("select",{value:u,onChange:b=>f(b.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"published",children:"Published Events"}),e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"cancelled",children:"Cancelled Events"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{size:"sm",variant:h==="grid"?"primary":"outline",onClick:()=>p("grid"),children:"Grid"}),e.jsx(R,{size:"sm",variant:h==="list"?"primary":"outline",onClick:()=>p("list"),children:"List"})]})]})]})}),i?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(We,{})}):a.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("p",{className:"text-gray-600",children:["Showing ",a.length," event",a.length!==1?"s":"",v&&" (more available)"]})}),e.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:a.map(b=>h==="grid"?e.jsx(w,{event:b},b.id):e.jsx(P,{event:b},b.id))}),v&&e.jsx("div",{className:"text-center py-8",children:e.jsx(R,{variant:"outline",onClick:C,children:"Load More Events"})})]}):e.jsx(Y,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📅"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:l||c!=="all"?"Try adjusting your filters or search terms.":"Be the first to create an event for the community!"}),e.jsx(R,{onClick:()=>s("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"Create First Event"})]})})]})},yl=({event:s,currentUserId:t,onRSVP:a,onCancel:r})=>{const[i,n]=y.useState(!1),[l,o]=y.useState(null),[c,d]=y.useState("going"),[u,f]=y.useState(0),h=s.attendees[t],p=!!h,v=s.capacity&&Object.keys(s.attendees).length>=s.capacity,L=p&&h.status==="going"&&v,N=b=>{d(b),b!=="going"&&f(0)},C=async b=>{b.preventDefault();try{n(!0),o(null),await a(c,u)}catch(E){console.error("RSVP error:",E),o(E instanceof Error?E.message:"Failed to update RSVP")}finally{n(!1)}},S=()=>Object.values(s.attendees).reduce((b,E)=>E.status==="going"?b+1+E.guestCount:b,0),F=b=>{switch(b){case"going":return"text-green-600 bg-green-100";case"maybe":return"text-yellow-600 bg-yellow-100";case"not_going":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},w=S(),P=s.capacity?Math.max(0,s.capacity-w):null;return e.jsx(Y,{className:"w-full max-w-md mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"RSVP to Event"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.title})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Attendees:"}),e.jsx("span",{className:"text-sm text-gray-900",children:w})]}),s.capacity&&e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Capacity:"}),e.jsx("span",{className:"text-sm text-gray-900",children:s.capacity})]}),P!==null&&P>0&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Spots Left:"}),e.jsx("span",{className:"text-sm text-green-600",children:P})]}),P===0&&!L&&e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Event is full"})})]}),p&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Your current response:"}),e.jsxs("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ml-2 ${F(h.status)}`,children:[h.status==="going"&&"Going",h.status==="maybe"&&"Maybe",h.status==="not_going"&&"Not Going",L&&" (Waitlist)"]})]}),h.guestCount>0&&e.jsxs("p",{className:"text-center text-sm text-gray-600 mt-2",children:["+",h.guestCount," guest",h.guestCount!==1?"s":""]})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l&&e.jsx(De,{type:"error",message:l}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Your Response"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"rsvp-status",value:"going",checked:c==="going",onChange:()=>N("going"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Going"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"rsvp-status",value:"maybe",checked:c==="maybe",onChange:()=>N("maybe"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Maybe"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"rsvp-status",value:"not_going",checked:c==="not_going",onChange:()=>N("not_going"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Not Going"})]})]})]}),c==="going"&&e.jsx(K,{type:"number",label:"Number of Additional Guests",value:u.toString(),onChange:b=>f(Math.max(0,Number(b.target.value))),placeholder:"0",min:"0",max:"10",disabled:i,helperText:"How many guests are you bringing?"}),c==="going"&&v&&!L&&e.jsx(De,{type:"warning",message:"This event is currently full. You'll be added to the waitlist."}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[r&&e.jsx(R,{type:"button",variant:"outline",onClick:r,disabled:i,className:"flex-1",children:"Cancel"}),e.jsx(R,{type:"submit",disabled:i,isLoading:i,className:"flex-1",children:i?"Updating...":p?"Update RSVP":"Send RSVP"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Event Details"}),e.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Date:"})," ",new Date(s.dateTime).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Time:"})," ",new Date(s.dateTime).toLocaleTimeString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Location:"})," ",s.location.name]}),s.bringList.enabled&&e.jsxs("p",{children:[e.jsx("strong",{children:"Bring List:"})," Available"]})]})]})]})})},bl=({event:s,onRSVPUpdate:t})=>{const{user:a}=ve(),[r,i]=y.useState(!1),[n,l]=y.useState(!1);if(!a)return e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to RSVP to this event."}),e.jsx(R,{onClick:()=>window.location.href="/login",children:"Log In"})]})});const o=a.uid,c=s.attendees[o],d=!!c,u=new Date(s.dateTime)<new Date,f=async(S,F)=>{try{l(!0),await cl(s.id,o,{status:S,guestCount:F}),Z.success("RSVP updated successfully!"),i(!1),t==null||t()}catch(w){throw console.error("RSVP error:",w),Z.error(w.message||"Failed to update RSVP"),w}finally{l(!1)}},h=()=>{if(!d)return"Not responded yet";switch(c.status){case"going":return"Going";case"maybe":return"Maybe";case"not_going":return"Not going";default:return"Unknown"}},p=()=>{if(!d)return"bg-gray-100 text-gray-800";switch(c.status){case"going":return"bg-green-100 text-green-800";case"maybe":return"bg-yellow-100 text-yellow-800";case"not_going":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=Object.values(s.attendees).reduce((S,F)=>F.status==="going"?S+1+F.guestCount:S,0),N=s.capacity&&L>=s.capacity,C=d&&c.status==="going"&&N;return r?e.jsx(yl,{event:s,currentUserId:o,onRSVP:f,onCancel:()=>i(!1)}):e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your RSVP"}),d&&!u&&e.jsx(R,{variant:"outline",size:"sm",onClick:()=>i(!0),disabled:n,children:"Change Response"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${p()}`,children:[h(),C&&" (Waitlist)"]})]}),d&&c.guestCount>0&&e.jsxs("span",{className:"text-sm text-gray-600",children:["+",c.guestCount," guest",c.guestCount!==1?"s":""]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Attendees:"}),e.jsx("span",{className:"ml-2 font-medium",children:L})]}),s.capacity&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsx("span",{className:"ml-2 font-medium",children:s.capacity})]})]}),s.capacity&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(L/s.capacity*100,100)}%`}})}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:s.capacity-L>0?`${s.capacity-L} spots left`:"Event is full"})]})]}),!u&&e.jsx("div",{className:"pt-2",children:d?e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["RSVP last updated: ",new Date(c.rsvpAt).toLocaleDateString()]})}):e.jsx(R,{onClick:()=>i(!0),className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:"RSVP to Event"})}),u&&e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:"This event has already occurred"})})]})})},vl=({event:s,onItemClaimed:t})=>{var d;const{user:a}=ve(),[r,i]=y.useState(null);if(!s.bringList.enabled||!s.bringList.items.length)return null;const n=async u=>{if(!a){Z.error("Please log in to claim items");return}try{i(u),await dl(s.id,u,a.uid),Z.success("Item claimed successfully!"),t==null||t()}catch(f){console.error("Error claiming item:",f),Z.error(f.message||"Failed to claim item")}finally{i(null)}},l=u=>u.assignedTo?u.assignedTo===(a==null?void 0:a.uid)?{status:"claimed-by-me",text:"Claimed by you",color:"bg-green-100 text-green-800"}:{status:"claimed",text:"Claimed",color:"bg-blue-100 text-blue-800"}:{status:"available",text:"Available",color:"bg-gray-100 text-gray-800"},o=new Date(s.dateTime)<new Date,c=a?((d=s.attendees[a.uid])==null?void 0:d.status)==="going":!1;return e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"What to Bring"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.bringList.items.length," item",s.bringList.items.length!==1?"s":""]})]}),!c&&!o&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsx("p",{className:"text-sm text-yellow-800",children:'RSVP as "Going" to claim items from the bring list.'})}),e.jsx("div",{className:"space-y-3",children:s.bringList.items.map(u=>{const f=l(u),h=!u.assignedTo&&!o&&c&&f.status==="available";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:u.item}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.color}`,children:f.text})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Quantity needed: ",u.quantity,u.fulfilled&&e.jsx("span",{className:"ml-2 text-green-600",children:"✓ Fulfilled"})]}),u.assignedTo&&u.assignedTo!==(a==null?void 0:a.uid)&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Someone else has claimed this item"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[h&&e.jsx(R,{size:"sm",onClick:()=>n(u.id),disabled:r===u.id,isLoading:r===u.id,className:"bg-orange-500 hover:bg-orange-600",children:r===u.id?"Claiming...":"Claim"}),f.status==="claimed-by-me"&&!o&&e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"✓ Yours"})]})]},u.id)})}),s.bringList.items.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"No items on the bring list yet."})}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"How it works:"}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[e.jsx("li",{children:'• RSVP as "Going" to access the bring list'}),e.jsx("li",{children:"• Claim items you can bring to the event"}),e.jsx("li",{children:"• Mark items as fulfilled when you bring them"}),e.jsx("li",{children:"• Help make the event successful for everyone!"})]})]})]})})},Qs=({address:s,locationName:t,coordinates:a,height:r="200px",className:i=""})=>{const n=()=>{const l=(a==null?void 0:a.lat)||43.6532,o=(a==null?void 0:a.lng)||-79.3832;window.open(`https://www.openstreetmap.org/?mlat=${l}&mlon=${o}&zoom=15`,"_blank")};return e.jsx("div",{className:`rounded-lg overflow-hidden border border-gray-200 ${i}`,style:{height:r},children:e.jsxs("div",{className:"relative w-full h-full bg-gray-100",children:[e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-green-100 to-blue-100 flex items-center justify-center cursor-pointer hover:from-green-200 hover:to-blue-200 transition-colors",onClick:n,children:e.jsxs("div",{className:"text-center p-4",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📍"}),e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-1",children:t||"Event Location"}),e.jsx("div",{className:"text-xs text-gray-600 max-w-xs",children:s}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Click to view on OpenStreetMap"})]})}),a&&e.jsxs("div",{className:"absolute top-2 right-2 bg-white bg-opacity-90 px-2 py-1 rounded text-xs text-gray-600",children:[a.lat.toFixed(4),", ",a.lng.toFixed(4)]})]})})},jl=()=>{const{eventId:s}=Os(),{user:t}=ve(),a=Ye(),[r,i]=y.useState(null),[n,l]=y.useState(null),[o,c]=y.useState(!0);y.useEffect(()=>{s&&d()},[s]);const d=async()=>{if(s)try{c(!0),console.log("🔍 Loading event details for ID:",s);const p=await It(s);if(console.log("✅ Event data loaded:",{id:p==null?void 0:p.id,title:p==null?void 0:p.title,coverImage:p==null?void 0:p.coverImage,hasCoverImage:!!(p!=null&&p.coverImage),status:p==null?void 0:p.status}),!p){console.warn("❌ Event not found for ID:",s),Z.error("Event not found"),a("/events");return}i(p);try{const N=await Ct(p.organizer);l(N)}catch(N){console.warn("Could not load organizer profile:",N),l({uid:p.organizer,displayName:"Unknown Organizer",email:"",interests:[],dietaryPreferences:[],privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"approved",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}const v=ml(s,N=>{N&&i(N)}),L=setTimeout(async()=>{try{console.log("🔄 Fallback check: Re-fetching event data");const N=await It(s);N&&N.coverImage!==p.coverImage&&i(N)}catch(N){console.warn("Fallback check failed:",N)}},3e3);return()=>{v(),clearTimeout(L)}}catch(p){console.error("❌ Error loading event details:",p);const v=p;console.error("❌ Error details:",{message:v==null?void 0:v.message,code:v==null?void 0:v.code,stack:v==null?void 0:v.stack}),Z.error("Failed to load event details"),a("/events");return}finally{c(!1)}},u=p=>p.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"});if(o)return e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(We,{})});if(!r)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),e.jsx(R,{onClick:()=>a("/events"),children:"Back to Events"})]});const f=(t==null?void 0:t.uid)===r.organizer,h=new Date(r.dateTime)<new Date;return e.jsxs("div",{className:"space-y-6",children:[r.status==="cancelled"&&e.jsx(Y,{className:"p-4 bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"⚠️"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-800",children:"Event Cancelled"}),e.jsx("p",{className:"text-red-700",children:"This event has been cancelled by the organizer. RSVPs and event details are preserved for transparency."})]})]})}),e.jsx("div",{className:"relative",children:(console.log("🎨 Rendering event header, coverImage:",r.coverImage,"condition:",!!r.coverImage),r.coverImage?e.jsxs("div",{className:"h-64 md:h-80 bg-gray-200 relative overflow-hidden rounded-lg",children:[e.jsx("img",{src:r.coverImage,alt:r.title,className:"w-full h-full object-cover",onLoad:()=>console.log("🖼️ Cover image loaded successfully"),onError:p=>console.log("❌ Cover image failed to load:",p)}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${r.type==="birthday"?"bg-pink-500":r.type==="potluck"?"bg-orange-500":r.type==="farewell"?"bg-blue-500":r.type==="celebration"?"bg-green-500":"bg-gray-500"}`,children:r.type}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${r.visibility==="public"?"bg-green-500":"bg-blue-500"}`,children:r.visibility}),r.status==="published"&&e.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-green-500",children:"Published"}),r.status==="cancelled"&&e.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-red-500",children:"CANCELLED"})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:r.title}),e.jsx("p",{className:"text-lg opacity-90",children:r.description})]})]}):e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-8 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-white bg-opacity-20",children:r.type}),e.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-white bg-opacity-20",children:r.visibility})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:r.title}),e.jsx("p",{className:"text-lg opacity-90",children:r.description})]}))}),!h&&e.jsx(bl,{event:r,onRSVPUpdate:()=>{d()}}),f&&e.jsx("div",{className:"flex justify-end",children:e.jsx(R,{variant:"outline",onClick:()=>a(`/events/${r.id}/edit`),children:"Edit Event"})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(Y,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"📅"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:u(r.dateTime)}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",r.duration," minutes"]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-2xl mr-3 mt-1",children:"📍"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:r.location.name}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:r.location.address}),e.jsx(Qs,{address:r.location.address,locationName:r.location.name,coordinates:r.location.coordinates,height:"200px",className:"border border-gray-200 rounded-lg"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:"👥"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[Object.keys(r.attendees).length," attending",r.capacity&&` / ${r.capacity} capacity`]}),r.capacity&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${Math.min(Object.keys(r.attendees).length/r.capacity*100,100)}%`}})})]})]})]})]}),e.jsx(vl,{event:r,onItemClaimed:()=>{d()}}),r.images&&r.images.length>0&&e.jsxs(Y,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Photos"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:r.images.map((p,v)=>e.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden",children:e.jsx("img",{src:p,alt:`Event photo ${v+1}`,className:"w-full h-full object-cover"})},v))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Organizer"}),n&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-medium text-orange-600",children:n.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.displayName}),e.jsx("p",{className:"text-sm text-gray-600",children:"Event Organizer"})]})]})]}),e.jsxs(Y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Attendees (",Object.keys(r.attendees).length,")"]}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(r.attendees).slice(0,5).map(([p,v])=>e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Attendee"}),e.jsxs("p",{className:"text-xs text-gray-600",children:[v.status," ",v.guestCount>0&&`+${v.guestCount}`]})]})]})},p)),Object.keys(r.attendees).length>5&&e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["+",Object.keys(r.attendees).length-5," more attendees"]})]})]}),r.waitlist.length>0&&e.jsxs(Y,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Waitlist (",r.waitlist.length,")"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"This event is at capacity. Join the waitlist for cancellations."})]})]})]})]})},vr=({selectedMembers:s,onMembersChange:t,maxSelections:a=50})=>{const{user:r}=ve(),[i,n]=y.useState(""),[l,o]=y.useState([]),[c,d]=y.useState(!1),[u,f]=y.useState("");y.useEffect(()=>{h()},[i]);const h=async()=>{try{d(!0),f("");let C=(await cs({status:"approved"},50)).users.filter(S=>S.uid!==(r==null?void 0:r.uid));if(i.trim()){const S=i.toLowerCase();C=C.filter(F=>F.displayName.toLowerCase().includes(S)||F.interests.some(w=>w.toLowerCase().includes(S)))}C=C.sort((S,F)=>S.displayName.localeCompare(F.displayName)),o(C)}catch(N){console.error("Error loading members:",N),f("Failed to load members")}finally{d(!1)}},p=N=>{if(s.includes(N))t(s.filter(C=>C!==N));else{if(s.length>=a){f(`You can select a maximum of ${a} members`);return}t([...s,N])}},v=N=>{t(s.filter(C=>C!==N))},L=N=>l.find(C=>C.uid===N);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx(K,{type:"text",placeholder:"Search members by name...",value:i,onChange:N=>n(N.target.value),className:"w-full"})}),s.length>0&&e.jsxs(Y,{className:"p-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Selected Members (",s.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(N=>{const C=L(N);return e.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-orange-100 text-orange-800",children:[e.jsx("span",{className:"mr-2",children:(C==null?void 0:C.displayName)||"Unknown Member"}),e.jsx("button",{onClick:()=>v(N),className:"text-orange-600 hover:text-orange-800","aria-label":`Remove ${(C==null?void 0:C.displayName)||"member"}`,children:"×"})]},N)})})]}),e.jsxs(Y,{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Available Members"}),u&&e.jsx("div",{className:"text-sm text-red-600 mb-3 p-2 bg-red-50 rounded",children:u}),c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(We,{})}):l.length>0?e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:l.map(N=>{const C=s.includes(N.uid);return e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-colors ${C?"bg-orange-50 border-orange-300":"bg-white border-gray-200 hover:bg-gray-50"}`,onClick:()=>p(N.uid),children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:N.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.displayName}),N.interests.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[N.interests.slice(0,2).join(", "),N.interests.length>2&&"..."]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C&&e.jsx("span",{className:"text-orange-600 text-sm font-medium",children:"Selected"}),e.jsx(R,{size:"sm",variant:C?"secondary":"outline",onClick:S=>{S.stopPropagation(),p(N.uid)},children:C?"Remove":"Add"})]})]},N.uid)})}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:i?"No members found matching your search.":"No members available."})]}),e.jsx("div",{className:"text-sm text-gray-600",children:s.length===0?e.jsx("p",{children:"No members selected. This will be a public event visible to all community members."}):e.jsxs("p",{children:[s.length," member",s.length!==1?"s":""," selected. Only these members will be able to see and RSVP to this private event."]})})]})},jt=[{id:"basic",title:"Basic Info",description:"Event title and description"},{id:"details",title:"Details",description:"Date, time, and location"},{id:"settings",title:"Settings",description:"Privacy, capacity, and invitations"},{id:"review",title:"Review",description:"Review and publish"}],Oa=[{value:"birthday",label:"Birthday",icon:"🎂"},{value:"potluck",label:"Potluck",icon:"🍽️"},{value:"farewell",label:"Farewell",icon:"👋"},{value:"celebration",label:"Celebration",icon:"🎉"},{value:"other",label:"Other",icon:"📅"}],Nl=()=>{const{user:s}=ve(),t=Ye(),[a,r]=y.useState(0),[i,n]=y.useState(!1),[l,o]=y.useState(""),[c,d]=y.useState(null),[u,f]=y.useState(""),[h,p]=y.useState([]),[v,L]=y.useState({title:"",description:"",type:"other",visibility:"public",dateTime:new Date,duration:120,location:{name:"",address:"",coordinates:void 0},capacity:void 0,coverImage:void 0,bringList:{enabled:!1,items:[]},invitedMembers:[]}),[N,C]=y.useState({}),S=A=>{const U={};switch(A){case 0:v.title.trim()||(U.title="Title is required"),v.description.trim()||(U.description="Description is required");break;case 1:v.location.name.trim()||(U.locationName="Location name is required"),v.location.address.trim()||(U.locationAddress="Address is required"),(!v.dateTime||v.dateTime<=new Date)&&(U.dateTime="Event must be in the future"),v.duration<30&&(U.duration="Duration must be at least 30 minutes");break;case 2:v.capacity&&v.capacity<1&&(U.capacity="Capacity must be at least 1"),v.visibility==="private"&&h.length===0&&(U.invites="Private events must have at least one invited member");break}return C(U),Object.keys(U).length===0},F=()=>{S(a)&&r(A=>Math.min(A+1,jt.length-1))},w=()=>{r(A=>Math.max(A-1,0))},P=(A,U)=>{L(M=>({...M,[A]:U})),N[A]&&C(M=>{const re={...M};return delete re[A],re})},b=(A,U)=>{L(M=>({...M,location:{...M.location,[A]:U}})),N[`location${A.charAt(0).toUpperCase()+A.slice(1)}`]&&C(M=>{const re={...M};return delete re[`location${A.charAt(0).toUpperCase()+A.slice(1)}`],re})},E=A=>{L(U=>({...U,bringList:{enabled:A,items:A?U.bringList.items:[]}}))},ie=()=>{L(A=>({...A,bringList:{...A.bringList,items:[...A.bringList.items,{item:"",quantity:1}]}}))},D=(A,U,M)=>{L(re=>({...re,bringList:{...re.bringList,items:re.bringList.items.map((Ce,Ae)=>Ae===A?{...Ce,[U]:M}:Ce)}}))},k=A=>{L(U=>({...U,bringList:{...U.bringList,items:U.bringList.items.filter((M,re)=>re!==A)}}))},T=A=>{var M;const U=(M=A.target.files)==null?void 0:M[0];if(U){if(!U.type.startsWith("image/")){Z.error("Please select an image file");return}if(U.size>5*1024*1024){Z.error("Image must be less than 5MB");return}d(U);const re=new FileReader;re.onload=Ce=>{var Ae;f((Ae=Ce.target)==null?void 0:Ae.result)},re.readAsDataURL(U)}},x=async()=>{if(!s){Z.error("You must be logged in to create an event");return}try{n(!0),o("");const A={...v,invitedMembers:v.visibility==="private"?h:[]};o("Creating event...");const U=await ll(s.uid,A);if(c)try{o("Uploading cover image...");const M=await pr(U,c,!0);o("Finalizing..."),await new Promise(re=>setTimeout(re,500))}catch(M){console.error("Failed to upload cover image:",M)}Z.success("Event created successfully!"),t(`/events/${U}`)}catch(A){console.error("Error creating event:",A),Z.error(A.message||"Failed to create event. Please try again.")}finally{n(!1),o("")}},_=()=>{var A,U;switch(a){case 0:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),e.jsx(K,{type:"text",placeholder:"e.g., Community Potluck Gathering",value:v.title,onChange:M=>P("title",M.target.value),error:N.title,maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-vertical",placeholder:"Describe your event...",value:v.description,onChange:M=>P("description",M.target.value),rows:4,maxLength:2e3}),N.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Event Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Oa.map(M=>e.jsx("button",{type:"button",onClick:()=>P("type",M.value),className:`p-3 border rounded-lg text-left hover:border-orange-300 transition-colors ${v.type===M.value?"border-orange-500 bg-orange-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:M.icon}),e.jsx("span",{className:"text-sm font-medium",children:M.label})]})},M.value))})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time *"}),e.jsx(K,{type:"datetime-local",min:new Date().toISOString().slice(0,16),value:v.dateTime.toISOString().slice(0,16),onChange:M=>P("dateTime",new Date(M.target.value)),error:N.dateTime}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Event must be scheduled for a future date and time"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes) *"}),e.jsx(K,{type:"number",min:"30",max:"1440",value:v.duration.toString(),onChange:M=>P("duration",parseInt(M.target.value)||120),error:N.duration})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name *"}),e.jsx(K,{type:"text",placeholder:"e.g., Community Center",value:v.location.name,onChange:M=>b("name",M.target.value),error:N.locationName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e.jsx(K,{type:"text",placeholder:"Full address for directions",value:v.location.address,onChange:M=>b("address",M.target.value),error:N.locationAddress})]}),v.location.address.trim()&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Preview"}),e.jsx(Qs,{address:v.location.address,locationName:v.location.name,height:"200px",className:"border border-gray-200 rounded-lg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This is a preview of the event location on the map"})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visibility"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"public",checked:v.visibility==="public",onChange:M=>P("visibility",M.target.value),className:"text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Public - Anyone can see and join"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"private",checked:v.visibility==="private",onChange:M=>P("visibility",M.target.value),className:"text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Private - Invite only"})]})]}),v.visibility==="private"&&e.jsx("p",{className:"mt-2 text-sm text-orange-600",children:"Private events require selecting specific members to invite."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity (optional)"}),e.jsx(K,{type:"number",min:"1",placeholder:"Leave empty for unlimited",value:((A=v.capacity)==null?void 0:A.toString())||"",onChange:M=>P("capacity",M.target.value?parseInt(M.target.value):void 0),error:N.capacity}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum number of attendees (excluding organizer)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image (optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"}),u&&e.jsx("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:u,alt:"Cover preview",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Recommended: 1200x600px, max 5MB"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:v.bringList.enabled,onChange:M=>E(M.target.checked),className:"text-orange-600 focus:ring-orange-500 rounded"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Enable bring list for attendees"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Allow attendees to sign up for items to bring"})]}),v.bringList.enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Bring List Items"}),e.jsxs("div",{className:"space-y-3",children:[v.bringList.items.map((M,re)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{type:"text",placeholder:"Item name",value:M.item,onChange:Ce=>D(re,"item",Ce.target.value),className:"flex-1"}),e.jsx(K,{type:"number",min:"1",value:M.quantity.toString(),onChange:Ce=>D(re,"quantity",parseInt(Ce.target.value)||1),className:"w-20"}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>k(re),className:"text-red-600 hover:text-red-700",children:"Remove"})]},re)),e.jsx(R,{type:"button",variant:"outline",onClick:ie,className:"w-full",children:"Add Item"})]})]}),v.visibility==="private"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Invite Members *"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the community members you want to invite to this private event. Only invited members will be able to see and RSVP to the event."}),e.jsx(vr,{selectedMembers:h,onMembersChange:p,maxSelections:50}),N.invites&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:N.invites})]})]});case 3:return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Basic Information"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Title:"})," ",e.jsx("dd",{className:"inline ml-2",children:v.title})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Type:"})," ",e.jsx("dd",{className:"inline ml-2",children:(U=Oa.find(M=>M.value===v.type))==null?void 0:U.label})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Visibility:"})," ",e.jsx("dd",{className:"inline ml-2 capitalize",children:v.visibility})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Date & Location"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Date:"})," ",e.jsx("dd",{className:"inline ml-2",children:v.dateTime.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Time:"})," ",e.jsx("dd",{className:"inline ml-2",children:v.dateTime.toLocaleTimeString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Duration:"})," ",e.jsxs("dd",{className:"inline ml-2",children:[v.duration," minutes"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Location:"})," ",e.jsx("dd",{className:"inline ml-2",children:v.location.name})]})]})]})]}),v.capacity&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Capacity"}),e.jsxs("p",{className:"text-sm",children:["Maximum ",v.capacity," attendees"]})]}),v.bringList.enabled&&v.bringList.items.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Bring List"}),e.jsx("ul",{className:"text-sm space-y-1",children:v.bringList.items.map((M,re)=>e.jsxs("li",{children:["• ",M.item," (x",M.quantity,")"]},re))})]})]})});default:return null}};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Event"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Bring your community together for memorable gatherings"})]}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:jt.map((A,U)=>e.jsxs(te.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${U<=a?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:U+1}),U<jt.length-1&&e.jsx("div",{className:`flex-1 h-1 ${U<a?"bg-orange-500":"bg-gray-200"}`})]},A.id))}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:jt[a].title}),e.jsx("p",{className:"text-gray-600",children:jt[a].description})]}),e.jsx(Y,{className:"p-8",children:_()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(R,{type:"button",variant:"outline",onClick:w,disabled:a===0,children:"Previous"}),e.jsx("div",{className:"flex space-x-3",children:a<jt.length-1?e.jsx(R,{type:"button",onClick:F,children:"Next"}):e.jsx(R,{type:"button",onClick:x,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),l||"Creating Event..."]}):"Create Event"})})]})]})},wl=({isOpen:s,eventTitle:t,step:a,onConfirm:r,onCancel:i,isLoading:n=!1})=>s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsx(Y,{className:"w-full max-w-md mx-4",children:e.jsx("div",{className:"p-6",children:a==="confirm"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Cancel Event"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to cancel ",e.jsxs("strong",{children:['"',t,'"']}),"? This will mark the event as cancelled and notify all attendees."]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(R,{variant:"outline",onClick:i,disabled:n,children:"Keep Event"}),e.jsx(R,{className:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",onClick:r,disabled:n,children:"Cancel Event"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Final Confirmation"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please confirm your decision"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Warning:"})," This will notify all attendees that the event has been cancelled. This action cannot be undone."]})})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(R,{variant:"outline",onClick:i,disabled:n,children:"No, Keep Event"}),e.jsx(R,{className:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",onClick:r,disabled:n,children:n?"Cancelling...":"Yes, Cancel Event"})]})]})})})}):null,Nt=[{id:"basic",title:"Basic Info",description:"Event title and description"},{id:"details",title:"Details",description:"Date, time, and location"},{id:"settings",title:"Settings",description:"Privacy and capacity"},{id:"invites",title:"Invitations",description:"Invite specific members (private events only)"},{id:"review",title:"Review",description:"Review and save changes"}],Ma=[{value:"birthday",label:"Birthday",icon:"🎂"},{value:"potluck",label:"Potluck",icon:"🍽️"},{value:"farewell",label:"Farewell",icon:"👋"},{value:"celebration",label:"Celebration",icon:"🎉"},{value:"other",label:"Other",icon:"📅"}],_l=()=>{const{eventId:s}=Os(),{user:t}=ve(),a=Ye(),[r,i]=y.useState(0),[n,l]=y.useState(!1),[o,c]=y.useState(!0),[d,u]=y.useState(null),[f,h]=y.useState(""),[p,v]=y.useState([]),[L,N]=y.useState(null),[C,S]=y.useState(!1),[F,w]=y.useState("confirm"),[P,b]=y.useState(!1),[E,ie]=y.useState({title:"",description:"",type:"other",visibility:"public",dateTime:new Date,duration:120,location:{name:"",address:"",coordinates:void 0},capacity:void 0,coverImage:void 0,bringList:{enabled:!1,items:[]},invitedMembers:[]}),[D,k]=y.useState({});y.useEffect(()=>{s&&T()},[s]);const T=async()=>{if(!(!s||!t))try{c(!0);const z=await It(s);if(!z){Z.error("Event not found"),a("/events");return}if(z.organizer!==t.uid){Z.error("You do not have permission to edit this event"),a(`/events/${s}`);return}if(z.status==="cancelled"||z.status==="completed"){Z.error(`Cannot edit a ${z.status} event`),a(`/events/${s}`);return}N(z),ie({title:z.title,description:z.description,type:z.type,visibility:z.visibility,dateTime:z.dateTime,duration:z.duration,location:z.location,capacity:z.capacity,coverImage:void 0,bringList:z.bringList,invitedMembers:z.invitedMembers||[]}),v(z.invitedMembers||[]),h(z.coverImage||"")}catch(z){console.error("Error loading event:",z),Z.error("Failed to load event"),a("/events")}finally{c(!1)}},x=z=>{const J={};switch(z){case 0:E.title.trim()||(J.title="Title is required"),E.description.trim()||(J.description="Description is required");break;case 1:E.location.name.trim()||(J.locationName="Location name is required"),E.location.address.trim()||(J.locationAddress="Address is required"),(!E.dateTime||E.dateTime<=new Date)&&(J.dateTime="Event must be in the future"),E.duration<30&&(J.duration="Duration must be at least 30 minutes");break;case 2:E.capacity&&E.capacity<1&&(J.capacity="Capacity must be at least 1");break;case 3:E.visibility==="private"&&p.length===0&&(J.invites="Private events must have at least one invited member");break}return k(J),Object.keys(J).length===0},_=()=>{if(x(r)){let z=r+1;r===2&&E.visibility==="public"&&(z=4),i(Math.min(z,Nt.length-1))}},A=()=>{i(z=>Math.max(z-1,0))},U=(z,J)=>{ie(G=>({...G,[z]:J})),D[z]&&k(G=>{const he={...G};return delete he[z],he})},M=(z,J)=>{ie(G=>({...G,location:{...G.location,[z]:J}})),D[`location${z.charAt(0).toUpperCase()+z.slice(1)}`]&&k(G=>{const he={...G};return delete he[`location${z.charAt(0).toUpperCase()+z.slice(1)}`],he})},re=z=>{ie(J=>({...J,bringList:{enabled:z,items:z?J.bringList.items:[]}}))},Ce=()=>{ie(z=>({...z,bringList:{...z.bringList,items:[...z.bringList.items,{item:"",quantity:1}]}}))},Ae=(z,J,G)=>{ie(he=>({...he,bringList:{...he.bringList,items:he.bringList.items.map((ze,bt)=>bt===z?{...ze,[J]:G}:ze)}}))},yt=z=>{ie(J=>({...J,bringList:{...J.bringList,items:J.bringList.items.filter((G,he)=>he!==z)}}))},Wt=z=>{var G;const J=(G=z.target.files)==null?void 0:G[0];if(J){if(!J.type.startsWith("image/")){Z.error("Please select an image file");return}if(J.size>5*1024*1024){Z.error("Image must be less than 5MB");return}u(J);const he=new FileReader;he.onload=ze=>{var bt;h((bt=ze.target)==null?void 0:bt.result)},he.readAsDataURL(J)}},fs=async()=>{if(!(!s||!t))try{l(!0);const z={...E,invitedMembers:E.visibility==="private"?p:[]};if(await ol(s,z),d)try{await pr(s,d,!0)}catch(J){console.warn("Failed to upload cover image:",J)}Z.success("Event updated successfully!"),a(`/events/${s}`)}catch(z){console.error("Error updating event:",z),Z.error(z.message||"Failed to update event. Please try again.")}finally{l(!1)}},Yt=()=>{S(!0),w("confirm")},gs=()=>{F==="confirm"?w("warning"):ps()},Ht=()=>{S(!1),w("confirm")},ps=async()=>{if(!(!s||!t))try{b(!0),await hl(s),Z.success("Event cancelled successfully!"),a("/events")}catch(z){console.error("Error cancelling event:",z),Z.error(z.message||"Failed to cancel event. Please try again.")}finally{b(!1),S(!1)}},Lt=()=>{var z,J;switch(r){case 0:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),e.jsx(K,{type:"text",placeholder:"e.g., Community Potluck Gathering",value:E.title,onChange:G=>U("title",G.target.value),error:D.title,maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-vertical",placeholder:"Describe your event...",value:E.description,onChange:G=>U("description",G.target.value),rows:4,maxLength:2e3}),D.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Event Type"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Ma.map(G=>e.jsx("button",{type:"button",onClick:()=>U("type",G.value),className:`p-3 border rounded-lg text-left hover:border-orange-300 transition-colors ${E.type===G.value?"border-orange-500 bg-orange-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-lg",children:G.icon}),e.jsx("span",{className:"text-sm font-medium",children:G.label})]})},G.value))})]})]});case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time *"}),e.jsx(K,{type:"datetime-local",min:new Date().toISOString().slice(0,16),value:E.dateTime.toISOString().slice(0,16),onChange:G=>U("dateTime",new Date(G.target.value)),error:D.dateTime}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Event must be scheduled for a future date and time"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes) *"}),e.jsx(K,{type:"number",min:"30",max:"1440",value:E.duration.toString(),onChange:G=>U("duration",parseInt(G.target.value)||120),error:D.duration})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name *"}),e.jsx(K,{type:"text",placeholder:"e.g., Community Center",value:E.location.name,onChange:G=>M("name",G.target.value),error:D.locationName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e.jsx(K,{type:"text",placeholder:"Full address for directions",value:E.location.address,onChange:G=>M("address",G.target.value),error:D.locationAddress})]}),E.location.address.trim()&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Preview"}),e.jsx(Qs,{address:E.location.address,locationName:E.location.name,coordinates:E.location.coordinates,height:"200px",className:"border border-gray-200 rounded-lg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This is a preview of the event location on the map"})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visibility"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"public",checked:E.visibility==="public",onChange:G=>U("visibility",G.target.value),className:"text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Public - Anyone can see and join"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"private",checked:E.visibility==="private",onChange:G=>U("visibility",G.target.value),className:"text-orange-600 focus:ring-orange-500"}),e.jsx("span",{className:"ml-2 text-sm",children:"Private - Invite only"})]})]}),E.visibility==="private"&&e.jsx("p",{className:"mt-2 text-sm text-orange-600",children:"Private events require selecting specific members to invite."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity (optional)"}),e.jsx(K,{type:"number",min:"1",placeholder:"Leave empty for unlimited",value:((z=E.capacity)==null?void 0:z.toString())||"",onChange:G=>U("capacity",G.target.value?parseInt(G.target.value):void 0),error:D.capacity}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum number of attendees (excluding organizer)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image (optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:Wt,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"}),f&&e.jsx("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:e.jsx("img",{src:f,alt:"Cover preview",className:"w-full h-full object-cover"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Recommended: 1200x600px, max 5MB"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:E.bringList.enabled,onChange:G=>re(G.target.checked),className:"text-orange-600 focus:ring-orange-500 rounded"}),e.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Enable bring list for attendees"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Allow attendees to sign up for items to bring"})]}),E.bringList.enabled&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Bring List Items"}),e.jsxs("div",{className:"space-y-3",children:[E.bringList.items.map((G,he)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{type:"text",placeholder:"Item name",value:G.item,onChange:ze=>Ae(he,"item",ze.target.value),className:"flex-1"}),e.jsx(K,{type:"number",min:"1",value:G.quantity.toString(),onChange:ze=>Ae(he,"quantity",parseInt(ze.target.value)||1),className:"w-20"}),e.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>yt(he),className:"text-red-600 hover:text-red-700",children:"Remove"})]},he)),e.jsx(R,{type:"button",variant:"outline",onClick:Ce,className:"w-full",children:"Add Item"})]})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Invite Members"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select the community members you want to invite to this private event. Only invited members will be able to see and RSVP to the event."})]}),e.jsx(vr,{selectedMembers:p,onMembersChange:v,maxSelections:50}),p.length===0&&e.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," You haven't selected any members yet. Private events require at least one invited member."]})})]});case 4:return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Basic Information"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Title:"})," ",e.jsx("dd",{className:"inline ml-2",children:E.title})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Type:"})," ",e.jsx("dd",{className:"inline ml-2",children:(J=Ma.find(G=>G.value===E.type))==null?void 0:J.label})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Visibility:"})," ",e.jsx("dd",{className:"inline ml-2 capitalize",children:E.visibility})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Date & Location"}),e.jsxs("dl",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Date:"})," ",e.jsx("dd",{className:"inline ml-2",children:E.dateTime.toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Time:"})," ",e.jsx("dd",{className:"inline ml-2",children:E.dateTime.toLocaleTimeString()})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Duration:"})," ",e.jsxs("dd",{className:"inline ml-2",children:[E.duration," minutes"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"inline font-medium",children:"Location:"})," ",e.jsx("dd",{className:"inline ml-2",children:E.location.name})]})]})]})]}),E.capacity&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Capacity"}),e.jsxs("p",{className:"text-sm",children:["Maximum ",E.capacity," attendees"]})]}),E.bringList.enabled&&E.bringList.items.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Bring List"}),e.jsx("ul",{className:"text-sm space-y-1",children:E.bringList.items.map((G,he)=>e.jsxs("li",{children:["• ",G.item," (x",G.quantity,")"]},he))})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Your changes will be saved and the event will be updated for all attendees."]})})]})});default:return null}};return o?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(We,{})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Event"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Update your event details and settings"})]}),e.jsx("div",{className:"flex items-center justify-center space-x-4",children:Nt.map((z,J)=>{if(z.id==="invites"&&E.visibility==="public")return null;const G=z.id==="invites"&&E.visibility==="private"?J:z.id==="review"&&E.visibility==="public"?J-1:J;return e.jsxs(te.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${J<=r?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:G+1}),J<Nt.length-1&&z.id!=="invites"&&e.jsx("div",{className:`flex-1 h-1 ${J<r?"bg-orange-500":"bg-gray-200"}`})]},z.id)})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:Nt[r].title}),e.jsx("p",{className:"text-gray-600",children:Nt[r].description})]}),e.jsx(Y,{className:"p-8",children:Lt()}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(R,{type:"button",variant:"outline",onClick:A,disabled:r===0,children:"Previous"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(R,{variant:"outline",onClick:()=>a(`/events/${s}`),children:"Cancel"}),e.jsx(R,{type:"button",className:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",onClick:Yt,children:"Cancel Event"}),r<Nt.length-1?e.jsx(R,{type:"button",onClick:_,children:"Next"}):e.jsx(R,{type:"button",onClick:fs,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Saving Changes..."]}):"Save Changes"})]})]}),e.jsx(wl,{isOpen:C,eventTitle:E.title,step:F,onConfirm:gs,onCancel:Ht,isLoading:P})]})},kl=({member:s,currentUserId:t,onViewProfile:a,onContact:r,compact:i=!1,showContactButtons:n=!0})=>{const l=t===s.uid,o=d=>d.split(" ").map(u=>u.charAt(0)).join("").toUpperCase().slice(0,2),c=d=>{r==null||r(s,d)};return i?e.jsx(Y,{className:"p-3 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:o(s.displayName)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-900 truncate",children:[s.displayName,l&&e.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(You)"})]}),s.interests.length>0&&e.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[s.interests.slice(0,2).join(", "),s.interests.length>2&&` +${s.interests.length-2} more`]})]}),n&&!l&&e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>c("whatsapp"),className:"p-1 h-8 w-8",title:"WhatsApp",children:"📱"}),e.jsx(R,{size:"sm",variant:"ghost",onClick:()=>c("email"),className:"p-1 h-8 w-8",title:"Email",children:"✉️"})]})]})}):e.jsx(Y,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-xl font-bold text-white",children:o(s.displayName)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:s.displayName}),l&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"You"})]}),s.interests.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Interests:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.interests.slice(0,4).map((d,u)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:d},u)),s.interests.length>4&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.interests.length-4," more"]})]})]}),n&&!l&&e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(R,{size:"sm",variant:"outline",onClick:()=>c("whatsapp"),className:"p-2 h-9 w-9",title:"WhatsApp",children:"📱"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>c("phone"),className:"p-2 h-9 w-9",title:"Call",children:"📞"}),e.jsx(R,{size:"sm",variant:"outline",onClick:()=>c("email"),className:"p-2 h-9 w-9",title:"Email",children:"✉️"})]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx(R,{onClick:()=>a==null?void 0:a(s),className:"w-full",variant:l?"outline":"primary",children:l?"Edit Profile":"View Profile"})})]})})},Cl=({onMemberSelect:s,onContactMember:t,currentUserId:a})=>{const[r,i]=y.useState([]),[n,l]=y.useState([]),[o,c]=y.useState(!0),[d,u]=y.useState(null),[f,h]=y.useState(""),[p,v]=y.useState({}),[L,N]=y.useState(!1);y.useEffect(()=>(c(!0),u(null),fl({},P=>{const b=P.filter(E=>!0);i(b),l(b),c(!1)})),[]),y.useEffect(()=>{let w=r;if(f.trim()){const P=f.toLowerCase();w=w.filter(b=>b.displayName.toLowerCase().includes(P)||b.interests.some(E=>E.toLowerCase().includes(P)))}l(w)},[r,f]);const C=w=>{h(w.target.value)},S=(w,P)=>{v(b=>({...b,[w]:P||void 0}))},F=()=>{v({}),h("")};return o?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading members..."})]}):d?e.jsx(De,{type:"error",message:d}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{type:"text",placeholder:"Search by name or interests...",value:f,onChange:C,className:"w-full"})}),e.jsx(R,{variant:"outline",onClick:()=>N(!L),children:L?"Hide Filters":"Show Filters"})]}),L&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:p.status||"",onChange:w=>S("status",w.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{value:p.role||"",onChange:w=>S("role",w.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Roles"}),e.jsx("option",{value:"member",children:"Member"}),e.jsx("option",{value:"admin",children:"Admin"})]})]})]}),(f||Object.keys(p).length>0)&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[n.length," member",n.length!==1?"s":""," found"]}),e.jsx(R,{variant:"ghost",size:"sm",onClick:F,children:"Clear Filters"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(w=>e.jsx(kl,{member:w,currentUserId:a,onViewProfile:s,onContact:t,showContactButtons:!0},w.uid))}),n.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No members found matching your criteria."}),e.jsx(R,{variant:"outline",onClick:F,className:"mt-4",children:"Clear Filters"})]})]})},El=()=>{const s=Ye(),[t,a]=y.useState(null),r=n=>{a(n),s(`/members/${n.uid}`)},i=async(n,l)=>{var o,c;try{const d=await Ct(n.uid);if(!d){Z.error("Unable to load member contact information");return}let u="",f="",h=!1;switch(l){case"whatsapp":if(d.whatsappNumber&&((o=d.privacy)!=null&&o.whatsappVisible))u=`https://wa.me/${d.whatsappNumber.replace(/[\s\-\(\)]/g,"")}?text=Hi%20${encodeURIComponent(n.displayName)}!%20I%20found%20you%20through%20LCC%20Assemble.`,f=`Opening WhatsApp to message ${n.displayName}`,h=!0;else{Z.error(`${n.displayName} has not made their WhatsApp number visible`);return}break;case"phone":if(d.phoneNumber&&((c=d.privacy)!=null&&c.phoneVisible))u=`tel:${d.phoneNumber}`,f=`Calling ${n.displayName}`,h=!0;else{Z.error(`${n.displayName} has not made their phone number visible`);return}break;case"email":u=`mailto:?subject=Hello%20from%20LCC%20Assemble&body=Hi%20${encodeURIComponent(n.displayName)}!%20I%20found%20you%20through%20LCC%20Assemble.`,f=`Opening email to contact ${n.displayName}`,h=!0;break}h&&u&&(window.open(u,"_blank"),Z.success(f))}catch(d){console.error("Error contacting member:",d),Z.error("Unable to contact member. Please try again.")}};return e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Community Members"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Connect with fellow community members and discover shared interests"})]}),e.jsx(Cl,{onMemberSelect:r,onContactMember:i}),e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Join Our Growing Community"}),e.jsx("p",{className:"text-orange-100 mb-4",children:"Connect with neighbors, share interests, and build lasting relationships"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"50+"}),e.jsx("div",{className:"text-orange-200",children:"Active Members"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"25+"}),e.jsx("div",{className:"text-orange-200",children:"Events This Month"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:"15+"}),e.jsx("div",{className:"text-orange-200",children:"Shared Interests"})]})]})]})}),e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How to Connect"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"📱 WhatsApp"}),e.jsx("p",{children:"Quick messaging for urgent communications and event coordination"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"📞 Phone"}),e.jsx("p",{children:"Direct calls for immediate assistance or detailed discussions"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"✉️ Email"}),e.jsx("p",{children:"Formal communications and sharing detailed information"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"👥 In-Person"}),e.jsx("p",{children:"Meet at community events and build personal connections"})]})]})]})]})},Sl=()=>{var h,p,v,L,N,C,S,F,w,P,b,E,ie,D;const{memberId:s}=Os(),t=Ye(),{user:a}=ve(),[r,i]=y.useState(null),[n,l]=y.useState(!0),[o,c]=y.useState(null);y.useEffect(()=>{(async()=>{if(!s){c("Member ID not provided"),l(!1);return}try{l(!0),c(null);const T=await Ct(s);if(!T){c("Member not found");return}if(T.status==="suspended"){c("This member profile is not available");return}const x={...T,createdAt:new Date(T.createdAt),updatedAt:new Date(T.updatedAt)};i(x)}catch(T){console.error("Error loading member profile:",T),c("Failed to load member profile")}finally{l(!1)}})()},[s]);const d=k=>{var _,A;if(!r)return;let T="",x="";switch(k){case"whatsapp":if(r.whatsappNumber&&((_=r.privacy)!=null&&_.whatsappVisible))T=`https://wa.me/${r.whatsappNumber.replace(/[\s\-\(\)]/g,"")}?text=Hi%20${encodeURIComponent(r.displayName)}!%20I%20saw%20your%20profile%20on%20LCC%20Assemble.`,x=`Opening WhatsApp to message ${r.displayName}`;else{Z.error(`${r.displayName} has not made their WhatsApp number visible`);return}break;case"phone":if(r.phoneNumber&&((A=r.privacy)!=null&&A.phoneVisible))T=`tel:${r.phoneNumber}`,x=`Calling ${r.displayName}`;else{Z.error(`${r.displayName} has not made their phone number visible`);return}break;case"email":T=`mailto:?subject=Hello%20from%20LCC%20Assemble&body=Hi%20${encodeURIComponent(r.displayName)}!%20I%20saw%20your%20profile%20on%20LCC%20Assemble.`,x=`Opening email to contact ${r.displayName}`;break}T&&(window.open(T,"_blank"),Z.success(x))},u=k=>k.split(" ").map(T=>T.charAt(0)).join("").toUpperCase().slice(0,2);if(n)return e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(We,{}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading member profile..."})]});if(o)return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(De,{variant:"error",children:o}),e.jsx("div",{className:"text-center",children:e.jsx(R,{onClick:()=>t("/members"),children:"Back to Members"})})]});if(!r)return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx(De,{variant:"error",children:"Member not found"}),e.jsx("div",{className:"text-center",children:e.jsx(R,{onClick:()=>t("/members"),children:"Back to Members"})})]});const f=(a==null?void 0:a.uid)===r.uid;return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Member Profile"}),e.jsxs("p",{className:"mt-2 text-gray-600",children:["Learn more about ",r.displayName]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(Y,{className:"p-6 text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:u(r.displayName)})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r.displayName}),r.role==="admin"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 mb-4",children:"Administrator"}),r.status==="pending"&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 mb-4",children:"Pending Approval"}),!f&&e.jsxs("div",{className:"flex justify-center space-x-3 mt-4",children:[e.jsx(R,{onClick:()=>d("whatsapp"),className:"p-3 h-12 w-12 rounded-full",disabled:!r.whatsappNumber||!((h=r.privacy)!=null&&h.whatsappVisible),title:"WhatsApp",children:"📱"}),e.jsx(R,{onClick:()=>d("phone"),variant:"outline",className:"p-3 h-12 w-12 rounded-full",disabled:!r.phoneNumber||!((p=r.privacy)!=null&&p.phoneVisible),title:"Call",children:"📞"}),e.jsx(R,{onClick:()=>d("email"),variant:"outline",className:"p-3 h-12 w-12 rounded-full",title:"Email",children:"✉️"})]}),f&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{onClick:()=>t("/profile"),className:"w-full",children:"Edit Profile"})})]})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.bio&&e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"About"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:r.bio})]}),r.interests&&r.interests.length>0&&e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Interests"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.interests.map((k,T)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800",children:k},T))})]}),r.dietaryPreferences&&r.dietaryPreferences.length>0&&e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Dietary Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.dietaryPreferences.map((k,T)=>e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:k},T))})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Availability"}),e.jsxs("div",{className:"space-y-2",children:[((v=r.defaultAvailability)==null?void 0:v.weekdays)&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"📅"}),"Available on weekdays"]}),((L=r.defaultAvailability)==null?void 0:L.evenings)&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"🌅"}),"Available in evenings"]}),((N=r.defaultAvailability)==null?void 0:N.weekends)&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"🏖️"}),"Available on weekends"]}),!((C=r.defaultAvailability)!=null&&C.weekdays)&&!((S=r.defaultAvailability)!=null&&S.evenings)&&!((F=r.defaultAvailability)!=null&&F.weekends)&&e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"🔄"}),"Flexible availability"]})]})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Contact Information"}),e.jsxs("div",{className:"space-y-3",children:[((w=r.privacy)==null?void 0:w.phoneVisible)&&r.phoneNumber&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"📞"}),"Phone"]}),e.jsx("span",{className:"text-gray-900",children:r.phoneNumber})]}),((P=r.privacy)==null?void 0:P.whatsappVisible)&&r.whatsappNumber&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"💬"}),"WhatsApp"]}),e.jsx("span",{className:"text-gray-900",children:r.whatsappNumber})]}),((b=r.privacy)==null?void 0:b.addressVisible)&&r.address&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("span",{className:"w-4 h-4 mr-2",children:"📍"}),"Address"]}),e.jsxs("div",{className:"text-right text-gray-900",children:[e.jsx("div",{children:r.address.street}),e.jsxs("div",{children:[r.address.city,", ",r.address.postalCode]})]})]}),(!((E=r.privacy)!=null&&E.phoneVisible)||!r.phoneNumber)&&(!((ie=r.privacy)!=null&&ie.whatsappVisible)||!r.whatsappNumber)&&(!((D=r.privacy)!=null&&D.addressVisible)||!r.address)&&e.jsxs("p",{className:"text-gray-500 italic",children:[r.displayName," has chosen to keep their contact information private."]})]})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsx(R,{variant:"outline",onClick:()=>t("/members"),children:"Back to Members"})})]})},Al=({onSuccess:s,onCancel:t})=>{const{userProfile:a,updateUserProfile:r,isLoading:i,error:n,clearError:l}=ve(),[o,c]=y.useState(!1),[d,u]=y.useState({displayName:"",phoneNumber:"",whatsappNumber:"",bio:"",interests:[],dietaryPreferences:[],address:{street:"",city:"",postalCode:""},privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1}}),[f,h]=y.useState({}),[p,v]=y.useState(""),[L,N]=y.useState("");y.useEffect(()=>{a&&u({displayName:a.displayName,phoneNumber:a.phoneNumber||"",whatsappNumber:a.whatsappNumber||"",bio:a.bio||"",interests:a.interests||[],dietaryPreferences:a.dietaryPreferences||[],address:a.address||{street:"",city:"",postalCode:""},privacy:a.privacy})},[a]);const C=k=>T=>{const x=T.target.value;u(_=>({..._,[k]:x})),f[k]&&h(_=>({..._,[k]:""})),n&&l&&l()},S=k=>T=>{const x=T.target.value;u(_=>({..._,address:{..._.address,[k]:x}}))},F=k=>T=>{const x=T.target.checked;u(_=>({..._,privacy:{..._.privacy,[k]:x}}))},w=()=>{p.trim()&&!d.interests.includes(p.trim())&&(u(k=>({...k,interests:[...k.interests,p.trim()]})),v(""))},P=k=>{u(T=>({...T,interests:T.interests.filter(x=>x!==k)}))},b=()=>{L.trim()&&!d.dietaryPreferences.includes(L.trim())&&(u(k=>({...k,dietaryPreferences:[...k.dietaryPreferences,L.trim()]})),N(""))},E=k=>{u(T=>({...T,dietaryPreferences:T.dietaryPreferences.filter(x=>x!==k)}))},ie=()=>{const k={};return d.displayName.trim()?d.displayName.length<2?k.displayName="Display name must be at least 2 characters":d.displayName.length>50&&(k.displayName="Display name must be less than 50 characters"):k.displayName="Display name is required",d.bio&&d.bio.length>500&&(k.bio="Bio must be less than 500 characters"),d.phoneNumber&&!/^\+?[\d\s\-\(\)]+$/.test(d.phoneNumber)&&(k.phoneNumber="Please enter a valid phone number"),d.whatsappNumber&&!/^\+?[\d\s\-\(\)]+$/.test(d.whatsappNumber)&&(k.whatsappNumber="Please enter a valid WhatsApp number"),h(k),Object.keys(k).length===0},D=async k=>{if(k.preventDefault(),!!ie())try{c(!0),r&&(await r(d),s==null||s())}catch{}finally{c(!1)}};return e.jsx(Y,{className:"w-full max-w-2xl mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Update your personal information and preferences"})]}),e.jsxs("form",{onSubmit:D,className:"space-y-6",children:[n&&e.jsx(De,{type:"error",message:n}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),e.jsx(K,{type:"text",label:"Display Name",value:d.displayName,onChange:C("displayName"),...f.displayName&&{error:f.displayName},placeholder:"Your display name",disabled:i||o,required:!0}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),e.jsx("textarea",{value:d.bio,onChange:C("bio"),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Tell us about yourself...",rows:3,disabled:i||o}),f.bio&&e.jsx("p",{className:"text-sm text-red-600",children:f.bio}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d.bio.length,"/500 characters"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),e.jsx(K,{type:"tel",label:"Phone Number",value:d.phoneNumber,onChange:C("phoneNumber"),...f.phoneNumber&&{error:f.phoneNumber},placeholder:"+1 (555) 123-4567",disabled:i||o}),e.jsx(K,{type:"tel",label:"WhatsApp Number",value:d.whatsappNumber,onChange:C("whatsappNumber"),...f.whatsappNumber&&{error:f.whatsappNumber},placeholder:"+1 (555) 123-4567",disabled:i||o})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address"}),e.jsx(K,{type:"text",label:"Street Address",value:d.address.street,onChange:S("street"),placeholder:"123 Main Street",disabled:i||o}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(K,{type:"text",label:"City",value:d.address.city,onChange:S("city"),placeholder:"City",disabled:i||o}),e.jsx(K,{type:"text",label:"Postal Code",value:d.address.postalCode,onChange:S("postalCode"),placeholder:"A1A 1A1",disabled:i||o})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Interests"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{type:"text",value:p,onChange:k=>v(k.target.value),placeholder:"Add an interest...",disabled:i||o,onKeyPress:k=>{k.key==="Enter"&&(k.preventDefault(),w())}}),e.jsx(R,{type:"button",onClick:w,disabled:!p.trim()||i||o,size:"sm",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.interests.map(k=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[k,e.jsx("button",{type:"button",onClick:()=>P(k),className:"ml-2 text-blue-600 hover:text-blue-800",disabled:i||o,children:"×"})]},k))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dietary Preferences"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(K,{type:"text",value:L,onChange:k=>N(k.target.value),placeholder:"Add a dietary preference...",disabled:i||o,onKeyPress:k=>{k.key==="Enter"&&(k.preventDefault(),b())}}),e.jsx(R,{type:"button",onClick:b,disabled:!L.trim()||i||o,size:"sm",children:"Add"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.dietaryPreferences.map(k=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[k,e.jsx("button",{type:"button",onClick:()=>E(k),className:"ml-2 text-green-600 hover:text-green-800",disabled:i||o,children:"×"})]},k))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Privacy Settings"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.privacy.phoneVisible,onChange:F("phoneVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make phone number visible to other members"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.privacy.whatsappVisible,onChange:F("whatsappVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make WhatsApp number visible to other members"})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:d.privacy.addressVisible,onChange:F("addressVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make address visible to other members"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[t&&e.jsx(R,{type:"button",variant:"outline",onClick:t,disabled:i||o,children:"Cancel"}),e.jsx(R,{type:"submit",disabled:i||o,isLoading:o,children:o?"Saving...":"Save Profile"})]})]})]})})},Pl=({onSuccess:s,onCancel:t})=>{const{changePassword:a,error:r,clearError:i}=ve(),[n,l]=y.useState(!1),[o,c]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[d,u]=y.useState({}),[f,h]=y.useState(!1),p=N=>C=>{const S=C.target.value;c(F=>({...F,[N]:S})),d[N]&&u(F=>({...F,[N]:""})),r&&i&&i()},v=()=>{const N={};return o.currentPassword||(N.currentPassword="Current password is required"),o.newPassword?o.newPassword.length<6?N.newPassword="New password must be at least 6 characters":o.newPassword===o.currentPassword&&(N.newPassword="New password must be different from current password"):N.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(N.confirmPassword="Passwords do not match"):N.confirmPassword="Please confirm your new password",u(N),Object.keys(N).length===0},L=async N=>{if(N.preventDefault(),!!v())try{l(!0),await a(o.currentPassword,o.newPassword),c({currentPassword:"",newPassword:"",confirmPassword:""}),h(!0),Z.success("Password changed successfully!"),setTimeout(()=>{h(!1)},3e3),s==null||s()}catch(C){console.error("Password change error:",C)}finally{l(!1)}};return e.jsx(Y,{className:"w-full max-w-2xl mx-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Change Password"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Update your password to keep your account secure"})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[r&&e.jsx(De,{type:"error",message:r}),f&&e.jsx(De,{type:"success",message:"Password changed successfully!"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Current Password *"}),e.jsx(K,{type:"password",value:o.currentPassword,onChange:p("currentPassword"),error:d.currentPassword,placeholder:"Enter your current password",disabled:n,required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"New Password *"}),e.jsx(K,{type:"password",value:o.newPassword,onChange:p("newPassword"),error:d.newPassword,placeholder:"Enter your new password",disabled:n,required:!0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Password must be at least 6 characters long"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm New Password *"}),e.jsx(K,{type:"password",value:o.confirmPassword,onChange:p("confirmPassword"),error:d.confirmPassword,placeholder:"Confirm your new password",disabled:n,required:!0})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Password Requirements:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• At least 6 characters long"}),e.jsx("li",{children:"• Must be different from your current password"}),e.jsx("li",{children:"• Use a combination of letters, numbers, and symbols for better security"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[t&&e.jsx(R,{type:"button",variant:"outline",onClick:t,disabled:n,children:"Cancel"}),e.jsx(R,{type:"submit",disabled:n,isLoading:n,children:n?"Changing Password...":"Change Password"})]})]})]})})},Tl=()=>{var d,u,f,h,p;const s=Ye(),{userProfile:t,logout:a}=ve(),[r,i]=y.useState(!1),n=()=>{Z.success("Profile updated successfully!")},l=()=>{Z.success("Password changed successfully!"),i(!1)},o=async()=>{try{await a(),Z.success("Logged out successfully"),s("/login")}catch{Z.error("Failed to log out")}};if(!t)return e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(We,{})});const c=v=>v.split(" ").map(L=>L.charAt(0)).join("").toUpperCase().slice(0,2);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:c(t.displayName)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t.displayName}),e.jsx("p",{className:"text-gray-600",children:t.email}),t.bio&&e.jsx("p",{className:"text-gray-700 mt-1",children:t.bio}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Role: ",t.role]}),e.jsxs("span",{children:["Status: ",t.status]}),e.jsxs("span",{children:["Member since: ",new Date(t.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(R,{variant:"outline",size:"sm",onClick:()=>s("/events"),children:"View My Events"}),e.jsx(R,{variant:"outline",size:"sm",onClick:o,className:"text-red-600 hover:text-red-800",children:"Logout"})]})]})}),e.jsx(Al,{onSuccess:n}),e.jsxs(Y,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Password & Security"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Change your password to keep your account secure"})]}),e.jsx(R,{variant:"outline",onClick:()=>i(!r),children:r?"Cancel":"Change Password"})]}),r&&e.jsx("div",{className:"mt-6",children:e.jsx(Pl,{onSuccess:l,onCancel:()=>i(!1)})})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Statistics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((d=t.interests)==null?void 0:d.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Interests Listed"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((u=t.dietaryPreferences)==null?void 0:u.length)||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Dietary Preferences"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(f=t.privacy)!=null&&f.phoneVisible||(h=t.privacy)!=null&&h.whatsappVisible||(p=t.privacy)!=null&&p.addressVisible?"Yes":"No"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Contact Info Public"})]})]})]}),e.jsxs(Y,{className:"p-6 bg-blue-50",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Privacy & Security"}),e.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your privacy is important to us. You control what information is visible to other community members. You can change your privacy settings above."}),e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("p",{children:"• Phone/WhatsApp numbers are only visible if you choose to share them"}),e.jsx("p",{children:"• Your email address is never shared with other members"}),e.jsx("p",{children:"• You can update your privacy settings at any time"})]})]})]})},Il=()=>{const{user:s}=ve(),[t,a]=y.useState([]),[r,i]=y.useState([]),[n,l]=y.useState({}),[o,c]=y.useState([]),[d,u]=y.useState(!0),[f,h]=y.useState(null),[p,v]=y.useState({totalMembers:0,pendingMembers:0,approvedMembers:0,suspendedMembers:0,totalEvents:0,publishedEvents:0});y.useEffect(()=>{L()},[]);const L=async()=>{try{u(!0);const w=await cs({},1e3);i(w.users);const P=await cs({status:"pending"},100);a(P.users);const b=await Gs({},100);c(b.events);const E=await br(),ie=b.events.reduce((D,k)=>(D.totalEvents++,k.status==="published"&&D.publishedEvents++,D),{totalEvents:0,publishedEvents:0});v({totalMembers:E.pending+E.approved+E.suspended,pendingMembers:E.pending,approvedMembers:E.approved,suspendedMembers:E.suspended,...ie})}catch(w){console.error("Error loading admin data:",w),Z.error("Failed to load admin data")}finally{u(!1)}},N=async w=>{try{h(w),await Da(w),Z.success("Member approved successfully"),a(b=>b.filter(E=>E.uid!==w)),v(b=>({...b,pendingMembers:b.pendingMembers-1,approvedMembers:b.approvedMembers+1}));const P=await Ct(w);P&&l(b=>({...b,[w]:P}))}catch(P){console.error("Error approving member:",P),Z.error("Failed to approve member")}finally{h(null)}},C=async w=>{try{h(w),await xl(w),Z.success("Member suspended"),v(b=>({...b,approvedMembers:b.approvedMembers-1,suspendedMembers:b.suspendedMembers+1}));const P=await Ct(w);P&&l(b=>({...b,[w]:P}))}catch(P){console.error("Error suspending member:",P),Z.error("Failed to suspend member")}finally{h(null)}},S=async w=>{try{h(w),await Da(w),Z.success("Member reactivated"),v(b=>({...b,suspendedMembers:b.suspendedMembers-1,approvedMembers:b.approvedMembers+1}));const P=await Ct(w);P&&l(b=>({...b,[w]:P}))}catch(P){console.error("Error reactivating member:",P),Z.error("Failed to reactivate member")}finally{h(null)}},F=w=>{switch(w){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return d?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(We,{})}):e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage community members and monitor activity"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"👥"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.totalMembers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"})]})]})}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"⏳"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.pendingMembers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]})]})}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"✅"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.approvedMembers}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"})]})]})}),e.jsx(Y,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx("span",{className:"text-2xl",children:"📅"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.totalEvents}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]})]})})]}),t.length>0&&e.jsxs(Y,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Pending Member Approvals"}),e.jsx("div",{className:"space-y-4",children:t.map(w=>{const P=n[w.uid];return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-orange-600",children:w.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:w.displayName}),P&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600",children:P.email}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",new Date(P.createdAt).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(R,{size:"sm",onClick:()=>N(w.uid),disabled:f===w.uid,isLoading:f===w.uid,className:"bg-green-500 hover:bg-green-600",children:"Approve"})})]},w.uid)})})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Member Overview"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.slice(0,9).map(w=>{const P=n[w.uid];return e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-orange-600",children:w.displayName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.displayName}),P&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-xs text-gray-600 truncate",children:P.email}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${F(P.status)}`,children:P.status}),P.status==="approved"&&w.uid!==(s==null?void 0:s.uid)&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>C(w.uid),disabled:f===w.uid,isLoading:f===w.uid,className:"text-red-600 hover:text-red-800",children:"Suspend"}),P.status==="suspended"&&e.jsx(R,{size:"sm",variant:"outline",onClick:()=>S(w.uid),disabled:f===w.uid,isLoading:f===w.uid,className:"text-green-600 hover:text-green-800",children:"Reactivate"})]})]})]})]})},w.uid)})}),r.length>9&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Showing 9 of ",r.length," members"]})})]}),e.jsxs(Y,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Events"}),e.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:w.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.location.name," • ",w.attendeeCount," attendees"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:w.status}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(w.dateTime).toLocaleDateString()})]})]},w.id))}),o.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No events created yet"})]})]})},Ll=()=>{const s=()=>{window.open("mailto:lakeshoreculturalcommittee@gmail.com","_blank")},t=()=>{window.open("tel:+16479735359","_blank")},a=()=>{window.open("https://wa.me/16479735359","_blank")};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Lakeshore Cultural Committee"}),e.jsx("p",{className:"text-xl md:text-2xl mb-2 opacity-90",children:"LCC - Building Community Together"}),e.jsx("p",{className:"text-lg opacity-80 italic",children:'"Creating bonds that go beyond borders, celebrating diversity in unity."'})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-12",children:[e.jsxs(Y,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"About LCC"}),e.jsx("div",{className:"w-24 h-1 bg-orange-500 mx-auto mb-6"})]}),e.jsxs("div",{className:"prose prose-lg max-w-none text-center",children:[e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"The Lakeshore Cultural Committee (LCC) is a close-knit group of friends and families, primarily residing in the Bathurst–Lakeshore area of Toronto. For the past five years, LCC has been a vibrant platform to celebrate festivals, traditions, and togetherness far away from our roots."}),e.jsx("p",{className:"text-gray-700 leading-relaxed mb-6",children:"From colorful festivities like Holi, Ganesh Utsav, and Navratri, to joyful occasions such as Christmas and New Year, and even spirited sports tournaments, LCC brings people together to create lasting memories. We organize potluck dinners, farewell parties, housewarming celebrations, and much more – fostering a sense of belonging and community spirit in our diverse neighborhood."}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:"Whether you're new to the area or have been part of the community for years, LCC welcomes everyone to join our events, share experiences, and build meaningful connections. Our committee is dedicated to preserving cultural traditions while embracing the multicultural fabric of Toronto."})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsx("p",{className:"text-lg font-semibold text-orange-600 italic",children:"Join us in celebrating life, culture, and community!"})})]}),e.jsxs(Y,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"What We Do"}),e.jsx("div",{className:"w-24 h-1 bg-green-500 mx-auto mb-6"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🪔"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cultural Festivals"}),e.jsx("p",{className:"text-gray-600",children:"Holi, Ganesh Utsav, Navratri, and more"})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🎄"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Holiday Celebrations"}),e.jsx("p",{className:"text-gray-600",children:"Christmas, New Year, and seasonal events"})]}),e.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🏆"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Sports Tournaments"}),e.jsx("p",{className:"text-gray-600",children:"Volleyball, basketball, and friendly competitions"})]}),e.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🍽️"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Community Gatherings"}),e.jsx("p",{className:"text-gray-600",children:"Potlucks, farewell parties, and social meetups"})]}),e.jsxs("div",{className:"text-center p-6 bg-pink-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🎂"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Birthday Celebrations"}),e.jsx("p",{className:"text-gray-600",children:"Special birthday parties and celebrations"})]}),e.jsxs("div",{className:"text-center p-6 bg-yellow-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🏡"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Housewarming Events"}),e.jsx("p",{className:"text-gray-600",children:"Welcoming new homes and families"})]})]})]}),e.jsxs(Y,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Get In Touch"}),e.jsx("div",{className:"w-24 h-1 bg-blue-500 mx-auto mb-6"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"✉️"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Email"}),e.jsx(R,{onClick:s,variant:"outline",className:"mb-2",children:"lakeshoreculturalcommittee@gmail.com"}),e.jsx("p",{className:"text-sm text-gray-600",children:"For general inquiries and information"})]}),e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"📞"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Phone"}),e.jsx(R,{onClick:t,variant:"outline",className:"mb-2",children:"+1 647 973 5359"}),e.jsx("p",{className:"text-sm text-gray-600",children:"For urgent communications"})]}),e.jsxs("div",{className:"text-center p-6 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-4",children:"💬"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"WhatsApp"}),e.jsx(R,{onClick:a,variant:"outline",className:"mb-2",children:"Message Us"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Quick messaging for event coordination"})]})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:"📍"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Location"}),e.jsx("p",{className:"text-gray-700",children:"Bathurst–Lakeshore area, Toronto"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Serving the multicultural community of Toronto's west end"})]})]}),e.jsx(Y,{className:"p-8 bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Join Us?"}),e.jsx("p",{className:"text-xl mb-6 opacity-90",children:"Complete your profile and become part of our vibrant community. Start attending events, organizing activities, and building lasting friendships!"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Ve,{to:"/register",children:e.jsx(R,{className:"bg-white text-orange-600 hover:bg-gray-100 px-8 py-3 text-lg font-semibold",children:"Join the Community"})}),e.jsx(Ve,{to:"/login",children:e.jsx(R,{variant:"outline",className:"border-white text-white hover:bg-white hover:text-orange-600 px-8 py-3 text-lg font-semibold",children:"Sign In"})})]}),e.jsxs("p",{className:"text-sm mt-6 opacity-80",children:["Already have an account? ",e.jsx(Ve,{to:"/login",className:"underline hover:no-underline",children:"Sign in here"})]})]})}),e.jsxs(Y,{className:"p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Our Community"}),e.jsx("div",{className:"w-24 h-1 bg-orange-500 mx-auto mb-6"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-orange-600 mb-2",children:"5+"}),e.jsx("div",{className:"text-gray-600",children:"Years of Community"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"100+"}),e.jsx("div",{className:"text-gray-600",children:"Active Members"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:"50+"}),e.jsx("div",{className:"text-gray-600",children:"Events Organized"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600 mb-2",children:"∞"}),e.jsx("div",{className:"text-gray-600",children:"Memories Created"})]})]})]})]})]})},tt=({children:s,adminOnly:t=!1})=>{const{user:a,loading:r}=ve();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):a?t&&a.role!=="admin"?e.jsx(es,{to:"/dashboard",replace:!0}):e.jsx(e.Fragment,{children:s}):e.jsx(es,{to:"/login",replace:!0})},ws=({children:s})=>{const{user:t,loading:a,isRegistering:r}=ve();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):t&&!r&&window.location.pathname!=="/register"?e.jsx(es,{to:"/dashboard",replace:!0}):e.jsx(e.Fragment,{children:s})},Vl=({children:s})=>{const{user:t,logout:a}=ve(),r=async()=>{try{await a()}catch(i){console.error("Logout error:",i)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx(Ve,{to:"/info",className:"text-xl font-bold text-gray-900 hover:text-orange-600 transition-colors",children:"LCC Assemble"})}),e.jsx("div",{className:"flex items-center space-x-4",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Welcome, ",t.displayName]}),e.jsx(R,{variant:"outline",size:"sm",onClick:r,children:"Logout"})]})})]})})}),t&&e.jsx("nav",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("a",{href:"/info",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"About"}),e.jsx("a",{href:"/dashboard",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Dashboard"}),e.jsx("a",{href:"/events",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Events"}),e.jsx("a",{href:"/members",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Members"}),e.jsx("a",{href:"/profile",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Profile"}),t.role==="admin"&&e.jsx("a",{href:"/admin",className:"border-transparent text-red-500 hover:border-red-300 hover:text-red-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Admin"})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:s}),e.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8",children:e.jsx("p",{className:"text-center text-sm text-gray-500",children:"© 2025 LCC Assemble. Building community connections."})})}),e.jsx(Hi,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})};function Rl(){return e.jsx(ni,{children:e.jsx(Ar,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Vl,{children:e.jsxs(Pr,{children:[e.jsx(ke,{path:"/test",element:e.jsx(nl,{})}),e.jsx(ke,{path:"/info",element:e.jsx(Ll,{})}),e.jsx(ke,{path:"/login",element:e.jsx(ws,{children:e.jsx(Gi,{})})}),e.jsx(ke,{path:"/register",element:e.jsx(ws,{children:e.jsx(al,{})})}),e.jsx(ke,{path:"/forgot-password",element:e.jsx(ws,{children:e.jsx(rl,{})})}),e.jsx(ke,{path:"/email-verification",element:e.jsx(il,{})}),e.jsx(ke,{path:"/dashboard",element:e.jsx(tt,{children:e.jsx(gl,{})})}),e.jsx(ke,{path:"/events",element:e.jsx(tt,{children:e.jsx(pl,{})})}),e.jsx(ke,{path:"/events/create",element:e.jsx(tt,{children:e.jsx(Nl,{})})}),e.jsx(ke,{path:"/events/:eventId",element:e.jsx(tt,{children:e.jsx(jl,{})})}),e.jsx(ke,{path:"/events/:eventId/edit",element:e.jsx(tt,{children:e.jsx(_l,{})})}),e.jsx(ke,{path:"/members",element:e.jsx(tt,{children:e.jsx(El,{})})}),e.jsx(ke,{path:"/members/:memberId",element:e.jsx(tt,{children:e.jsx(Sl,{})})}),e.jsx(ke,{path:"/profile",element:e.jsx(tt,{children:e.jsx(Tl,{})})}),e.jsx(ke,{path:"/admin",element:e.jsx(tt,{adminOnly:!0,children:e.jsx(Il,{})})}),e.jsx(ke,{path:"/",element:e.jsx(es,{to:"/info",replace:!0})}),e.jsx(ke,{path:"*",element:e.jsxs(Y,{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The page you're looking for doesn't exist."}),e.jsx(R,{onClick:()=>window.history.back(),children:"Go Back"})]})})]})})})})}const jr=document.getElementById("root");if(!jr)throw new Error("Failed to find the root element");ks.createRoot(jr).render(e.jsx(te.StrictMode,{children:e.jsx(Rl,{})}));
//# sourceMappingURL=index-qoKWdo9h.js.map
