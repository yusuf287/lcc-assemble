import{r as w,a as ba,b as W}from"./vendor-Gm9i_4Ku.js";import{u as st,L as gt,a as va,B as ja,R as Na,b as Se,N as $t}from"./router-DUy0gjCK.js";import{g as wa,i as _a,a as ka,b as Ca,c as Ea,o as Sa,d as pe,u as Qe,s as Aa,e as ls,f as zt,h as Ta,j as Pa,k as Ia,l as us,m as Va,q as ne,n as _e,p as Oe,r as Je,w as Ke,t as Qt,x as wt,T as Ra,y as Oa,z as Fa,A as La}from"./firebase-SubOWaHa.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(i){if(i.ep)return;i.ep=!0;const n=r(i);fetch(i.href,n)}})();var Ar={exports:{}},Jt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=w,Ma=Symbol.for("react.element"),$a=Symbol.for("react.fragment"),za=Object.prototype.hasOwnProperty,Ua=Da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ba={key:!0,ref:!0,__self:!0,__source:!0};function Tr(t,e,r){var a,i={},n=null,l=null;r!==void 0&&(n=""+r),e.key!==void 0&&(n=""+e.key),e.ref!==void 0&&(l=e.ref);for(a in e)za.call(e,a)&&!Ba.hasOwnProperty(a)&&(i[a]=e[a]);if(t&&t.defaultProps)for(a in e=t.defaultProps,e)i[a]===void 0&&(i[a]=e[a]);return{$$typeof:Ma,type:t,key:n,ref:l,props:i,_owner:Ua.current}}Jt.Fragment=$a;Jt.jsx=Tr;Jt.jsxs=Tr;Ar.exports=Jt;var s=Ar.exports,ms={},Ys=ba;ms.createRoot=Ys.createRoot,ms.hydrateRoot=Ys.hydrateRoot;const Za={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"development",VITE_APP_TITLE:"LCC Assemble",VITE_APP_VERSION:"1.0.0",VITE_FIREBASE_API_KEY:"AIzaSyCg1TwctyoWuTijSYrZAhXJ3IAj47HGPPM",VITE_FIREBASE_APP_ID:"1:203524932489:web:0db75b2a40c9ba86061758",VITE_FIREBASE_AUTH_DOMAIN:"lcc-assemble-49d97.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-BYZGHSG9RP",VITE_FIREBASE_MESSAGING_SENDER_ID:"203524932489",VITE_FIREBASE_PROJECT_ID:"lcc-assemble-49d97",VITE_FIREBASE_STORAGE_BUCKET:"lcc-assemble-49d97.firebasestorage.app",VITE_SKIP_EMAIL_VERIFICATION:"true"},qa={apiKey:"AIzaSyCg1TwctyoWuTijSYrZAhXJ3IAj47HGPPM",authDomain:"lcc-assemble-49d97.firebaseapp.com",projectId:"lcc-assemble-49d97",storageBucket:"lcc-assemble-49d97.firebasestorage.app",messagingSenderId:"203524932489",appId:"1:203524932489:web:0db75b2a40c9ba86061758"},Wa=["VITE_FIREBASE_API_KEY","VITE_FIREBASE_AUTH_DOMAIN","VITE_FIREBASE_PROJECT_ID","VITE_FIREBASE_STORAGE_BUCKET","VITE_FIREBASE_MESSAGING_SENDER_ID","VITE_FIREBASE_APP_ID"],os=Wa.filter(t=>!Za[t]);if(os.length>0)throw console.error("Missing Firebase environment variables:",os),new Error(`Missing Firebase configuration: ${os.join(", ")}`);let St;const Gs=wa();Gs.length>0?(St=Gs[0],console.log("🔥 Using existing Firebase app instance")):(St=_a(qa),console.log("🔥 Created new Firebase app instance"));const at=ka(St),re=Ca(St),Ya=Ea(St),Pr=w.createContext(void 0),je=()=>{const t=w.useContext(Pr);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Ga=({children:t})=>{const[e,r]=w.useState(null),[a,i]=w.useState(!0),[n,l]=w.useState(null),o=async C=>{var g;const v=pe(re,"users",C.uid),_=await zt(v);if(_.exists()){const I=_.data();return{uid:C.uid,...I}}else{const I={uid:C.uid,email:C.email||"",displayName:C.displayName||((g=C.email)==null?void 0:g.split("@")[0])||"User",interests:[],dietaryPreferences:[],privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"pending",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date,updatedAt:new Date};return await us(v,I),I}};w.useEffect(()=>{const C=Sa(at,async v=>{try{if(v){const _=await o(v);r(_)}else r(null)}catch(_){console.error("Error in auth state change:",_),r(null)}finally{i(!1)}});return()=>C()},[]);const c=async(C,v)=>{try{l(null);const _=await Aa(at,C,v);if(!_.user.emailVerified)throw await ls(at),new Error("Please verify your email before logging in. Check your inbox for the verification link.");const g=await zt(pe(re,"users",_.user.uid));if(g.exists()&&g.data().status==="suspended")throw await ls(at),new Error("Your account has been suspended. Please contact an administrator.")}catch(_){console.error("Login error:",_);const g=_.code==="auth/user-not-found"?"No account found with this email address.":_.code==="auth/wrong-password"?"Incorrect password. Please try again.":_.code==="auth/invalid-email"?"Please enter a valid email address.":_.code==="auth/user-disabled"?"This account has been disabled.":_.code==="auth/too-many-requests"?"Too many failed login attempts. Please try again later.":_.message||"Login failed";throw l(g),new Error(g)}},u=async(C,v,_,g)=>{try{l(null),console.log("🔥 Starting registration process..."),console.log("📧 Email:",C),console.log("👤 Display Name:",_),console.log("🔥 Creating Firebase Auth user...");const I=await Pa(at,C,v);console.log("✅ Firebase Auth user created:",I.user.uid),console.log("🔥 Updating Firebase Auth profile..."),await Ia(I.user,{displayName:_}),console.log("✅ Firebase Auth profile updated"),console.log("🔥 Creating Firestore user document...");const se=pe(re,"users",I.user.uid),ae={uid:I.user.uid,email:C,displayName:_,phoneNumber:(g==null?void 0:g.phoneNumber)||"",whatsappNumber:(g==null?void 0:g.whatsappNumber)||"",bio:(g==null?void 0:g.bio)||"",interests:(g==null?void 0:g.interests)||[],dietaryPreferences:(g==null?void 0:g.dietaryPreferences)||[],address:(g==null?void 0:g.address)||{street:"",city:"",postalCode:""},privacy:(g==null?void 0:g.privacy)||{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"pending",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date,updatedAt:new Date};console.log("🔥 User data to save:",ae),await us(se,ae),console.log("✅ Firestore user document created"),console.log("🔥 Sending email verification..."),await Va(I.user),console.log("✅ Email verification sent"),console.log("🎉 Registration completed successfully!")}catch(I){console.error("❌ Registration error:",I),console.error("❌ Error code:",I.code),console.error("❌ Error message:",I.message);const se=I.code==="auth/email-already-in-use"?"This email is already registered. Please try logging in instead.":I.code==="auth/weak-password"?"Password is too weak. Please choose a stronger password.":I.code==="auth/invalid-email"?"Please enter a valid email address.":I.code==="permission-denied"?"Permission denied. Please check Firestore security rules.":I.code==="unavailable"?"Service temporarily unavailable. Please try again later.":I.message||"Registration failed. Please try again.";throw l(se),new Error(se)}},d=async()=>{try{await ls(at)}catch(C){throw console.error("Logout error:",C),new Error(C.message||"Logout failed")}},f=async C=>{try{await Ta(at,C)}catch(v){throw console.error("Password reset error:",v),new Error(v.message||"Password reset failed")}},h=async C=>{if(!e)throw new Error("No user logged in");try{const v=pe(re,"users",e.uid),_={...C,updatedAt:new Date};await Qe(v,_),r(g=>g?{...g,...C}:null)}catch(v){throw console.error("Profile update error:",v),new Error(v.message||"Profile update failed")}},R={user:e,loading:a,login:c,register:u,logout:d,resetPassword:f,updateProfile:h,signIn:c,isLoading:a,error:n,clearError:()=>l(null),userProfile:e,updateUserProfile:h};return s.jsx(Pr.Provider,{value:R,children:t})};let Ha={data:""},Qa=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Ha,Ja=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ka=/\/\*[^]*?\*\/|  +/g,Hs=/\n+/g,Ge=(t,e)=>{let r="",a="",i="";for(let n in t){let l=t[n];n[0]=="@"?n[1]=="i"?r=n+" "+l+";":a+=n[1]=="f"?Ge(l,n):n+"{"+Ge(l,n[1]=="k"?"":e)+"}":typeof l=="object"?a+=Ge(l,e?e.replace(/([^,])+/g,o=>n.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,o):o?o+" "+c:c)):n):l!=null&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ge.p?Ge.p(n,l):n+":"+l+";")}return r+(e&&i?e+"{"+i+"}":i)+a},$e={},Ir=t=>{if(typeof t=="object"){let e="";for(let r in t)e+=r+Ir(t[r]);return e}return t},Xa=(t,e,r,a,i)=>{let n=Ir(t),l=$e[n]||($e[n]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(n));if(!$e[l]){let c=n!==t?t:(u=>{let d,f,h=[{}];for(;d=Ja.exec(u.replace(Ka,""));)d[4]?h.shift():d[3]?(f=d[3].replace(Hs," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(Hs," ").trim();return h[0]})(t);$e[l]=Ge(i?{["@keyframes "+l]:c}:c,r?"":"."+l)}let o=r&&$e.g?$e.g:null;return r&&($e.g=$e[l]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})($e[l],e,a,o),l},ei=(t,e,r)=>t.reduce((a,i,n)=>{let l=e[n];if(l&&l.call){let o=l(r),c=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=c?"."+c:o&&typeof o=="object"?o.props?"":Ge(o,""):o===!1?"":o}return a+i+(l??"")},"");function Kt(t){let e=this||{},r=t.call?t(e.p):t;return Xa(r.unshift?r.raw?ei(r,[].slice.call(arguments,1),e.p):r.reduce((a,i)=>Object.assign(a,i&&i.call?i(e.p):i),{}):r,Qa(e.target),e.g,e.o,e.k)}let Vr,hs,fs;Kt.bind({g:1});let Ze=Kt.bind({k:1});function ti(t,e,r,a){Ge.p=e,Vr=t,hs=r,fs=a}function rt(t,e){let r=this||{};return function(){let a=arguments;function i(n,l){let o=Object.assign({},n),c=o.className||i.className;r.p=Object.assign({theme:hs&&hs()},o),r.o=/ *go\d+/.test(c),o.className=Kt.apply(r,a)+(c?" "+c:"");let u=t;return t[0]&&(u=o.as||t,delete o.as),fs&&u[0]&&fs(o),Vr(u,o)}return i}}var si=t=>typeof t=="function",Ut=(t,e)=>si(t)?t(e):t,ri=(()=>{let t=0;return()=>(++t).toString()})(),Rr=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),ai=20,Cs="default",Or=(t,e)=>{let{toastLimit:r}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,r)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===e.toast.id?{...l,...e.toast}:l)};case 2:let{toast:a}=e;return Or(t,{type:t.toasts.find(l=>l.id===a.id)?1:0,toast:a});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(l=>l.id===i||i===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let n=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+n}))}}},Mt=[],Fr={toasts:[],pausedAt:void 0,settings:{toastLimit:ai}},Fe={},Lr=(t,e=Cs)=>{Fe[e]=Or(Fe[e]||Fr,t),Mt.forEach(([r,a])=>{r===e&&a(Fe[e])})},Dr=t=>Object.keys(Fe).forEach(e=>Lr(t,e)),ii=t=>Object.keys(Fe).find(e=>Fe[e].toasts.some(r=>r.id===t)),Xt=(t=Cs)=>e=>{Lr(e,t)},ni={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},li=(t={},e=Cs)=>{let[r,a]=w.useState(Fe[e]||Fr),i=w.useRef(Fe[e]);w.useEffect(()=>(i.current!==Fe[e]&&a(Fe[e]),Mt.push([e,a]),()=>{let l=Mt.findIndex(([o])=>o===e);l>-1&&Mt.splice(l,1)}),[e]);let n=r.toasts.map(l=>{var o,c,u;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((o=t[l.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((c=t[l.type])==null?void 0:c.duration)||(t==null?void 0:t.duration)||ni[l.type],style:{...t.style,...(u=t[l.type])==null?void 0:u.style,...l.style}}});return{...r,toasts:n}},oi=(t,e="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...r,id:(r==null?void 0:r.id)||ri()}),Vt=t=>(e,r)=>{let a=oi(e,t,r);return Xt(a.toasterId||ii(a.id))({type:2,toast:a}),a.id},ge=(t,e)=>Vt("blank")(t,e);ge.error=Vt("error");ge.success=Vt("success");ge.loading=Vt("loading");ge.custom=Vt("custom");ge.dismiss=(t,e)=>{let r={type:3,toastId:t};e?Xt(e)(r):Dr(r)};ge.dismissAll=t=>ge.dismiss(void 0,t);ge.remove=(t,e)=>{let r={type:4,toastId:t};e?Xt(e)(r):Dr(r)};ge.removeAll=t=>ge.remove(void 0,t);ge.promise=(t,e,r)=>{let a=ge.loading(e.loading,{...r,...r==null?void 0:r.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let n=e.success?Ut(e.success,i):void 0;return n?ge.success(n,{id:a,...r,...r==null?void 0:r.success}):ge.dismiss(a),i}).catch(i=>{let n=e.error?Ut(e.error,i):void 0;n?ge.error(n,{id:a,...r,...r==null?void 0:r.error}):ge.dismiss(a)}),t};var ci=1e3,di=(t,e="default")=>{let{toasts:r,pausedAt:a}=li(t,e),i=w.useRef(new Map).current,n=w.useCallback((f,h=ci)=>{if(i.has(f))return;let N=setTimeout(()=>{i.delete(f),l({type:4,toastId:f})},h);i.set(f,N)},[]);w.useEffect(()=>{if(a)return;let f=Date.now(),h=r.map(N=>{if(N.duration===1/0)return;let F=(N.duration||0)+N.pauseDuration-(f-N.createdAt);if(F<0){N.visible&&ge.dismiss(N.id);return}return setTimeout(()=>ge.dismiss(N.id,e),F)});return()=>{h.forEach(N=>N&&clearTimeout(N))}},[r,a,e]);let l=w.useCallback(Xt(e),[e]),o=w.useCallback(()=>{l({type:5,time:Date.now()})},[l]),c=w.useCallback((f,h)=>{l({type:1,toast:{id:f,height:h}})},[l]),u=w.useCallback(()=>{a&&l({type:6,time:Date.now()})},[a,l]),d=w.useCallback((f,h)=>{let{reverseOrder:N=!1,gutter:F=8,defaultPosition:P}=h||{},L=r.filter(C=>(C.position||P)===(f.position||P)&&C.height),U=L.findIndex(C=>C.id===f.id),R=L.filter((C,v)=>v<U&&C.visible).length;return L.filter(C=>C.visible).slice(...N?[R+1]:[0,R]).reduce((C,v)=>C+(v.height||0)+F,0)},[r]);return w.useEffect(()=>{r.forEach(f=>{if(f.dismissed)n(f.id,f.removeDelay);else{let h=i.get(f.id);h&&(clearTimeout(h),i.delete(f.id))}})},[r,n]),{toasts:r,handlers:{updateHeight:c,startPause:o,endPause:u,calculateOffset:d}}},ui=Ze`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,mi=Ze`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hi=Ze`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,fi=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ui} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${mi} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${hi} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,gi=Ze`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,xi=rt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${gi} 1s linear infinite;
`,pi=Ze`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yi=Ze`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,bi=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pi} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yi} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vi=rt("div")`
  position: absolute;
`,ji=rt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ni=Ze`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wi=rt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ni} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,_i=({toast:t})=>{let{icon:e,type:r,iconTheme:a}=t;return e!==void 0?typeof e=="string"?w.createElement(wi,null,e):e:r==="blank"?null:w.createElement(ji,null,w.createElement(xi,{...a}),r!=="loading"&&w.createElement(vi,null,r==="error"?w.createElement(fi,{...a}):w.createElement(bi,{...a})))},ki=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ci=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Ei="0%{opacity:0;} 100%{opacity:1;}",Si="0%{opacity:1;} 100%{opacity:0;}",Ai=rt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ti=rt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Pi=(t,e)=>{let r=t.includes("top")?1:-1,[a,i]=Rr()?[Ei,Si]:[ki(r),Ci(r)];return{animation:e?`${Ze(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ze(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ii=w.memo(({toast:t,position:e,style:r,children:a})=>{let i=t.height?Pi(t.position||e||"top-center",t.visible):{opacity:0},n=w.createElement(_i,{toast:t}),l=w.createElement(Ti,{...t.ariaProps},Ut(t.message,t));return w.createElement(Ai,{className:t.className,style:{...i,...r,...t.style}},typeof a=="function"?a({icon:n,message:l}):w.createElement(w.Fragment,null,n,l))});ti(w.createElement);var Vi=({id:t,className:e,style:r,onHeightUpdate:a,children:i})=>{let n=w.useCallback(l=>{if(l){let o=()=>{let c=l.getBoundingClientRect().height;a(t,c)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return w.createElement("div",{ref:n,className:e,style:r},i)},Ri=(t,e)=>{let r=t.includes("top"),a=r?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Rr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(r?1:-1)}px)`,...a,...i}},Oi=Kt`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Lt=16,Fi=({reverseOrder:t,position:e="top-center",toastOptions:r,gutter:a,children:i,toasterId:n,containerStyle:l,containerClassName:o})=>{let{toasts:c,handlers:u}=di(r,n);return w.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:Lt,left:Lt,right:Lt,bottom:Lt,pointerEvents:"none",...l},className:o,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map(d=>{let f=d.position||e,h=u.calculateOffset(d,{reverseOrder:t,gutter:a,defaultPosition:e}),N=Ri(f,h);return w.createElement(Vi,{id:d.id,key:d.id,onHeightUpdate:u.updateHeight,className:d.visible?Oi:"",style:N},d.type==="custom"?Ut(d.message,d):i?i(d):w.createElement(Ii,{toast:d,position:f}))}))},G=ge;const z=({variant:t="primary",size:e="md",isLoading:r=!1,disabled:a,className:i,children:n,...l})=>{const o="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",c={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"},u={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},d=[o,c[t],u[e],r&&"cursor-wait",i].filter(Boolean).join(" ");return s.jsxs("button",{className:d,disabled:a||r,...l,children:[r&&s.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})},te=({type:t="text",name:e,value:r,onChange:a,placeholder:i,required:n=!1,disabled:l=!1,error:o,label:c,helperText:u,className:d=""})=>{const F=`block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 ${o?"border-red-300 focus:ring-red-500 focus:border-red-500":""} ${l?"bg-gray-100 cursor-not-allowed":""} ${d}`.trim();return s.jsxs("div",{className:"space-y-1",children:[c&&s.jsx("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:c}),s.jsx("input",{type:t,name:e,id:e,value:r,onChange:a,placeholder:i,required:n,disabled:l,className:F}),o&&s.jsx("p",{className:"text-sm text-red-600",children:o}),u&&!o&&s.jsx("p",{className:"text-sm text-gray-500",children:u})]})},q=({children:t,className:e="",padding:r="md",shadow:a="md"})=>{const i="bg-white rounded-lg border border-gray-200",n={none:"",sm:"p-4",md:"p-6",lg:"p-8"},l={none:"",sm:"shadow-sm",md:"shadow-md",lg:"shadow-lg"},o=[i,n[r],l[a],e].filter(Boolean).join(" ");return s.jsx("div",{className:o,children:t})},At=({variant:t="info",type:e,message:r,children:a,className:i=""})=>{const c=`p-4 rounded-md ${{success:"bg-green-50 border border-green-200 text-green-800",error:"bg-red-50 border border-red-200 text-red-800",warning:"bg-yellow-50 border border-yellow-200 text-yellow-800",info:"bg-blue-50 border border-blue-200 text-blue-800"}[e||t]} ${i}`.trim();return s.jsx("div",{className:c,role:"alert",children:r||a})},Li=()=>{const[t,e]=w.useState(""),[r,a]=w.useState(""),[i,n]=w.useState(!1),[l,o]=w.useState(""),{login:c}=je(),u=st(),d=async f=>{f.preventDefault(),o(""),n(!0);try{await c(t,r),G.success("Login successful!"),u("/dashboard")}catch(h){console.error("Login error:",h);const N=h.message||"Login failed. Please try again.";o(N),G.error(N)}finally{n(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to LCC Assemble"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Connect with your community"})]}),s.jsx(q,{className:"p-8",children:s.jsxs("form",{className:"space-y-6",onSubmit:d,children:[l&&s.jsx(At,{variant:"error",children:l}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),s.jsx("div",{className:"mt-1",children:s.jsx(te,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:f=>e(f.target.value),placeholder:"Enter your email"})})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),s.jsx("div",{className:"mt-1",children:s.jsx(te,{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:f=>a(f.target.value),placeholder:"Enter your password"})})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm",children:s.jsx(gt,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Don't have an account? Sign up"})})}),s.jsx("div",{children:s.jsx(z,{type:"submit",className:"w-full",disabled:i,isLoading:i,children:i?"Signing in...":"Sign in"})})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["By signing in, you agree to our"," ",s.jsx(gt,{to:"/terms",className:"font-medium text-blue-600 hover:text-blue-500",children:"Terms of Service"})," ","and"," ",s.jsx(gt,{to:"/privacy",className:"font-medium text-blue-600 hover:text-blue-500",children:"Privacy Policy"})]})})]})})};var Rt=t=>t.type==="checkbox",nt=t=>t instanceof Date,xe=t=>t==null;const Mr=t=>typeof t=="object";var me=t=>!xe(t)&&!Array.isArray(t)&&Mr(t)&&!nt(t),$r=t=>me(t)&&t.target?Rt(t.target)?t.target.checked:t.target.value:t,Di=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,zr=(t,e)=>t.has(Di(e)),Mi=t=>{const e=t.constructor&&t.constructor.prototype;return me(e)&&e.hasOwnProperty("isPrototypeOf")},Es=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function he(t){let e;const r=Array.isArray(t),a=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Es&&(t instanceof Blob||a))&&(r||me(t)))if(e=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!Mi(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=he(t[i]));else return t;return e}var es=t=>/^\w*$/.test(t),oe=t=>t===void 0,Ss=t=>Array.isArray(t)?t.filter(Boolean):[],As=t=>Ss(t.replace(/["|']|\]/g,"").split(/\.|\[/)),T=(t,e,r)=>{if(!e||!me(t))return r;const a=(es(e)?[e]:As(e)).reduce((i,n)=>xe(i)?i:i[n],t);return oe(a)||a===t?oe(t[e])?r:t[e]:a},Ne=t=>typeof t=="boolean",ee=(t,e,r)=>{let a=-1;const i=es(e)?[e]:As(e),n=i.length,l=n-1;for(;++a<n;){const o=i[a];let c=r;if(a!==l){const u=t[o];c=me(u)||Array.isArray(u)?u:isNaN(+i[a+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=c,t=t[o]}};const Bt={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Pe={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ze={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ur=W.createContext(null);Ur.displayName="HookFormContext";const Ts=()=>W.useContext(Ur);var Br=(t,e,r,a=!0)=>{const i={defaultValues:e._defaultValues};for(const n in t)Object.defineProperty(i,n,{get:()=>{const l=n;return e._proxyFormState[l]!==Pe.all&&(e._proxyFormState[l]=!a||Pe.all),r&&(r[l]=!0),t[l]}});return i};const Ps=typeof window<"u"?W.useLayoutEffect:W.useEffect;function $i(t){const e=Ts(),{control:r=e.control,disabled:a,name:i,exact:n}=t||{},[l,o]=W.useState(r._formState),c=W.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ps(()=>r._subscribe({name:i,formState:c.current,exact:n,callback:u=>{!a&&o({...r._formState,...u})}}),[i,a,n]),W.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),W.useMemo(()=>Br(l,r,c.current,!1),[l,r])}var we=t=>typeof t=="string",Zr=(t,e,r,a,i)=>we(t)?(a&&e.watch.add(t),T(r,t,i)):Array.isArray(t)?t.map(n=>(a&&e.watch.add(n),T(r,n))):(a&&(e.watchAll=!0),r),gs=t=>xe(t)||!Mr(t);function Ue(t,e,r=new WeakSet){if(gs(t)||gs(e))return t===e;if(nt(t)&&nt(e))return t.getTime()===e.getTime();const a=Object.keys(t),i=Object.keys(e);if(a.length!==i.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const n of a){const l=t[n];if(!i.includes(n))return!1;if(n!=="ref"){const o=e[n];if(nt(l)&&nt(o)||me(l)&&me(o)||Array.isArray(l)&&Array.isArray(o)?!Ue(l,o,r):l!==o)return!1}}return!0}function zi(t){const e=Ts(),{control:r=e.control,name:a,defaultValue:i,disabled:n,exact:l,compute:o}=t||{},c=W.useRef(i),u=W.useRef(o),d=W.useRef(void 0);u.current=o;const f=W.useMemo(()=>r._getWatch(a,c.current),[r,a]),[h,N]=W.useState(u.current?u.current(f):f);return Ps(()=>r._subscribe({name:a,formState:{values:!0},exact:l,callback:F=>{if(!n){const P=Zr(a,r._names,F.values||r._formValues,!1,c.current);if(u.current){const L=u.current(P);Ue(L,d.current)||(N(L),d.current=L)}else N(P)}}}),[r,n,a,l]),W.useEffect(()=>r._removeUnmounted()),h}function Ui(t){const e=Ts(),{name:r,disabled:a,control:i=e.control,shouldUnregister:n,defaultValue:l}=t,o=zr(i._names.array,r),c=W.useMemo(()=>T(i._formValues,r,T(i._defaultValues,r,l)),[i,r,l]),u=zi({control:i,name:r,defaultValue:c,exact:!0}),d=$i({control:i,name:r,exact:!0}),f=W.useRef(t),h=W.useRef(void 0),N=W.useRef(i.register(r,{...t.rules,value:u,...Ne(t.disabled)?{disabled:t.disabled}:{}}));f.current=t;const F=W.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!T(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!T(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!T(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!T(d.validatingFields,r)},error:{enumerable:!0,get:()=>T(d.errors,r)}}),[d,r]),P=W.useCallback(C=>N.current.onChange({target:{value:$r(C),name:r},type:Bt.CHANGE}),[r]),L=W.useCallback(()=>N.current.onBlur({target:{value:T(i._formValues,r),name:r},type:Bt.BLUR}),[r,i._formValues]),U=W.useCallback(C=>{const v=T(i._fields,r);v&&C&&(v._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:_=>C.setCustomValidity(_),reportValidity:()=>C.reportValidity()})},[i._fields,r]),R=W.useMemo(()=>({name:r,value:u,...Ne(a)||d.disabled?{disabled:d.disabled||a}:{},onChange:P,onBlur:L,ref:U}),[r,a,d.disabled,P,L,U,u]);return W.useEffect(()=>{const C=i._options.shouldUnregister||n,v=h.current;v&&v!==r&&!o&&i.unregister(v),i.register(r,{...f.current.rules,...Ne(f.current.disabled)?{disabled:f.current.disabled}:{}});const _=(g,I)=>{const se=T(i._fields,g);se&&se._f&&(se._f.mount=I)};if(_(r,!0),C){const g=he(T(i._options.defaultValues,r));ee(i._defaultValues,r,g),oe(T(i._formValues,r))&&ee(i._formValues,r,g)}return!o&&i.register(r),h.current=r,()=>{(o?C&&!i._state.action:C)?i.unregister(r):_(r,!1)}},[r,i,o,n]),W.useEffect(()=>{i._setDisabledField({disabled:a,name:r})},[a,r,i]),W.useMemo(()=>({field:R,formState:d,fieldState:F}),[R,d,F])}const Te=t=>t.render(Ui(t));var Is=(t,e,r,a,i)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[a]:i||!0}}:{},kt=t=>Array.isArray(t)?t:[t],Qs=()=>{let t=[];return{get observers(){return t},next:i=>{for(const n of t)n.next&&n.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(n=>n!==i)}}),unsubscribe:()=>{t=[]}}};function qr(t,e){const r={};for(const a in t)if(t.hasOwnProperty(a)){const i=t[a],n=e[a];if(i&&me(i)&&n){const l=qr(i,n);me(l)&&(r[a]=l)}else t[a]&&(r[a]=n)}return r}var be=t=>me(t)&&!Object.keys(t).length,Vs=t=>t.type==="file",Ie=t=>typeof t=="function",Zt=t=>{if(!Es)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Wr=t=>t.type==="select-multiple",Rs=t=>t.type==="radio",Bi=t=>Rs(t)||Rt(t),cs=t=>Zt(t)&&t.isConnected;function Zi(t,e){const r=e.slice(0,-1).length;let a=0;for(;a<r;)t=oe(t)?a++:t[e[a++]];return t}function qi(t){for(const e in t)if(t.hasOwnProperty(e)&&!oe(t[e]))return!1;return!0}function de(t,e){const r=Array.isArray(e)?e:es(e)?[e]:As(e),a=r.length===1?t:Zi(t,r),i=r.length-1,n=r[i];return a&&delete a[n],i!==0&&(me(a)&&be(a)||Array.isArray(a)&&qi(a))&&de(t,r.slice(0,-1)),t}var Wi=t=>{for(const e in t)if(Ie(t[e]))return!0;return!1};function Yr(t){return Array.isArray(t)||me(t)&&!Wi(t)}function xs(t,e={}){for(const r in t)Yr(t[r])?(e[r]=Array.isArray(t[r])?[]:{},xs(t[r],e[r])):xe(t[r])||(e[r]=!0);return e}function mt(t,e,r){r||(r=xs(e));for(const a in t)Yr(t[a])?oe(e)||gs(r[a])?r[a]=xs(t[a],Array.isArray(t[a])?[]:{}):mt(t[a],xe(e)?{}:e[a],r[a]):r[a]=!Ue(t[a],e[a]);return r}const Js={value:!1,isValid:!1},Ks={value:!0,isValid:!0};var Gr=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!oe(t[0].attributes.value)?oe(t[0].value)||t[0].value===""?Ks:{value:t[0].value,isValid:!0}:Ks:Js}return Js},Hr=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:a})=>oe(t)?t:e?t===""?NaN:t&&+t:r&&we(t)?new Date(t):a?a(t):t;const Xs={isValid:!1,value:null};var Qr=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Xs):Xs;function er(t){const e=t.ref;return Vs(e)?e.files:Rs(e)?Qr(t.refs).value:Wr(e)?[...e.selectedOptions].map(({value:r})=>r):Rt(e)?Gr(t.refs).value:Hr(oe(e.value)?t.ref.value:e.value,t)}var Yi=(t,e,r,a)=>{const i={};for(const n of t){const l=T(e,n);l&&ee(i,n,l._f)}return{criteriaMode:r,names:[...t],fields:i,shouldUseNativeValidation:a}},qt=t=>t instanceof RegExp,Nt=t=>oe(t)?t:qt(t)?t.source:me(t)?qt(t.value)?t.value.source:t.value:t,tr=t=>({isOnSubmit:!t||t===Pe.onSubmit,isOnBlur:t===Pe.onBlur,isOnChange:t===Pe.onChange,isOnAll:t===Pe.all,isOnTouch:t===Pe.onTouched});const sr="AsyncFunction";var Gi=t=>!!t&&!!t.validate&&!!(Ie(t.validate)&&t.validate.constructor.name===sr||me(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===sr)),Hi=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),rr=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const Ct=(t,e,r,a)=>{for(const i of r||Object.keys(t)){const n=T(t,i);if(n){const{_f:l,...o}=n;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!a)return!0;if(l.ref&&e(l.ref,l.name)&&!a)return!0;if(Ct(o,e))break}else if(me(o)&&Ct(o,e))break}}};function ar(t,e,r){const a=T(t,r);if(a||es(r))return{error:a,name:r};const i=r.split(".");for(;i.length;){const n=i.join("."),l=T(e,n),o=T(t,n);if(l&&!Array.isArray(l)&&r!==n)return{name:r};if(o&&o.type)return{name:n,error:o};if(o&&o.root&&o.root.type)return{name:`${n}.root`,error:o.root};i.pop()}return{name:r}}var Qi=(t,e,r,a)=>{r(t);const{name:i,...n}=t;return be(n)||Object.keys(n).length>=Object.keys(e).length||Object.keys(n).find(l=>e[l]===(!a||Pe.all))},Ji=(t,e,r)=>!t||!e||t===e||kt(t).some(a=>a&&(r?a===e:a.startsWith(e)||e.startsWith(a))),Ki=(t,e,r,a,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(e||t):(r?a.isOnBlur:i.isOnBlur)?!t:(r?a.isOnChange:i.isOnChange)?t:!0,Xi=(t,e)=>!Ss(T(t,e)).length&&de(t,e),en=(t,e,r)=>{const a=kt(T(t,r));return ee(a,"root",e[r]),ee(t,r,a),t};function ir(t,e,r="validate"){if(we(t)||Array.isArray(t)&&t.every(we)||Ne(t)&&!t)return{type:r,message:we(t)?t:"",ref:e}}var dt=t=>me(t)&&!qt(t)?t:{value:t,message:""},nr=async(t,e,r,a,i,n)=>{const{ref:l,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:N,validate:F,name:P,valueAsNumber:L,mount:U}=t._f,R=T(r,P);if(!U||e.has(P))return{};const C=o?o[0]:l,v=y=>{i&&C.reportValidity&&(C.setCustomValidity(Ne(y)?"":y||""),C.reportValidity())},_={},g=Rs(l),I=Rt(l),se=g||I,ae=(L||Vs(l))&&oe(l.value)&&oe(R)||Zt(l)&&l.value===""||R===""||Array.isArray(R)&&!R.length,j=Is.bind(null,P,a,_),p=(y,k,K,ce=ze.maxLength,ye=ze.minLength)=>{const Re=y?k:K;_[P]={type:y?ce:ye,message:Re,ref:l,...j(y?ce:ye,Re)}};if(n?!Array.isArray(R)||!R.length:c&&(!se&&(ae||xe(R))||Ne(R)&&!R||I&&!Gr(o).isValid||g&&!Qr(o).isValid)){const{value:y,message:k}=we(c)?{value:!!c,message:c}:dt(c);if(y&&(_[P]={type:ze.required,message:k,ref:C,...j(ze.required,k)},!a))return v(k),_}if(!ae&&(!xe(f)||!xe(h))){let y,k;const K=dt(h),ce=dt(f);if(!xe(R)&&!isNaN(R)){const ye=l.valueAsNumber||R&&+R;xe(K.value)||(y=ye>K.value),xe(ce.value)||(k=ye<ce.value)}else{const ye=l.valueAsDate||new Date(R),Re=Ot=>new Date(new Date().toDateString()+" "+Ot),jt=l.type=="time",ct=l.type=="week";we(K.value)&&R&&(y=jt?Re(R)>Re(K.value):ct?R>K.value:ye>new Date(K.value)),we(ce.value)&&R&&(k=jt?Re(R)<Re(ce.value):ct?R<ce.value:ye<new Date(ce.value))}if((y||k)&&(p(!!y,K.message,ce.message,ze.max,ze.min),!a))return v(_[P].message),_}if((u||d)&&!ae&&(we(R)||n&&Array.isArray(R))){const y=dt(u),k=dt(d),K=!xe(y.value)&&R.length>+y.value,ce=!xe(k.value)&&R.length<+k.value;if((K||ce)&&(p(K,y.message,k.message),!a))return v(_[P].message),_}if(N&&!ae&&we(R)){const{value:y,message:k}=dt(N);if(qt(y)&&!R.match(y)&&(_[P]={type:ze.pattern,message:k,ref:l,...j(ze.pattern,k)},!a))return v(k),_}if(F){if(Ie(F)){const y=await F(R,r),k=ir(y,C);if(k&&(_[P]={...k,...j(ze.validate,k.message)},!a))return v(k.message),_}else if(me(F)){let y={};for(const k in F){if(!be(y)&&!a)break;const K=ir(await F[k](R,r),C,k);K&&(y={...K,...j(k,K.message)},v(K.message),a&&(_[P]=y))}if(!be(y)&&(_[P]={ref:C,...y},!a))return _}}return v(!0),_};const tn={mode:Pe.onSubmit,reValidateMode:Pe.onChange,shouldFocusError:!0};function sn(t={}){let e={...tn,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ie(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},a={},i=me(e.defaultValues)||me(e.values)?he(e.defaultValues||e.values)||{}:{},n=e.shouldUnregister?{}:he(i),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:Qs(),state:Qs()},N=e.criteriaMode===Pe.all,F=m=>x=>{clearTimeout(u),u=setTimeout(m,x)},P=async m=>{if(!e.disabled&&(d.isValid||f.isValid||m)){const x=e.resolver?be((await I()).errors):await ae(a,!0);x!==r.isValid&&h.state.next({isValid:x})}},L=(m,x)=>{!e.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((m||Array.from(o.mount)).forEach(b=>{b&&(x?ee(r.validatingFields,b,x):de(r.validatingFields,b))}),h.state.next({validatingFields:r.validatingFields,isValidating:!be(r.validatingFields)}))},U=(m,x=[],b,O,A=!0,S=!0)=>{if(O&&b&&!e.disabled){if(l.action=!0,S&&Array.isArray(T(a,m))){const $=b(T(a,m),O.argA,O.argB);A&&ee(a,m,$)}if(S&&Array.isArray(T(r.errors,m))){const $=b(T(r.errors,m),O.argA,O.argB);A&&ee(r.errors,m,$),Xi(r.errors,m)}if((d.touchedFields||f.touchedFields)&&S&&Array.isArray(T(r.touchedFields,m))){const $=b(T(r.touchedFields,m),O.argA,O.argB);A&&ee(r.touchedFields,m,$)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=mt(i,n)),h.state.next({name:m,isDirty:p(m,x),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ee(n,m,x)},R=(m,x)=>{ee(r.errors,m,x),h.state.next({errors:r.errors})},C=m=>{r.errors=m,h.state.next({errors:r.errors,isValid:!1})},v=(m,x,b,O)=>{const A=T(a,m);if(A){const S=T(n,m,oe(b)?T(i,m):b);oe(S)||O&&O.defaultChecked||x?ee(n,m,x?S:er(A._f)):K(m,S),l.mount&&P()}},_=(m,x,b,O,A)=>{let S=!1,$=!1;const X={name:m};if(!e.disabled){if(!b||O){(d.isDirty||f.isDirty)&&($=r.isDirty,r.isDirty=X.isDirty=p(),S=$!==X.isDirty);const ie=Ue(T(i,m),x);$=!!T(r.dirtyFields,m),ie?de(r.dirtyFields,m):ee(r.dirtyFields,m,!0),X.dirtyFields=r.dirtyFields,S=S||(d.dirtyFields||f.dirtyFields)&&$!==!ie}if(b){const ie=T(r.touchedFields,m);ie||(ee(r.touchedFields,m,b),X.touchedFields=r.touchedFields,S=S||(d.touchedFields||f.touchedFields)&&ie!==b)}S&&A&&h.state.next(X)}return S?X:{}},g=(m,x,b,O)=>{const A=T(r.errors,m),S=(d.isValid||f.isValid)&&Ne(x)&&r.isValid!==x;if(e.delayError&&b?(c=F(()=>R(m,b)),c(e.delayError)):(clearTimeout(u),c=null,b?ee(r.errors,m,b):de(r.errors,m)),(b?!Ue(A,b):A)||!be(O)||S){const $={...O,...S&&Ne(x)?{isValid:x}:{},errors:r.errors,name:m};r={...r,...$},h.state.next($)}},I=async m=>{L(m,!0);const x=await e.resolver(n,e.context,Yi(m||o.mount,a,e.criteriaMode,e.shouldUseNativeValidation));return L(m),x},se=async m=>{const{errors:x}=await I(m);if(m)for(const b of m){const O=T(x,b);O?ee(r.errors,b,O):de(r.errors,b)}else r.errors=x;return x},ae=async(m,x,b={valid:!0})=>{for(const O in m){const A=m[O];if(A){const{_f:S,...$}=A;if(S){const X=o.array.has(S.name),ie=A._f&&Gi(A._f);ie&&d.validatingFields&&L([S.name],!0);const Ee=await nr(A,o.disabled,n,N,e.shouldUseNativeValidation&&!x,X);if(ie&&d.validatingFields&&L([S.name]),Ee[S.name]&&(b.valid=!1,x))break;!x&&(T(Ee,S.name)?X?en(r.errors,Ee,S.name):ee(r.errors,S.name,Ee[S.name]):de(r.errors,S.name))}!be($)&&await ae($,x,b)}}return b.valid},j=()=>{for(const m of o.unMount){const x=T(a,m);x&&(x._f.refs?x._f.refs.every(b=>!cs(b)):!cs(x._f.ref))&&ss(m)}o.unMount=new Set},p=(m,x)=>!e.disabled&&(m&&x&&ee(n,m,x),!Ue(Ot(),i)),y=(m,x,b)=>Zr(m,o,{...l.mount?n:oe(x)?i:we(m)?{[m]:x}:x},b,x),k=m=>Ss(T(l.mount?n:i,m,e.shouldUnregister?T(i,m,[]):[])),K=(m,x,b={})=>{const O=T(a,m);let A=x;if(O){const S=O._f;S&&(!S.disabled&&ee(n,m,Hr(x,S)),A=Zt(S.ref)&&xe(x)?"":x,Wr(S.ref)?[...S.ref.options].forEach($=>$.selected=A.includes($.value)):S.refs?Rt(S.ref)?S.refs.forEach($=>{(!$.defaultChecked||!$.disabled)&&(Array.isArray(A)?$.checked=!!A.find(X=>X===$.value):$.checked=A===$.value||!!A)}):S.refs.forEach($=>$.checked=$.value===A):Vs(S.ref)?S.ref.value="":(S.ref.value=A,S.ref.type||h.state.next({name:m,values:he(n)})))}(b.shouldDirty||b.shouldTouch)&&_(m,A,b.shouldTouch,b.shouldDirty,!0),b.shouldValidate&&ct(m)},ce=(m,x,b)=>{for(const O in x){if(!x.hasOwnProperty(O))return;const A=x[O],S=m+"."+O,$=T(a,S);(o.array.has(m)||me(A)||$&&!$._f)&&!nt(A)?ce(S,A,b):K(S,A,b)}},ye=(m,x,b={})=>{const O=T(a,m),A=o.array.has(m),S=he(x);ee(n,m,S),A?(h.array.next({name:m,values:he(n)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&b.shouldDirty&&h.state.next({name:m,dirtyFields:mt(i,n),isDirty:p(m,S)})):O&&!O._f&&!xe(S)?ce(m,S,b):K(m,S,b),rr(m,o)&&h.state.next({...r,name:m}),h.state.next({name:l.mount?m:void 0,values:he(n)})},Re=async m=>{l.mount=!0;const x=m.target;let b=x.name,O=!0;const A=T(a,b),S=ie=>{O=Number.isNaN(ie)||nt(ie)&&isNaN(ie.getTime())||Ue(ie,T(n,b,ie))},$=tr(e.mode),X=tr(e.reValidateMode);if(A){let ie,Ee;const Ft=x.type?er(A._f):$r(m),We=m.type===Bt.BLUR||m.type===Bt.FOCUS_OUT,xa=!Hi(A._f)&&!e.resolver&&!T(r.errors,b)&&!A._f.deps||Ki(We,T(r.touchedFields,b),r.isSubmitted,X,$),is=rr(b,o,We);ee(n,b,Ft),We?(!x||!x.readOnly)&&(A._f.onBlur&&A._f.onBlur(m),c&&c(0)):A._f.onChange&&A._f.onChange(m);const ns=_(b,Ft,We),pa=!be(ns)||is;if(!We&&h.state.next({name:b,type:m.type,values:he(n)}),xa)return(d.isValid||f.isValid)&&(e.mode==="onBlur"?We&&P():We||P()),pa&&h.state.next({name:b,...is?{}:ns});if(!We&&is&&h.state.next({...r}),e.resolver){const{errors:qs}=await I([b]);if(S(Ft),O){const ya=ar(r.errors,a,b),Ws=ar(qs,a,ya.name||b);ie=Ws.error,b=Ws.name,Ee=be(qs)}}else L([b],!0),ie=(await nr(A,o.disabled,n,N,e.shouldUseNativeValidation))[b],L([b]),S(Ft),O&&(ie?Ee=!1:(d.isValid||f.isValid)&&(Ee=await ae(a,!0)));O&&(A._f.deps&&(!Array.isArray(A._f.deps)||A._f.deps.length>0)&&ct(A._f.deps),g(b,Ee,ie,ns))}},jt=(m,x)=>{if(T(r.errors,x)&&m.focus)return m.focus(),1},ct=async(m,x={})=>{let b,O;const A=kt(m);if(e.resolver){const S=await se(oe(m)?m:A);b=be(S),O=m?!A.some($=>T(S,$)):b}else m?(O=(await Promise.all(A.map(async S=>{const $=T(a,S);return await ae($&&$._f?{[S]:$}:$)}))).every(Boolean),!(!O&&!r.isValid)&&P()):O=b=await ae(a);return h.state.next({...!we(m)||(d.isValid||f.isValid)&&b!==r.isValid?{}:{name:m},...e.resolver||!m?{isValid:b}:{},errors:r.errors}),x.shouldFocus&&!O&&Ct(a,jt,m?A:o.mount),O},Ot=(m,x)=>{let b={...l.mount?n:i};return x&&(b=qr(x.dirtyFields?r.dirtyFields:r.touchedFields,b)),oe(m)?b:we(m)?T(b,m):m.map(O=>T(b,O))},Ls=(m,x)=>({invalid:!!T((x||r).errors,m),isDirty:!!T((x||r).dirtyFields,m),error:T((x||r).errors,m),isValidating:!!T(r.validatingFields,m),isTouched:!!T((x||r).touchedFields,m)}),ca=m=>{m&&kt(m).forEach(x=>de(r.errors,x)),h.state.next({errors:m?r.errors:{}})},Ds=(m,x,b)=>{const O=(T(a,m,{_f:{}})._f||{}).ref,A=T(r.errors,m)||{},{ref:S,message:$,type:X,...ie}=A;ee(r.errors,m,{...ie,...x,ref:O}),h.state.next({name:m,errors:r.errors,isValid:!1}),b&&b.shouldFocus&&O&&O.focus&&O.focus()},da=(m,x)=>Ie(m)?h.state.subscribe({next:b=>"values"in b&&m(y(void 0,x),b)}):y(m,x,!0),Ms=m=>h.state.subscribe({next:x=>{Ji(m.name,x.name,m.exact)&&Qi(x,m.formState||d,ga,m.reRenderRoot)&&m.callback({values:{...n},...r,...x,defaultValues:i})}}).unsubscribe,ua=m=>(l.mount=!0,f={...f,...m.formState},Ms({...m,formState:f})),ss=(m,x={})=>{for(const b of m?kt(m):o.mount)o.mount.delete(b),o.array.delete(b),x.keepValue||(de(a,b),de(n,b)),!x.keepError&&de(r.errors,b),!x.keepDirty&&de(r.dirtyFields,b),!x.keepTouched&&de(r.touchedFields,b),!x.keepIsValidating&&de(r.validatingFields,b),!e.shouldUnregister&&!x.keepDefaultValue&&de(i,b);h.state.next({values:he(n)}),h.state.next({...r,...x.keepDirty?{isDirty:p()}:{}}),!x.keepIsValid&&P()},$s=({disabled:m,name:x})=>{(Ne(m)&&l.mount||m||o.disabled.has(x))&&(m?o.disabled.add(x):o.disabled.delete(x))},rs=(m,x={})=>{let b=T(a,m);const O=Ne(x.disabled)||Ne(e.disabled);return ee(a,m,{...b||{},_f:{...b&&b._f?b._f:{ref:{name:m}},name:m,mount:!0,...x}}),o.mount.add(m),b?$s({disabled:Ne(x.disabled)?x.disabled:e.disabled,name:m}):v(m,!0,x.value),{...O?{disabled:x.disabled||e.disabled}:{},...e.progressive?{required:!!x.required,min:Nt(x.min),max:Nt(x.max),minLength:Nt(x.minLength),maxLength:Nt(x.maxLength),pattern:Nt(x.pattern)}:{},name:m,onChange:Re,onBlur:Re,ref:A=>{if(A){rs(m,x),b=T(a,m);const S=oe(A.value)&&A.querySelectorAll&&A.querySelectorAll("input,select,textarea")[0]||A,$=Bi(S),X=b._f.refs||[];if($?X.find(ie=>ie===S):S===b._f.ref)return;ee(a,m,{_f:{...b._f,...$?{refs:[...X.filter(cs),S,...Array.isArray(T(i,m))?[{}]:[]],ref:{type:S.type,name:m}}:{ref:S}}}),v(m,!1,void 0,S)}else b=T(a,m,{}),b._f&&(b._f.mount=!1),(e.shouldUnregister||x.shouldUnregister)&&!(zr(o.array,m)&&l.action)&&o.unMount.add(m)}}},as=()=>e.shouldFocusError&&Ct(a,jt,o.mount),ma=m=>{Ne(m)&&(h.state.next({disabled:m}),Ct(a,(x,b)=>{const O=T(a,b);O&&(x.disabled=O._f.disabled||m,Array.isArray(O._f.refs)&&O._f.refs.forEach(A=>{A.disabled=O._f.disabled||m}))},0,!1))},zs=(m,x)=>async b=>{let O;b&&(b.preventDefault&&b.preventDefault(),b.persist&&b.persist());let A=he(n);if(h.state.next({isSubmitting:!0}),e.resolver){const{errors:S,values:$}=await I();r.errors=S,A=he($)}else await ae(a);if(o.disabled.size)for(const S of o.disabled)de(A,S);if(de(r.errors,"root"),be(r.errors)){h.state.next({errors:{}});try{await m(A,b)}catch(S){O=S}}else x&&await x({...r.errors},b),as(),setTimeout(as);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:be(r.errors)&&!O,submitCount:r.submitCount+1,errors:r.errors}),O)throw O},ha=(m,x={})=>{T(a,m)&&(oe(x.defaultValue)?ye(m,he(T(i,m))):(ye(m,x.defaultValue),ee(i,m,he(x.defaultValue))),x.keepTouched||de(r.touchedFields,m),x.keepDirty||(de(r.dirtyFields,m),r.isDirty=x.defaultValue?p(m,he(T(i,m))):p()),x.keepError||(de(r.errors,m),d.isValid&&P()),h.state.next({...r}))},Us=(m,x={})=>{const b=m?he(m):i,O=he(b),A=be(m),S=A?i:O;if(x.keepDefaultValues||(i=b),!x.keepValues){if(x.keepDirtyValues){const $=new Set([...o.mount,...Object.keys(mt(i,n))]);for(const X of Array.from($))T(r.dirtyFields,X)?ee(S,X,T(n,X)):ye(X,T(S,X))}else{if(Es&&oe(m))for(const $ of o.mount){const X=T(a,$);if(X&&X._f){const ie=Array.isArray(X._f.refs)?X._f.refs[0]:X._f.ref;if(Zt(ie)){const Ee=ie.closest("form");if(Ee){Ee.reset();break}}}}if(x.keepFieldsRef)for(const $ of o.mount)ye($,T(S,$));else a={}}n=e.shouldUnregister?x.keepDefaultValues?he(i):{}:he(S),h.array.next({values:{...S}}),h.state.next({values:{...S}})}o={mount:x.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!d.isValid||!!x.keepIsValid||!!x.keepDirtyValues,l.watch=!!e.shouldUnregister,h.state.next({submitCount:x.keepSubmitCount?r.submitCount:0,isDirty:A?!1:x.keepDirty?r.isDirty:!!(x.keepDefaultValues&&!Ue(m,i)),isSubmitted:x.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:A?{}:x.keepDirtyValues?x.keepDefaultValues&&n?mt(i,n):r.dirtyFields:x.keepDefaultValues&&m?mt(i,m):x.keepDirty?r.dirtyFields:{},touchedFields:x.keepTouched?r.touchedFields:{},errors:x.keepErrors?r.errors:{},isSubmitSuccessful:x.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Bs=(m,x)=>Us(Ie(m)?m(n):m,x),fa=(m,x={})=>{const b=T(a,m),O=b&&b._f;if(O){const A=O.refs?O.refs[0]:O.ref;A.focus&&(A.focus(),x.shouldSelect&&Ie(A.select)&&A.select())}},ga=m=>{r={...r,...m}},Zs={control:{register:rs,unregister:ss,getFieldState:Ls,handleSubmit:zs,setError:Ds,_subscribe:Ms,_runSchema:I,_focusError:as,_getWatch:y,_getDirty:p,_setValid:P,_setFieldArray:U,_setDisabledField:$s,_setErrors:C,_getFieldArray:k,_reset:Us,_resetDefaultValues:()=>Ie(e.defaultValues)&&e.defaultValues().then(m=>{Bs(m,e.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:ma,_subjects:h,_proxyFormState:d,get _fields(){return a},get _formValues(){return n},get _state(){return l},set _state(m){l=m},get _defaultValues(){return i},get _names(){return o},set _names(m){o=m},get _formState(){return r},get _options(){return e},set _options(m){e={...e,...m}}},subscribe:ua,trigger:ct,register:rs,handleSubmit:zs,watch:da,setValue:ye,getValues:Ot,reset:Bs,resetField:ha,clearErrors:ca,unregister:ss,setError:Ds,setFocus:fa,getFieldState:Ls};return{...Zs,formControl:Zs}}function rn(t={}){const e=W.useRef(void 0),r=W.useRef(void 0),[a,i]=W.useState({isDirty:!1,isValidating:!1,isLoading:Ie(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ie(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:a},t.defaultValues&&!Ie(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=sn(t);e.current={...o,formState:a}}const n=e.current.control;return n._options=t,Ps(()=>{const l=n._subscribe({formState:n._proxyFormState,callback:()=>i({...n._formState}),reRenderRoot:!0});return i(o=>({...o,isReady:!0})),n._formState.isReady=!0,l},[n]),W.useEffect(()=>n._disableForm(t.disabled),[n,t.disabled]),W.useEffect(()=>{t.mode&&(n._options.mode=t.mode),t.reValidateMode&&(n._options.reValidateMode=t.reValidateMode)},[n,t.mode,t.reValidateMode]),W.useEffect(()=>{t.errors&&(n._setErrors(t.errors),n._focusError())},[n,t.errors]),W.useEffect(()=>{t.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,t.shouldUnregister]),W.useEffect(()=>{if(n._proxyFormState.isDirty){const l=n._getDirty();l!==a.isDirty&&n._subjects.state.next({isDirty:l})}},[n,a.isDirty]),W.useEffect(()=>{t.values&&!Ue(t.values,r.current)?(n._reset(t.values,{keepFieldsRef:!0,...n._options.resetOptions}),r.current=t.values,i(l=>({...l}))):n._resetDefaultValues()},[n,t.values]),W.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),e.current.formState=Br(a,n),e.current}const lr=(t,e,r)=>{if(t&&"reportValidity"in t){const a=T(r,e);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},ps=(t,e)=>{for(const r in e.fields){const a=e.fields[r];a&&a.ref&&"reportValidity"in a.ref?lr(a.ref,r,t):a&&a.refs&&a.refs.forEach(i=>lr(i,r,t))}},or=(t,e)=>{e.shouldUseNativeValidation&&ps(t,e);const r={};for(const a in t){const i=T(e.fields,a),n=Object.assign(t[a]||{},{ref:i&&i.ref});if(an(e.names||Object.keys(t),a)){const l=Object.assign({},T(r,a));ee(l,"root",n),ee(r,a,l)}else ee(r,a,n)}return r},an=(t,e)=>{const r=cr(e);return t.some(a=>cr(a).match(`^${r}\\.\\d+`))};function cr(t){return t.replace(/\]|\[/g,"")}function Jr(t,e,r){function a(o,c){var u;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(u=o._zod).traits??(u.traits=new Set),o._zod.traits.add(t),e(o,c);for(const d in l.prototype)d in o||Object.defineProperty(o,d,{value:l.prototype[d].bind(o)});o._zod.constr=l,o._zod.def=c}const i=(r==null?void 0:r.Parent)??Object;class n extends i{}Object.defineProperty(n,"name",{value:t});function l(o){var c;const u=r!=null&&r.Parent?new n:this;a(u,o),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(l,"init",{value:a}),Object.defineProperty(l,Symbol.hasInstance,{value:o=>{var c,u;return r!=null&&r.Parent&&o instanceof r.Parent?!0:(u=(c=o==null?void 0:o._zod)==null?void 0:c.traits)==null?void 0:u.has(t)}}),Object.defineProperty(l,"name",{value:t}),l}class nn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const ln={};function Kr(t){return ln}function on(t,e){return typeof e=="bigint"?e.toString():e}const Xr=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function Dt(t){return typeof t=="string"?t:t==null?void 0:t.message}function ea(t,e,r){var i,n,l,o,c,u;const a={...t,path:t.path??[]};if(!t.message){const d=Dt((l=(n=(i=t.inst)==null?void 0:i._zod.def)==null?void 0:n.error)==null?void 0:l.call(n,t))??Dt((o=e==null?void 0:e.error)==null?void 0:o.call(e,t))??Dt((c=r.customError)==null?void 0:c.call(r,t))??Dt((u=r.localeError)==null?void 0:u.call(r,t))??"Invalid input";a.message=d}return delete a.inst,delete a.continue,e!=null&&e.reportInput||delete a.input,a}const ta=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,on,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},cn=Jr("$ZodError",ta),sa=Jr("$ZodError",ta,{Parent:Error}),dn=t=>(e,r,a,i)=>{const n=a?Object.assign(a,{async:!1}):{async:!1},l=e._zod.run({value:r,issues:[]},n);if(l instanceof Promise)throw new nn;if(l.issues.length){const o=new((i==null?void 0:i.Err)??t)(l.issues.map(c=>ea(c,n,Kr())));throw Xr(o,i==null?void 0:i.callee),o}return l.value},un=dn(sa),mn=t=>async(e,r,a,i)=>{const n=a?Object.assign(a,{async:!0}):{async:!0};let l=e._zod.run({value:r,issues:[]},n);if(l instanceof Promise&&(l=await l),l.issues.length){const o=new((i==null?void 0:i.Err)??t)(l.issues.map(c=>ea(c,n,Kr())));throw Xr(o,i==null?void 0:i.callee),o}return l.value},hn=mn(sa);function dr(t,e){try{var r=t()}catch(a){return e(a)}return r&&r.then?r.then(void 0,e):r}function fn(t,e){for(var r={};t.length;){var a=t[0],i=a.code,n=a.message,l=a.path.join(".");if(!r[l])if("unionErrors"in a){var o=a.unionErrors[0].errors[0];r[l]={message:o.message,type:o.code}}else r[l]={message:n,type:i};if("unionErrors"in a&&a.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return t.push(f)})}),e){var c=r[l].types,u=c&&c[a.code];r[l]=Is(l,e,r,i,u?[].concat(u,a.message):a.message)}t.shift()}return r}function gn(t,e){for(var r={};t.length;){var a=t[0],i=a.code,n=a.message,l=a.path.join(".");if(!r[l])if(a.code==="invalid_union"&&a.errors.length>0){var o=a.errors[0][0];r[l]={message:o.message,type:o.code}}else r[l]={message:n,type:i};if(a.code==="invalid_union"&&a.errors.forEach(function(d){return d.forEach(function(f){return t.push(f)})}),e){var c=r[l].types,u=c&&c[a.code];r[l]=Is(l,e,r,i,u?[].concat(u,a.message):a.message)}t.shift()}return r}function xn(t,e,r){if(r===void 0&&(r={}),function(a){return"_def"in a&&typeof a._def=="object"&&"typeName"in a._def}(t))return function(a,i,n){try{return Promise.resolve(dr(function(){return Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](a,e)).then(function(l){return n.shouldUseNativeValidation&&ps({},n),{errors:{},values:r.raw?Object.assign({},a):l}})},function(l){if(function(o){return Array.isArray(o==null?void 0:o.issues)}(l))return{values:{},errors:or(fn(l.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};if(function(a){return"_zod"in a&&typeof a._zod=="object"}(t))return function(a,i,n){try{return Promise.resolve(dr(function(){return Promise.resolve((r.mode==="sync"?un:hn)(t,a,e)).then(function(l){return n.shouldUseNativeValidation&&ps({},n),{errors:{},values:r.raw?Object.assign({},a):l}})},function(l){if(function(o){return o instanceof cn}(l))return{values:{},errors:or(gn(l.issues,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}var J;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{const n={};for(const l of i)n[l]=l;return n},t.getValidEnumValues=i=>{const n=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),l={};for(const o of n)l[o]=i[o];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(n){return i[n]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const n=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&n.push(l);return n},t.find=(i,n)=>{for(const l of i)if(n(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function a(i,n=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(n)}t.joinValues=a,t.jsonStringifyReplacer=(i,n)=>typeof n=="bigint"?n.toString():n})(J||(J={}));var ur;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(ur||(ur={}));const D=J.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ye=t=>{switch(typeof t){case"undefined":return D.undefined;case"string":return D.string;case"number":return Number.isNaN(t)?D.nan:D.number;case"boolean":return D.boolean;case"function":return D.function;case"bigint":return D.bigint;case"symbol":return D.symbol;case"object":return Array.isArray(t)?D.array:t===null?D.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?D.promise:typeof Map<"u"&&t instanceof Map?D.map:typeof Set<"u"&&t instanceof Set?D.set:typeof Date<"u"&&t instanceof Date?D.date:D.object;default:return D.unknown}},E=J.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class qe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(n){return n.message},a={_errors:[]},i=n=>{for(const l of n.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)a._errors.push(r(l));else{let o=a,c=0;for(;c<l.path.length;){const u=l.path[c];c===l.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(l))):o[u]=o[u]||{_errors:[]},o=o[u],c++}}};return i(this),a}static assert(e){if(!(e instanceof qe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,J.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},a=[];for(const i of this.issues)if(i.path.length>0){const n=i.path[0];r[n]=r[n]||[],r[n].push(e(i))}else a.push(e(i));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}qe.create=t=>new qe(t);const ys=(t,e)=>{let r;switch(t.code){case E.invalid_type:t.received===D.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case E.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,J.jsonStringifyReplacer)}`;break;case E.unrecognized_keys:r=`Unrecognized key(s) in object: ${J.joinValues(t.keys,", ")}`;break;case E.invalid_union:r="Invalid input";break;case E.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${J.joinValues(t.options)}`;break;case E.invalid_enum_value:r=`Invalid enum value. Expected ${J.joinValues(t.options)}, received '${t.received}'`;break;case E.invalid_arguments:r="Invalid function arguments";break;case E.invalid_return_type:r="Invalid function return type";break;case E.invalid_date:r="Invalid date";break;case E.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:J.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case E.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case E.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case E.custom:r="Invalid input";break;case E.invalid_intersection_types:r="Intersection results could not be merged";break;case E.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case E.not_finite:r="Number must be finite";break;default:r=e.defaultError,J.assertNever(t)}return{message:r}};let pn=ys;function yn(){return pn}const bn=t=>{const{data:e,path:r,errorMaps:a,issueData:i}=t,n=[...r,...i.path||[]],l={...i,path:n};if(i.message!==void 0)return{...i,path:n,message:i.message};let o="";const c=a.filter(u=>!!u).slice().reverse();for(const u of c)o=u(l,{data:e,defaultError:o}).message;return{...i,path:n,message:o}};function V(t,e){const r=yn(),a=bn({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===ys?void 0:ys].filter(i=>!!i)});t.common.issues.push(a)}class Ce{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const a=[];for(const i of r){if(i.status==="aborted")return B;i.status==="dirty"&&e.dirty(),a.push(i.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,r){const a=[];for(const i of r){const n=await i.key,l=await i.value;a.push({key:n,value:l})}return Ce.mergeObjectSync(e,a)}static mergeObjectSync(e,r){const a={};for(const i of r){const{key:n,value:l}=i;if(n.status==="aborted"||l.status==="aborted")return B;n.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),n.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(a[n.value]=l.value)}return{status:e.value,value:a}}}const B=Object.freeze({status:"aborted"}),_t=t=>({status:"dirty",value:t}),Ae=t=>({status:"valid",value:t}),mr=t=>t.status==="aborted",hr=t=>t.status==="dirty",xt=t=>t.status==="valid",Wt=t=>typeof Promise<"u"&&t instanceof Promise;var M;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(M||(M={}));class et{constructor(e,r,a,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=a,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const fr=(t,e)=>{if(xt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new qe(t.common.issues);return this._error=r,this._error}}};function Y(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:a,description:i}=t;if(e&&(r||a))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,o)=>{const{message:c}=t;return l.code==="invalid_enum_value"?{message:c??o.defaultError}:typeof o.data>"u"?{message:c??a??o.defaultError}:l.code!=="invalid_type"?{message:o.defaultError}:{message:c??r??o.defaultError}},description:i}}class Q{get description(){return this._def.description}_getType(e){return Ye(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ce,ctx:{common:e.parent.common,data:e.data,parsedType:Ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Wt(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const a=this.safeParse(e,r);if(a.success)return a.data;throw a.error}safeParse(e,r){const a={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},i=this._parseSync({data:e,path:a.path,parent:a});return fr(a,i)}"~validate"(e){var a,i;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:r});return xt(n)?{value:n.value}:{issues:r.common.issues}}catch(n){(i=(a=n==null?void 0:n.message)==null?void 0:a.toLowerCase())!=null&&i.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>xt(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){const a=await this.safeParseAsync(e,r);if(a.success)return a.data;throw a.error}async safeParseAsync(e,r){const a={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ye(e)},i=this._parse({data:e,path:a.path,parent:a}),n=await(Wt(i)?i:Promise.resolve(i));return fr(a,n)}refine(e,r){const a=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,n)=>{const l=e(i),o=()=>n.addIssue({code:E.custom,...a(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(c=>c?!0:(o(),!1)):l?!0:(o(),!1)})}refinement(e,r){return this._refinement((a,i)=>e(a)?!0:(i.addIssue(typeof r=="function"?r(a,i):r),!1))}_refinement(e){return new bt({schema:this,typeName:Z.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Xe.create(this,this._def)}nullable(){return vt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return De.create(this)}promise(){return Ht.create(this,this._def)}or(e){return Yt.create([this,e],this._def)}and(e){return Gt.create(this,e,this._def)}transform(e){return new bt({...Y(this._def),schema:this,typeName:Z.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new js({...Y(this._def),innerType:this,defaultValue:r,typeName:Z.ZodDefault})}brand(){return new Un({typeName:Z.ZodBranded,type:this,...Y(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Ns({...Y(this._def),innerType:this,catchValue:r,typeName:Z.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Os.create(this,e)}readonly(){return ws.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const vn=/^c[^\s-]{8,}$/i,jn=/^[0-9a-z]+$/,Nn=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wn=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,_n=/^[a-z0-9_-]{21}$/i,kn=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Cn=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,En=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Sn="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let ds;const An=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Tn=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pn=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,In=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Vn=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Rn=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ra="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",On=new RegExp(`^${ra}$`);function aa(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Fn(t){return new RegExp(`^${aa(t)}$`)}function Ln(t){let e=`${ra}T${aa(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Dn(t,e){return!!((e==="v4"||!e)&&An.test(t)||(e==="v6"||!e)&&Pn.test(t))}function Mn(t,e){if(!kn.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const a=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(a));return!(typeof i!="object"||i===null||"typ"in i&&(i==null?void 0:i.typ)!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function $n(t,e){return!!((e==="v4"||!e)&&Tn.test(t)||(e==="v6"||!e)&&In.test(t))}class He extends Q{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==D.string){const n=this._getOrReturnCtx(e);return V(n,{code:E.invalid_type,expected:D.string,received:n.parsedType}),B}const a=new Ce;let i;for(const n of this._def.checks)if(n.kind==="min")e.data.length<n.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:E.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="max")e.data.length>n.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:E.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),a.dirty());else if(n.kind==="length"){const l=e.data.length>n.value,o=e.data.length<n.value;(l||o)&&(i=this._getOrReturnCtx(e,i),l?V(i,{code:E.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):o&&V(i,{code:E.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),a.dirty())}else if(n.kind==="email")En.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"email",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="emoji")ds||(ds=new RegExp(Sn,"u")),ds.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"emoji",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="uuid")wn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"uuid",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="nanoid")_n.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"nanoid",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid")vn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"cuid",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="cuid2")jn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"cuid2",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="ulid")Nn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"ulid",code:E.invalid_string,message:n.message}),a.dirty());else if(n.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),V(i,{validation:"url",code:E.invalid_string,message:n.message}),a.dirty()}else n.kind==="regex"?(n.regex.lastIndex=0,n.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"regex",code:E.invalid_string,message:n.message}),a.dirty())):n.kind==="trim"?e.data=e.data.trim():n.kind==="includes"?e.data.includes(n.value,n.position)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),a.dirty()):n.kind==="toLowerCase"?e.data=e.data.toLowerCase():n.kind==="toUpperCase"?e.data=e.data.toUpperCase():n.kind==="startsWith"?e.data.startsWith(n.value)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:{startsWith:n.value},message:n.message}),a.dirty()):n.kind==="endsWith"?e.data.endsWith(n.value)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:{endsWith:n.value},message:n.message}),a.dirty()):n.kind==="datetime"?Ln(n).test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:"datetime",message:n.message}),a.dirty()):n.kind==="date"?On.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:"date",message:n.message}),a.dirty()):n.kind==="time"?Fn(n).test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{code:E.invalid_string,validation:"time",message:n.message}),a.dirty()):n.kind==="duration"?Cn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"duration",code:E.invalid_string,message:n.message}),a.dirty()):n.kind==="ip"?Dn(e.data,n.version)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"ip",code:E.invalid_string,message:n.message}),a.dirty()):n.kind==="jwt"?Mn(e.data,n.alg)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"jwt",code:E.invalid_string,message:n.message}),a.dirty()):n.kind==="cidr"?$n(e.data,n.version)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"cidr",code:E.invalid_string,message:n.message}),a.dirty()):n.kind==="base64"?Vn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"base64",code:E.invalid_string,message:n.message}),a.dirty()):n.kind==="base64url"?Rn.test(e.data)||(i=this._getOrReturnCtx(e,i),V(i,{validation:"base64url",code:E.invalid_string,message:n.message}),a.dirty()):J.assertNever(n);return{status:a.value,value:e.data}}_regex(e,r,a){return this.refinement(i=>e.test(i),{validation:r,code:E.invalid_string,...M.errToObj(a)})}_addCheck(e){return new He({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...M.errToObj(e)})}url(e){return this._addCheck({kind:"url",...M.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...M.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...M.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...M.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...M.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...M.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...M.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...M.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...M.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...M.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...M.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...M.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...M.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...M.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...M.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...M.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...M.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...M.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...M.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...M.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...M.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...M.errToObj(r)})}nonempty(e){return this.min(1,M.errToObj(e))}trim(){return new He({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new He({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}He.create=t=>new He({checks:[],typeName:Z.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...Y(t)});function zn(t,e){const r=(t.toString().split(".")[1]||"").length,a=(e.toString().split(".")[1]||"").length,i=r>a?r:a,n=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return n%l/10**i}class pt extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==D.number){const n=this._getOrReturnCtx(e);return V(n,{code:E.invalid_type,expected:D.number,received:n.parsedType}),B}let a;const i=new Ce;for(const n of this._def.checks)n.kind==="int"?J.isInteger(e.data)||(a=this._getOrReturnCtx(e,a),V(a,{code:E.invalid_type,expected:"integer",received:"float",message:n.message}),i.dirty()):n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),i.dirty()):n.kind==="multipleOf"?zn(e.data,n.value)!==0&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):n.kind==="finite"?Number.isFinite(e.data)||(a=this._getOrReturnCtx(e,a),V(a,{code:E.not_finite,message:n.message}),i.dirty()):J.assertNever(n);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,M.toString(r))}gt(e,r){return this.setLimit("min",e,!1,M.toString(r))}lte(e,r){return this.setLimit("max",e,!0,M.toString(r))}lt(e,r){return this.setLimit("max",e,!1,M.toString(r))}setLimit(e,r,a,i){return new pt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:M.toString(i)}]})}_addCheck(e){return new pt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:M.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:M.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:M.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:M.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:M.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&J.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const a of this._def.checks){if(a.kind==="finite"||a.kind==="int"||a.kind==="multipleOf")return!0;a.kind==="min"?(r===null||a.value>r)&&(r=a.value):a.kind==="max"&&(e===null||a.value<e)&&(e=a.value)}return Number.isFinite(r)&&Number.isFinite(e)}}pt.create=t=>new pt({checks:[],typeName:Z.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Y(t)});class Tt extends Q{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==D.bigint)return this._getInvalidInput(e);let a;const i=new Ce;for(const n of this._def.checks)n.kind==="min"?(n.inclusive?e.data<n.value:e.data<=n.value)&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="max"?(n.inclusive?e.data>n.value:e.data>=n.value)&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),i.dirty()):n.kind==="multipleOf"?e.data%n.value!==BigInt(0)&&(a=this._getOrReturnCtx(e,a),V(a,{code:E.not_multiple_of,multipleOf:n.value,message:n.message}),i.dirty()):J.assertNever(n);return{status:i.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return V(r,{code:E.invalid_type,expected:D.bigint,received:r.parsedType}),B}gte(e,r){return this.setLimit("min",e,!0,M.toString(r))}gt(e,r){return this.setLimit("min",e,!1,M.toString(r))}lte(e,r){return this.setLimit("max",e,!0,M.toString(r))}lt(e,r){return this.setLimit("max",e,!1,M.toString(r))}setLimit(e,r,a,i){return new Tt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:a,message:M.toString(i)}]})}_addCheck(e){return new Tt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:M.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:M.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:M.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:M.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:M.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}Tt.create=t=>new Tt({checks:[],typeName:Z.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...Y(t)});class bs extends Q{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==D.boolean){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.boolean,received:a.parsedType}),B}return Ae(e.data)}}bs.create=t=>new bs({typeName:Z.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Y(t)});class Pt extends Q{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==D.date){const n=this._getOrReturnCtx(e);return V(n,{code:E.invalid_type,expected:D.date,received:n.parsedType}),B}if(Number.isNaN(e.data.getTime())){const n=this._getOrReturnCtx(e);return V(n,{code:E.invalid_date}),B}const a=new Ce;let i;for(const n of this._def.checks)n.kind==="min"?e.data.getTime()<n.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:E.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),a.dirty()):n.kind==="max"?e.data.getTime()>n.value&&(i=this._getOrReturnCtx(e,i),V(i,{code:E.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),a.dirty()):J.assertNever(n);return{status:a.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pt({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:M.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:M.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Pt.create=t=>new Pt({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Z.ZodDate,...Y(t)});class gr extends Q{_parse(e){if(this._getType(e)!==D.symbol){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.symbol,received:a.parsedType}),B}return Ae(e.data)}}gr.create=t=>new gr({typeName:Z.ZodSymbol,...Y(t)});class xr extends Q{_parse(e){if(this._getType(e)!==D.undefined){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.undefined,received:a.parsedType}),B}return Ae(e.data)}}xr.create=t=>new xr({typeName:Z.ZodUndefined,...Y(t)});class pr extends Q{_parse(e){if(this._getType(e)!==D.null){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.null,received:a.parsedType}),B}return Ae(e.data)}}pr.create=t=>new pr({typeName:Z.ZodNull,...Y(t)});class yr extends Q{constructor(){super(...arguments),this._any=!0}_parse(e){return Ae(e.data)}}yr.create=t=>new yr({typeName:Z.ZodAny,...Y(t)});class br extends Q{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ae(e.data)}}br.create=t=>new br({typeName:Z.ZodUnknown,...Y(t)});class tt extends Q{_parse(e){const r=this._getOrReturnCtx(e);return V(r,{code:E.invalid_type,expected:D.never,received:r.parsedType}),B}}tt.create=t=>new tt({typeName:Z.ZodNever,...Y(t)});class vr extends Q{_parse(e){if(this._getType(e)!==D.undefined){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.void,received:a.parsedType}),B}return Ae(e.data)}}vr.create=t=>new vr({typeName:Z.ZodVoid,...Y(t)});class De extends Q{_parse(e){const{ctx:r,status:a}=this._processInputParams(e),i=this._def;if(r.parsedType!==D.array)return V(r,{code:E.invalid_type,expected:D.array,received:r.parsedType}),B;if(i.exactLength!==null){const l=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(l||o)&&(V(r,{code:l?E.too_big:E.too_small,minimum:o?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),a.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(V(r,{code:E.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),a.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(V(r,{code:E.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),a.dirty()),r.common.async)return Promise.all([...r.data].map((l,o)=>i.type._parseAsync(new et(r,l,r.path,o)))).then(l=>Ce.mergeArray(a,l));const n=[...r.data].map((l,o)=>i.type._parseSync(new et(r,l,r.path,o)));return Ce.mergeArray(a,n)}get element(){return this._def.type}min(e,r){return new De({...this._def,minLength:{value:e,message:M.toString(r)}})}max(e,r){return new De({...this._def,maxLength:{value:e,message:M.toString(r)}})}length(e,r){return new De({...this._def,exactLength:{value:e,message:M.toString(r)}})}nonempty(e){return this.min(1,e)}}De.create=(t,e)=>new De({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Z.ZodArray,...Y(e)});function ht(t){if(t instanceof ue){const e={};for(const r in t.shape){const a=t.shape[r];e[r]=Xe.create(ht(a))}return new ue({...t._def,shape:()=>e})}else return t instanceof De?new De({...t._def,type:ht(t.element)}):t instanceof Xe?Xe.create(ht(t.unwrap())):t instanceof vt?vt.create(ht(t.unwrap())):t instanceof lt?lt.create(t.items.map(e=>ht(e))):t}class ue extends Q{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=J.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==D.object){const u=this._getOrReturnCtx(e);return V(u,{code:E.invalid_type,expected:D.object,received:u.parsedType}),B}const{status:a,ctx:i}=this._processInputParams(e),{shape:n,keys:l}=this._getCached(),o=[];if(!(this._def.catchall instanceof tt&&this._def.unknownKeys==="strip"))for(const u in i.data)l.includes(u)||o.push(u);const c=[];for(const u of l){const d=n[u],f=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new et(i,f,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof tt){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")o.length>0&&(V(i,{code:E.unrecognized_keys,keys:o}),a.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const f=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new et(i,f,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Ce.mergeObjectSync(a,u)):Ce.mergeObjectSync(a,c)}get shape(){return this._def.shape()}strict(e){return M.errToObj,new ue({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,a)=>{var n,l;const i=((l=(n=this._def).errorMap)==null?void 0:l.call(n,r,a).message)??a.defaultError;return r.code==="unrecognized_keys"?{message:M.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new ue({...this._def,unknownKeys:"strip"})}passthrough(){return new ue({...this._def,unknownKeys:"passthrough"})}extend(e){return new ue({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ue({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Z.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new ue({...this._def,catchall:e})}pick(e){const r={};for(const a of J.objectKeys(e))e[a]&&this.shape[a]&&(r[a]=this.shape[a]);return new ue({...this._def,shape:()=>r})}omit(e){const r={};for(const a of J.objectKeys(this.shape))e[a]||(r[a]=this.shape[a]);return new ue({...this._def,shape:()=>r})}deepPartial(){return ht(this)}partial(e){const r={};for(const a of J.objectKeys(this.shape)){const i=this.shape[a];e&&!e[a]?r[a]=i:r[a]=i.optional()}return new ue({...this._def,shape:()=>r})}required(e){const r={};for(const a of J.objectKeys(this.shape))if(e&&!e[a])r[a]=this.shape[a];else{let n=this.shape[a];for(;n instanceof Xe;)n=n._def.innerType;r[a]=n}return new ue({...this._def,shape:()=>r})}keyof(){return ia(J.objectKeys(this.shape))}}ue.create=(t,e)=>new ue({shape:()=>t,unknownKeys:"strip",catchall:tt.create(),typeName:Z.ZodObject,...Y(e)});ue.strictCreate=(t,e)=>new ue({shape:()=>t,unknownKeys:"strict",catchall:tt.create(),typeName:Z.ZodObject,...Y(e)});ue.lazycreate=(t,e)=>new ue({shape:t,unknownKeys:"strip",catchall:tt.create(),typeName:Z.ZodObject,...Y(e)});class Yt extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),a=this._def.options;function i(n){for(const o of n)if(o.result.status==="valid")return o.result;for(const o of n)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const l=n.map(o=>new qe(o.ctx.common.issues));return V(r,{code:E.invalid_union,unionErrors:l}),B}if(r.common.async)return Promise.all(a.map(async n=>{const l={...r,common:{...r.common,issues:[]},parent:null};return{result:await n._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(i);{let n;const l=[];for(const c of a){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!n&&(n={result:d,ctx:u}),u.common.issues.length&&l.push(u.common.issues)}if(n)return r.common.issues.push(...n.ctx.common.issues),n.result;const o=l.map(c=>new qe(c));return V(r,{code:E.invalid_union,unionErrors:o}),B}}get options(){return this._def.options}}Yt.create=(t,e)=>new Yt({options:t,typeName:Z.ZodUnion,...Y(e)});function vs(t,e){const r=Ye(t),a=Ye(e);if(t===e)return{valid:!0,data:t};if(r===D.object&&a===D.object){const i=J.objectKeys(e),n=J.objectKeys(t).filter(o=>i.indexOf(o)!==-1),l={...t,...e};for(const o of n){const c=vs(t[o],e[o]);if(!c.valid)return{valid:!1};l[o]=c.data}return{valid:!0,data:l}}else if(r===D.array&&a===D.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let n=0;n<t.length;n++){const l=t[n],o=e[n],c=vs(l,o);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===D.date&&a===D.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Gt extends Q{_parse(e){const{status:r,ctx:a}=this._processInputParams(e),i=(n,l)=>{if(mr(n)||mr(l))return B;const o=vs(n.value,l.value);return o.valid?((hr(n)||hr(l))&&r.dirty(),{status:r.value,value:o.data}):(V(a,{code:E.invalid_intersection_types}),B)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([n,l])=>i(n,l)):i(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}Gt.create=(t,e,r)=>new Gt({left:t,right:e,typeName:Z.ZodIntersection,...Y(r)});class lt extends Q{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==D.array)return V(a,{code:E.invalid_type,expected:D.array,received:a.parsedType}),B;if(a.data.length<this._def.items.length)return V(a,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),B;!this._def.rest&&a.data.length>this._def.items.length&&(V(a,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const n=[...a.data].map((l,o)=>{const c=this._def.items[o]||this._def.rest;return c?c._parse(new et(a,l,a.path,o)):null}).filter(l=>!!l);return a.common.async?Promise.all(n).then(l=>Ce.mergeArray(r,l)):Ce.mergeArray(r,n)}get items(){return this._def.items}rest(e){return new lt({...this._def,rest:e})}}lt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lt({items:t,typeName:Z.ZodTuple,rest:null,...Y(e)})};class jr extends Q{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==D.map)return V(a,{code:E.invalid_type,expected:D.map,received:a.parsedType}),B;const i=this._def.keyType,n=this._def.valueType,l=[...a.data.entries()].map(([o,c],u)=>({key:i._parse(new et(a,o,a.path,[u,"key"])),value:n._parse(new et(a,c,a.path,[u,"value"]))}));if(a.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const c of l){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return B;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const c of l){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return B;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),o.set(u.value,d.value)}return{status:r.value,value:o}}}}jr.create=(t,e,r)=>new jr({valueType:e,keyType:t,typeName:Z.ZodMap,...Y(r)});class It extends Q{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==D.set)return V(a,{code:E.invalid_type,expected:D.set,received:a.parsedType}),B;const i=this._def;i.minSize!==null&&a.data.size<i.minSize.value&&(V(a,{code:E.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&a.data.size>i.maxSize.value&&(V(a,{code:E.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const n=this._def.valueType;function l(c){const u=new Set;for(const d of c){if(d.status==="aborted")return B;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const o=[...a.data.values()].map((c,u)=>n._parse(new et(a,c,a.path,u)));return a.common.async?Promise.all(o).then(c=>l(c)):l(o)}min(e,r){return new It({...this._def,minSize:{value:e,message:M.toString(r)}})}max(e,r){return new It({...this._def,maxSize:{value:e,message:M.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}It.create=(t,e)=>new It({valueType:t,minSize:null,maxSize:null,typeName:Z.ZodSet,...Y(e)});class Nr extends Q{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Nr.create=(t,e)=>new Nr({getter:t,typeName:Z.ZodLazy,...Y(e)});class wr extends Q{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return V(r,{received:r.data,code:E.invalid_literal,expected:this._def.value}),B}return{status:"valid",value:e.data}}get value(){return this._def.value}}wr.create=(t,e)=>new wr({value:t,typeName:Z.ZodLiteral,...Y(e)});function ia(t,e){return new yt({values:t,typeName:Z.ZodEnum,...Y(e)})}class yt extends Q{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),a=this._def.values;return V(r,{expected:J.joinValues(a),received:r.parsedType,code:E.invalid_type}),B}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),a=this._def.values;return V(r,{received:r.data,code:E.invalid_enum_value,options:a}),B}return Ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return yt.create(e,{...this._def,...r})}exclude(e,r=this._def){return yt.create(this.options.filter(a=>!e.includes(a)),{...this._def,...r})}}yt.create=ia;class _r extends Q{_parse(e){const r=J.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==D.string&&a.parsedType!==D.number){const i=J.objectValues(r);return V(a,{expected:J.joinValues(i),received:a.parsedType,code:E.invalid_type}),B}if(this._cache||(this._cache=new Set(J.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=J.objectValues(r);return V(a,{received:a.data,code:E.invalid_enum_value,options:i}),B}return Ae(e.data)}get enum(){return this._def.values}}_r.create=(t,e)=>new _r({values:t,typeName:Z.ZodNativeEnum,...Y(e)});class Ht extends Q{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==D.promise&&r.common.async===!1)return V(r,{code:E.invalid_type,expected:D.promise,received:r.parsedType}),B;const a=r.parsedType===D.promise?r.data:Promise.resolve(r.data);return Ae(a.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ht.create=(t,e)=>new Ht({type:t,typeName:Z.ZodPromise,...Y(e)});class bt extends Q{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Z.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:a}=this._processInputParams(e),i=this._def.effect||null,n={addIssue:l=>{V(a,l),l.fatal?r.abort():r.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),i.type==="preprocess"){const l=i.transform(a.data,n);if(a.common.async)return Promise.resolve(l).then(async o=>{if(r.value==="aborted")return B;const c=await this._def.schema._parseAsync({data:o,path:a.path,parent:a});return c.status==="aborted"?B:c.status==="dirty"||r.value==="dirty"?_t(c.value):c});{if(r.value==="aborted")return B;const o=this._def.schema._parseSync({data:l,path:a.path,parent:a});return o.status==="aborted"?B:o.status==="dirty"||r.value==="dirty"?_t(o.value):o}}if(i.type==="refinement"){const l=o=>{const c=i.refinement(o,n);if(a.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(a.common.async===!1){const o=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return o.status==="aborted"?B:(o.status==="dirty"&&r.dirty(),l(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(o=>o.status==="aborted"?B:(o.status==="dirty"&&r.dirty(),l(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(a.common.async===!1){const l=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!xt(l))return B;const o=i.transform(l.value,n);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then(l=>xt(l)?Promise.resolve(i.transform(l.value,n)).then(o=>({status:r.value,value:o})):B);J.assertNever(i)}}bt.create=(t,e,r)=>new bt({schema:t,typeName:Z.ZodEffects,effect:e,...Y(r)});bt.createWithPreprocess=(t,e,r)=>new bt({schema:e,effect:{type:"preprocess",transform:t},typeName:Z.ZodEffects,...Y(r)});class Xe extends Q{_parse(e){return this._getType(e)===D.undefined?Ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Xe.create=(t,e)=>new Xe({innerType:t,typeName:Z.ZodOptional,...Y(e)});class vt extends Q{_parse(e){return this._getType(e)===D.null?Ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}vt.create=(t,e)=>new vt({innerType:t,typeName:Z.ZodNullable,...Y(e)});class js extends Q{_parse(e){const{ctx:r}=this._processInputParams(e);let a=r.data;return r.parsedType===D.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}js.create=(t,e)=>new js({innerType:t,typeName:Z.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Y(e)});class Ns extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),a={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return Wt(i)?i.then(n=>({status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new qe(a.common.issues)},input:a.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new qe(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}Ns.create=(t,e)=>new Ns({innerType:t,typeName:Z.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Y(e)});class kr extends Q{_parse(e){if(this._getType(e)!==D.nan){const a=this._getOrReturnCtx(e);return V(a,{code:E.invalid_type,expected:D.nan,received:a.parsedType}),B}return{status:"valid",value:e.data}}}kr.create=t=>new kr({typeName:Z.ZodNaN,...Y(t)});class Un extends Q{_parse(e){const{ctx:r}=this._processInputParams(e),a=r.data;return this._def.type._parse({data:a,path:r.path,parent:r})}unwrap(){return this._def.type}}class Os extends Q{_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.common.async)return(async()=>{const n=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return n.status==="aborted"?B:n.status==="dirty"?(r.dirty(),_t(n.value)):this._def.out._parseAsync({data:n.value,path:a.path,parent:a})})();{const i=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return i.status==="aborted"?B:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:a.path,parent:a})}}static create(e,r){return new Os({in:e,out:r,typeName:Z.ZodPipeline})}}class ws extends Q{_parse(e){const r=this._def.innerType._parse(e),a=i=>(xt(i)&&(i.value=Object.freeze(i.value)),i);return Wt(r)?r.then(i=>a(i)):a(r)}unwrap(){return this._def.innerType}}ws.create=(t,e)=>new ws({innerType:t,typeName:Z.ZodReadonly,...Y(e)});var Z;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Z||(Z={}));const H=He.create,ft=pt.create,fe=bs.create,_s=Pt.create;tt.create;const Ve=De.create,le=ue.create;Yt.create;Gt.create;lt.create;const Me=yt.create;Ht.create;Xe.create;vt.create;const Bn=le({email:H().min(1,"Email is required").email("Please enter a valid email address"),displayName:H().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Display name can only contain letters, numbers, spaces, hyphens, and underscores"),phoneNumber:H().optional().refine(t=>!t||/^\+?[\d\s\-\(\)]{10,}$/.test(t),"Please enter a valid phone number"),whatsappNumber:H().optional().refine(t=>!t||/^\+?[\d\s\-\(\)]{10,}$/.test(t),"Please enter a valid WhatsApp number"),bio:H().max(500,"Bio must be less than 500 characters").optional(),interests:Ve(H()).max(10,"You can select up to 10 interests"),dietaryPreferences:Ve(H()).max(10,"You can select up to 10 dietary preferences"),address:le({street:H().min(1,"Street address is required"),city:H().min(1,"City is required"),postalCode:H().min(1,"Postal code is required")}).optional(),privacy:le({phoneVisible:fe(),whatsappVisible:fe(),addressVisible:fe()})});le({email:H().min(1,"Email is required").email("Please enter a valid email address"),password:H().min(6,"Password must be at least 6 characters").max(100,"Password must be less than 100 characters")});le({email:H().min(1,"Email is required").email("Please enter a valid email address")});const Zn=le({title:H().min(3,"Event title must be at least 3 characters").max(100,"Event title must be less than 100 characters"),description:H().min(10,"Event description must be at least 10 characters").max(2e3,"Event description must be less than 2000 characters"),type:Me(["birthday","potluck","farewell","celebration","other"]),visibility:Me(["public","private"]),dateTime:_s().min(new Date,"Event date and time must be in the future"),duration:ft().min(15,"Event duration must be at least 15 minutes").max(480,"Event duration cannot exceed 8 hours"),location:le({name:H().min(1,"Location name is required").max(100,"Location name must be less than 100 characters"),address:H().min(1,"Address is required").max(200,"Address must be less than 200 characters"),coordinates:le({lat:ft().min(-90).max(90),lng:ft().min(-180).max(180)}).optional()}),capacity:ft().min(1,"Capacity must be at least 1").max(1e3,"Capacity cannot exceed 1000").optional(),bringList:le({enabled:fe(),items:Ve(le({item:H().min(1,"Item name is required").max(50,"Item name must be less than 50 characters"),quantity:ft().min(1,"Quantity must be at least 1").max(100,"Quantity cannot exceed 100")})).max(20,"Cannot have more than 20 items on bring list")})});Zn.partial().extend({status:Me(["draft","published","cancelled","completed"]).optional()});le({status:Me(["going","maybe","not_going"]),guestCount:ft().min(0,"Guest count cannot be negative").max(10,"Cannot bring more than 10 guests").default(0),bringItems:Ve(H()).max(10,"Cannot claim more than 10 items").optional()});le({displayName:H().min(2,"Display name must be at least 2 characters").max(50,"Display name must be less than 50 characters").regex(/^[a-zA-Z0-9\s\-_]+$/,"Display name can only contain letters, numbers, spaces, hyphens, and underscores").optional(),phoneNumber:H().optional().refine(t=>!t||/^\+?[\d\s\-\(\)]{10,}$/.test(t),"Please enter a valid phone number"),whatsappNumber:H().optional().refine(t=>!t||/^\+?[\d\s\-\(\)]{10,}$/.test(t),"Please enter a valid WhatsApp number"),bio:H().max(500,"Bio must be less than 500 characters").optional(),interests:Ve(H()).max(10,"You can select up to 10 interests").optional(),dietaryPreferences:Ve(H()).max(10,"You can select up to 10 dietary preferences").optional(),address:le({street:H().min(1,"Street address is required"),city:H().min(1,"City is required"),postalCode:H().min(1,"Postal code is required")}).optional(),privacy:le({phoneVisible:fe(),whatsappVisible:fe(),addressVisible:fe()}).optional()});le({query:H().max(100,"Search query must be less than 100 characters").optional(),interests:Ve(H()).max(10,"Cannot filter by more than 10 interests").optional(),availability:Ve(Me(["weekdays","evenings","weekends"])).max(3).optional()});le({query:H().max(100,"Search query must be less than 100 characters").optional(),type:Ve(Me(["birthday","potluck","farewell","celebration","other"])).max(5).optional(),dateRange:le({start:_s(),end:_s()}).optional(),location:H().max(100,"Location must be less than 100 characters").optional(),status:Ve(Me(["draft","published","cancelled","completed"])).max(4).optional(),visibility:Ve(Me(["public","private"])).max(2).optional()});le({userId:H().min(1,"User ID is required"),action:Me(["approve","suspend","activate"]),reason:H().max(500,"Reason must be less than 500 characters").optional()});le({eventId:H().min(1,"Event ID is required"),action:Me(["publish","cancel","feature"]),reason:H().max(500,"Reason must be less than 500 characters").optional()});le({email:le({eventInvites:fe(),eventUpdates:fe(),eventReminders:fe(),systemMessages:fe()}),inApp:le({eventInvites:fe(),eventUpdates:fe(),eventReminders:fe(),systemMessages:fe()}),push:le({eventInvites:fe(),eventUpdates:fe(),eventReminders:fe(),systemMessages:fe()})});const qn=()=>{const[t,e]=w.useState(!1),[r,a]=w.useState(1),[i,n]=w.useState(!1),l=st(),{register:o,error:c,clearError:u}=je(),{control:d,handleSubmit:f,formState:{errors:h,isValid:N},watch:F,setValue:P,trigger:L}=rn({resolver:xn(Bn),mode:"onBlur",defaultValues:{email:"",displayName:"",phoneNumber:"",whatsappNumber:"",bio:"",interests:[],dietaryPreferences:[],address:{street:"",city:"",postalCode:""},privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1}}}),U=F("interests"),R=F("dietaryPreferences"),C=()=>{c&&u&&u()},v=["Cooking","Baking","Gardening","Photography","Music","Sports","Reading","Travel","Art","Technology","Volunteering","Fitness"],_=["Vegetarian","Vegan","Gluten-Free","Dairy-Free","Nut-Free","Kosher","Halal","Low-Carb","Paleo","Mediterranean"],g=async p=>{try{e(!0),console.log("🚀 Starting registration submission..."),console.log("📝 Form data:",p),u&&(u(),console.log("🧹 Cleared previous errors")),console.log("🔍 Running final validation...");const y=await L();if(console.log("✅ Form validation result:",y),!y){console.log("❌ Form validation failed"),G.error("Please fill in all required fields correctly."),e(!1);return}const k=Math.random().toString(36).slice(-12)+"A1!";console.log("🔑 Generated temporary password"),console.log("📤 Calling register function..."),await o(p.email,k,p.displayName,{phoneNumber:p.phoneNumber,whatsappNumber:p.whatsappNumber,bio:p.bio,interests:p.interests,dietaryPreferences:p.dietaryPreferences,address:p.address,privacy:p.privacy}),console.log("🎉 Registration successful!"),console.log("🔑 Temporary password:",k),G.success("🎉 Registration successful!",{duration:5e3,style:{background:"#10B981",color:"#fff",fontSize:"16px",fontWeight:"bold"}}),setTimeout(()=>{G.success(`🔑 Your temporary password: ${k}`,{duration:1e4,style:{background:"#F59E0B",color:"#000",fontSize:"16px",fontWeight:"bold",border:"2px solid #000"}})},1e3),setTimeout(()=>{l("/login")},3e3)}catch(y){console.error("❌ Registration submission error:",y),console.error("❌ Error details:",{message:y.message,code:y.code,stack:y.stack}),y.message?G.error(y.message):G.error("Registration failed. Please try again.")}finally{e(!1),console.log("🏁 Registration submission completed")}},I=async()=>{let p=[];switch(r){case 1:p=["email","displayName"];break;case 2:p=["phoneNumber","whatsappNumber","bio"];const k=F("address");(k!=null&&k.street||k!=null&&k.city||k!=null&&k.postalCode)&&(p.push("address.street"),p.push("address.city"),p.push("address.postalCode"));break;case 3:p=[];break;case 4:p=["privacy.phoneVisible","privacy.whatsappVisible","privacy.addressVisible"];break}await L(p)&&a(r+1)},se=()=>{a(r-1)},ae=p=>{const y=U||[];y.includes(p)?P("interests",y.filter(k=>k!==p)):y.length<10&&P("interests",[...y,p])},j=p=>{const y=R||[];y.includes(p)?P("dietaryPreferences",y.filter(k=>k!==p)):y.length<10&&P("dietaryPreferences",[...y,p])};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-2xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join LCC Assemble"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Connect with your community through shared events and experiences"})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex items-center justify-center space-x-4",children:[1,2,3,4].map(p=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${p<=r?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:p}),p<4&&s.jsx("div",{className:`w-12 h-1 mx-2 ${p<r?"bg-orange-500":"bg-gray-200"}`})]},p))}),s.jsxs("div",{className:"flex justify-center mt-2 space-x-8 text-sm text-gray-600",children:[s.jsx("span",{className:r>=1?"text-orange-600 font-medium":"",children:"Account"}),s.jsx("span",{className:r>=2?"text-orange-600 font-medium":"",children:"Profile"}),s.jsx("span",{className:r>=3?"text-orange-600 font-medium":"",children:"Preferences"}),s.jsx("span",{className:r>=4?"text-orange-600 font-medium":"",children:"Privacy"})]})]}),s.jsxs(q,{className:"p-8",children:[c&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:c})})]})}),s.jsxs("form",{onSubmit:f(g),className:"space-y-6",children:[r===1&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Create Your Account"}),s.jsx("p",{className:"text-sm text-gray-600",children:"* Required fields"}),s.jsx(Te,{name:"email",control:d,render:({field:p})=>{var y;return s.jsx(te,{...p,onChange:k=>{p.onChange(k),C()},type:"email",label:"Email Address *",placeholder:"your.email@example.com",error:(y=h.email)==null?void 0:y.message,required:!0})}}),s.jsx(Te,{name:"displayName",control:d,render:({field:p})=>{var y;return s.jsx(te,{...p,onChange:k=>{p.onChange(k),C()},label:"Display Name *",placeholder:"How you want to be known in the community",error:(y=h.displayName)==null?void 0:y.message,required:!0})}}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," You'll receive a secure temporary password after registration. You can change it later in your profile settings."]})})]}),r===2&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Tell Us About Yourself"}),s.jsx("p",{className:"text-sm text-gray-600",children:"All fields are optional but help us personalize your experience"}),s.jsx(Te,{name:"phoneNumber",control:d,render:({field:p})=>{var y;return s.jsx(te,{...p,value:p.value||"",type:"tel",label:"Phone Number (Optional)",placeholder:"+1 (555) 123-4567",error:(y=h.phoneNumber)==null?void 0:y.message})}}),s.jsx(Te,{name:"whatsappNumber",control:d,render:({field:p})=>{var y;return s.jsx(te,{...p,value:p.value||"",type:"tel",label:"WhatsApp Number (Optional)",placeholder:"+1 (555) 123-4567",error:(y=h.whatsappNumber)==null?void 0:y.message})}}),s.jsx(Te,{name:"bio",control:d,render:({field:p})=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bio (Optional)"}),s.jsx("textarea",{...p,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Tell us a bit about yourself..."}),h.bio&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.bio.message})]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Address (Optional)"}),s.jsx(Te,{name:"address.street",control:d,render:({field:p})=>{var y,k;return s.jsx(te,{...p,label:"Street Address",placeholder:"123 Main Street",error:(k=(y=h.address)==null?void 0:y.street)==null?void 0:k.message})}}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(Te,{name:"address.city",control:d,render:({field:p})=>{var y,k;return s.jsx(te,{...p,label:"City",placeholder:"Your City",error:(k=(y=h.address)==null?void 0:y.city)==null?void 0:k.message})}}),s.jsx(Te,{name:"address.postalCode",control:d,render:({field:p})=>{var y,k;return s.jsx(te,{...p,label:"Postal Code",placeholder:"A1A 1A1",error:(k=(y=h.address)==null?void 0:y.postalCode)==null?void 0:k.message})}})]})]})]}),r===3&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Your Interests & Preferences"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Optional selections to help us connect you with like-minded community members"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:["💡 ",s.jsx("strong",{children:"Tip:"}),' Select any interests or dietary preferences that match your lifestyle, or click "Next" to skip this step.']})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Interests (Select up to 10)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:v.map(p=>s.jsx("button",{type:"button",onClick:()=>ae(p),className:`px-3 py-2 text-sm rounded-full border transition-colors ${U!=null&&U.includes(p)?"bg-orange-500 text-white border-orange-500":"bg-white text-gray-700 border-gray-300 hover:border-orange-300"}`,children:p},p))}),h.interests&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.interests.message})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Dietary Preferences (Select up to 10)"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:_.map(p=>s.jsx("button",{type:"button",onClick:()=>j(p),className:`px-3 py-2 text-sm rounded-full border transition-colors ${R!=null&&R.includes(p)?"bg-green-500 text-white border-green-500":"bg-white text-gray-700 border-gray-300 hover:border-green-300"}`,children:p},p))}),h.dietaryPreferences&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.dietaryPreferences.message})]})]}),r===4&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Privacy Settings"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Control what information is visible to other community members. These settings are required."}),s.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:["🔒 ",s.jsx("strong",{children:"Final Step:"}),' Set your privacy preferences and click "Join the Community" to complete your registration.']})}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(Te,{name:"privacy.phoneVisible",control:d,render:({field:p})=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:p.value,onChange:y=>{p.onChange(y),n(!0)},onBlur:p.onBlur,name:p.name,ref:p.ref,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Make phone number visible to other members"})]})}),s.jsx(Te,{name:"privacy.whatsappVisible",control:d,render:({field:p})=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:p.value,onChange:y=>{p.onChange(y),n(!0)},onBlur:p.onBlur,name:p.name,ref:p.ref,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Make WhatsApp number visible to other members"})]})}),s.jsx(Te,{name:"privacy.addressVisible",control:d,render:({field:p})=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:p.value,onChange:y=>{p.onChange(y),n(!0)},onBlur:p.onBlur,name:p.name,ref:p.ref,className:"h-4 w-4 text-orange-600 focus:ring-orange-500 border-gray-300 rounded"}),s.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Make address visible to other members"})]})})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-green-800 mb-2",children:"Privacy Promise"}),s.jsx("p",{className:"text-sm text-green-700",children:"Your privacy is important to us. You can change these settings anytime in your profile. We never share your information with third parties without your explicit consent."})]})]}),s.jsxs("div",{className:"flex justify-between pt-6",children:[r>1&&s.jsx(z,{type:"button",variant:"outline",onClick:se,disabled:t,children:"Previous"}),s.jsx("div",{className:"flex-1"}),r<4?s.jsx(z,{type:"button",onClick:I,disabled:t,className:"px-6 py-2",children:"Next"}):s.jsx(z,{type:"submit",disabled:t||!N||!i,className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 disabled:opacity-50 disabled:cursor-not-allowed",onClick:p=>{if(!N||t||!i){p.preventDefault();return}},children:t?"Creating Account...":"Join the Community"})]})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",s.jsx(gt,{to:"/login",className:"font-medium text-orange-600 hover:text-orange-500",children:"Sign in here"})]})})]})]})})},Wn=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-green-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs(q,{className:"p-8 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"LCC Assemble - Test Page"}),s.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"If you can see this, React is working correctly!"}),s.jsxs("div",{className:"space-y-4",children:[s.jsx(z,{onClick:()=>window.location.href="/login",className:"bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg",children:"Go to Login"}),s.jsx(z,{onClick:()=>window.location.href="/register",variant:"outline",className:"ml-4",children:"Go to Registration"})]}),s.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Debug Info:"}),s.jsxs("p",{className:"text-xs text-gray-600",children:["URL: ",window.location.href,s.jsx("br",{}),"Time: ",new Date().toLocaleString(),s.jsx("br",{}),"User Agent: ",navigator.userAgent.substring(0,50),"..."]})]})]})})}),ot=({size:t="md",className:e=""})=>{const i=`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]} ${e}`.trim();return s.jsx("div",{className:i,role:"status","aria-label":"Loading",children:s.jsx("span",{className:"sr-only",children:"Loading..."})})},ve="events",ke=t=>t.toDate(),Le=t=>Ra.fromDate(t),ts=async t=>{try{const e=pe(re,ve,t),r=await zt(e);if(r.exists()){const a=r.data();return{...a,id:r.id,dateTime:ke(a.dateTime),createdAt:ke(a.createdAt),updatedAt:ke(a.updatedAt),attendees:Object.fromEntries(Object.entries(a.attendees||{}).map(([i,n])=>[i,{status:n.status,guestCount:n.guestCount,rsvpAt:ke(n.rsvpAt),bringItems:n.bringItems||[]}]))}}return null}catch(e){throw console.error("Error getting event:",e),new Error("Failed to get event")}},Yn=async(t,e)=>{try{const r=pe(_e(re,ve)),a=new Date,i={title:e.title,description:e.description,type:e.type,visibility:e.visibility,organizer:t,dateTime:e.dateTime,duration:e.duration,location:{name:e.location.name,address:e.location.address,...e.location.coordinates&&{coordinates:e.location.coordinates}},...e.capacity&&{capacity:e.capacity},images:[],bringList:{enabled:e.bringList.enabled,items:e.bringList.items.map((n,l)=>({id:`item_${l}`,item:n.item,quantity:n.quantity,fulfilled:!1}))},attendees:{},waitlist:[],status:"draft",createdAt:a,updatedAt:a};return await us(r,{...i,dateTime:Le(i.dateTime),createdAt:Le(i.createdAt),updatedAt:Le(i.updatedAt)}),r.id}catch(r){throw console.error("Error creating event:",r),new Error("Failed to create event")}},Fs=async(t={},e=20,r)=>{var a,i;try{console.log("🔍 Searching events with filters:",t);const n=t.status&&t.status.length>0||t.visibility&&t.visibility.length>0||t.type&&t.type.length>0;if(console.log("🔍 hasComplexFilters:",n,"filters:",t),!n){console.log("🔍 No complex filters, using simple query");const l=ne(_e(re,ve),Oe(e*2)),o=await Je(l);let c=[];o.forEach(f=>{const h=f.data();c.push({id:f.id,title:h.title,type:h.type,visibility:h.visibility,organizer:h.organizer,dateTime:ke(h.dateTime).toISOString(),location:h.location,capacity:h.capacity,attendeeCount:Object.keys(h.attendees||{}).length,coverImage:h.coverImage,status:h.status})}),t.location&&t.location.trim()&&(console.log("🔍 Filtering by location:",t.location),c=c.filter(f=>{var h,N,F,P;return((N=(h=f.location)==null?void 0:h.name)==null?void 0:N.toLowerCase().includes(t.location.toLowerCase()))||((P=(F=f.location)==null?void 0:F.address)==null?void 0:P.toLowerCase().includes(t.location.toLowerCase()))})),c.sort((f,h)=>new Date(h.dateTime).getTime()-new Date(f.dateTime).getTime());const u=r?c.findIndex(f=>f.id===r.id)+1:0,d=c.slice(u,u+e);return console.log(`✅ Found ${d.length} events (simple query)`),{events:d,totalCount:c.length,hasMore:u+e<c.length}}try{let l=ne(_e(re,ve));t.status&&t.status.length>0&&(l=ne(l,Ke("status","in",t.status))),t.visibility&&t.visibility.length>0&&(l=ne(l,Ke("visibility","in",t.visibility))),t.type&&t.type.length>0&&(l=ne(l,Ke("type","in",t.type))),l=ne(l,Qt("dateTime","asc")),l=ne(l,Oe(e));const o=await Je(l),c=[];return o.forEach(u=>{const d=u.data();c.push({id:u.id,title:d.title,type:d.type,visibility:d.visibility,organizer:d.organizer,dateTime:ke(d.dateTime).toISOString(),location:d.location,capacity:d.capacity,attendeeCount:Object.keys(d.attendees||{}).length,coverImage:d.coverImage,status:d.status})}),console.log(`✅ Found ${c.length} events (optimized query)`),{events:c,totalCount:c.length,hasMore:o.size===e}}catch(l){if((a=l.message)!=null&&a.includes("index")){console.warn("⚠️ Firestore index not ready, using client-side filtering");const o=ne(_e(re,ve),Oe(100)),c=await Je(o);let u=[];c.forEach(h=>{const N=h.data();console.log("📄 Raw event data:",{id:h.id,status:N.status,title:N.title}),u.push({id:h.id,title:N.title,type:N.type,visibility:N.visibility,organizer:N.organizer,dateTime:ke(N.dateTime).toISOString(),location:N.location,capacity:N.capacity,attendeeCount:Object.keys(N.attendees||{}).length,coverImage:N.coverImage,status:N.status})}),console.log("🎯 Applying client-side filters:",t),console.log("📊 Events before filtering:",u.length,u.map(h=>({id:h.id,status:h.status,visibility:h.visibility,type:h.type}))),t.status&&t.status.length>0&&(console.log("🔍 Filtering by status:",t.status),u=u.filter(h=>{const N=t.status.includes(h.status);return console.log(`Event ${h.id}: status=${h.status}, matches=${N}`),N})),t.visibility&&t.visibility.length>0&&(console.log("🔍 Filtering by visibility:",t.visibility),u=u.filter(h=>t.visibility.includes(h.visibility))),t.type&&t.type.length>0&&(console.log("🔍 Filtering by type:",t.type),u=u.filter(h=>t.type.includes(h.type))),console.log("📊 Events after filtering:",u.length),u.sort((h,N)=>new Date(h.dateTime).getTime()-new Date(N.dateTime).getTime());const d=r?u.findIndex(h=>h.id===r.id)+1:0,f=u.slice(d,d+e);return console.log(`✅ Found ${f.length} events (client-side filtered)`),{events:f,totalCount:u.length,hasMore:d+e<u.length}}else throw l}}catch(n){throw console.error("❌ Error searching events:",n),(i=n.message)!=null&&i.includes("index")?(console.warn("⚠️ Database index being created. Please wait a few minutes and try again."),new Error("Database is being optimized. Please wait a few minutes and try again.")):new Error("Failed to search events. Please try again.")}},Gn=async(t,e,r)=>{try{const a=await ts(t);if(!a)throw new Error("Event not found");const i=Object.keys(a.attendees).length,n=a.attendees[e];if(r.status==="going"&&!n&&a.capacity&&i>=a.capacity){const c=[...a.waitlist];return c.includes(e)||c.push(e),await Qe(pe(re,ve,t),{waitlist:c,updatedAt:Le(new Date)}),{success:!1,message:"Event is at capacity. You have been added to the waitlist.",waitlistPosition:c.length}}const l={status:r.status,guestCount:r.guestCount||0,rsvpAt:new Date,bringItems:r.bringItems||[]},o={...a.attendees};if(r.status==="not_going"){delete o[e];const c=a.waitlist.filter(u=>u!==e);await Qe(pe(re,ve,t),{attendees:o,waitlist:c,updatedAt:Le(new Date)})}else o[e]=l,await Qe(pe(re,ve,t),{attendees:{...o,[e]:{...l,rsvpAt:Le(l.rsvpAt)}},updatedAt:Le(new Date)});return{success:!0,message:`RSVP ${r.status} recorded successfully.`,attendeeInfo:l}}catch(a){throw console.error("Error RSVPing to event:",a),new Error("Failed to RSVP to event")}},Hn=async(t,e,r)=>{try{const a=await ts(t);if(!a||!a.bringList.enabled)throw new Error("Event or bring list not found");const i=a.bringList.items.find(l=>l.id===e);if(!i)throw new Error("Item not found");if(i.assignedTo&&i.assignedTo!==r)throw new Error("Item already claimed by another user");const n=a.bringList.items.map(l=>l.id===e?{...l,assignedTo:r}:l);await Qe(pe(re,ve,t),{"bringList.items":n,updatedAt:Le(new Date)})}catch(a){throw console.error("Error claiming bring list item:",a),new Error("Failed to claim item")}},Qn=async(t,e,r=!1)=>{try{const a=Oa(Ya,`events/${t}/${e.name}`),i=await Fa(a,e),n=await La(i.ref);if(r)await Qe(pe(re,ve,t),{coverImage:n,updatedAt:Le(new Date)});else{const l=await ts(t);if(l){const o=[...l.images,n];await Qe(pe(re,ve,t),{images:o,updatedAt:Le(new Date)})}}return n}catch(a){throw console.error("Error uploading event image:",a),new Error("Failed to upload image")}},Jn=async t=>{var e;try{try{const r=ne(_e(re,ve),Ke("organizer","==",t),Qt("dateTime","desc")),a=await Je(r),i=[];return a.forEach(n=>{const l=n.data();i.push({id:n.id,title:l.title,type:l.type,visibility:l.visibility,organizer:l.organizer,dateTime:ke(l.dateTime).toISOString(),location:l.location,capacity:l.capacity,attendeeCount:Object.keys(l.attendees||{}).length,coverImage:l.coverImage,status:l.status})}),console.log(`✅ Found ${i.length} user events (optimized query)`),i}catch(r){if((e=r.message)!=null&&e.includes("index")){console.warn("⚠️ Firestore index not ready for user events, using client-side filtering");const a=ne(_e(re,ve),Oe(100)),i=await Je(a);let n=[];return i.forEach(l=>{const o=l.data();o.organizer===t&&n.push({id:l.id,title:o.title,type:o.type,visibility:o.visibility,organizer:o.organizer,dateTime:ke(o.dateTime).toISOString(),location:o.location,capacity:o.capacity,attendeeCount:Object.keys(o.attendees||{}).length,coverImage:o.coverImage,status:o.status})}),n.sort((l,o)=>new Date(o.dateTime).getTime()-new Date(l.dateTime).getTime()),console.log(`✅ Found ${n.length} user events (client-side filtered)`),n}else throw r}}catch(r){throw console.error("Error getting user events:",r),new Error("Failed to get user events")}},Kn=(t,e)=>{const r=pe(re,ve,t);return wt(r,a=>{if(a.exists()){const i=a.data(),n={...i,id:a.id,dateTime:ke(i.dateTime),createdAt:ke(i.createdAt),updatedAt:ke(i.updatedAt),attendees:Object.fromEntries(Object.entries(i.attendees||{}).map(([l,o])=>[l,{...o,rsvpAt:ke(o.rsvpAt)}]))};e(n)}else e(null)},a=>{console.error("Event listener error:",a),e(null)})},Be="users",Et=async t=>{try{const e=pe(re,Be,t),r=await zt(e);if(r.exists()){const a=r.data();return{...a,createdAt:a.createdAt.toISOString(),updatedAt:a.updatedAt.toISOString()}}return null}catch(e){throw console.error("Error getting user profile:",e),new Error("Failed to get user profile")}},na=async(t,e)=>{try{const r=pe(re,Be,t),a={...e,updatedAt:new Date};await Qe(r,a)}catch(r){throw console.error("Error updating user profile:",r),new Error("Failed to update user profile")}},ks=async(t={},e=20,r)=>{var a,i;try{console.log("🔍 Searching users with filters:",t);try{let n=ne(_e(re,Be));t.status&&(n=ne(n,Ke("status","==",t.status))),t.role&&(n=ne(n,Ke("role","==",t.role))),n=ne(n,Qt("displayName","asc")),n=ne(n,Oe(e));const l=await Je(n),o=[];return l.forEach(c=>{const u=c.data();o.push({uid:u.uid,displayName:u.displayName,profileImage:u.profileImage,interests:u.interests,defaultAvailability:u.defaultAvailability})}),console.log(`✅ Found ${o.length} users (optimized query)`),{users:o,hasMore:l.size===e,lastDoc:l.docs[l.docs.length-1]||void 0}}catch(n){if((a=n.message)!=null&&a.includes("index")){console.warn("⚠️ Firestore index not ready, using client-side filtering for users");const l=ne(_e(re,Be),Oe(100)),o=await Je(l);let c=[];o.forEach(f=>{const h=f.data();c.push({uid:h.uid,displayName:h.displayName,profileImage:h.profileImage,interests:h.interests,defaultAvailability:h.defaultAvailability})}),t.status&&(c=c.filter(f=>!0)),t.role&&(c=c.filter(f=>!0)),c.sort((f,h)=>f.displayName.localeCompare(h.displayName));const u=r?c.findIndex(f=>f.uid===r.id)+1:0,d=c.slice(u,u+e);return console.log(`✅ Found ${d.length} users (client-side filtered)`),{users:d,hasMore:u+e<c.length,lastDoc:d.length>0?{id:d[d.length-1].uid}:void 0}}else throw n}}catch(n){throw console.error("❌ Error searching users:",n),(i=n.message)!=null&&i.includes("index")?(console.warn("⚠️ Database index being created. Using simplified user search."),new Error("Database is being optimized. Some features may be limited temporarily.")):new Error("Failed to search users. Please try again.")}},Cr=async t=>{try{await na(t,{status:"approved"})}catch(e){throw console.error("Error approving user:",e),new Error("Failed to approve user")}},Xn=async t=>{try{await na(t,{status:"suspended"})}catch(e){throw console.error("Error suspending user:",e),new Error("Failed to suspend user")}},la=async()=>{try{const t=ne(_e(re,Be)),e=await Je(t),r={pending:0,approved:0,suspended:0};return e.forEach(a=>{const i=a.data();r[i.status]=(r[i.status]||0)+1}),r}catch(t){throw console.error("Error getting user count by status:",t),new Error("Failed to get user statistics")}},el=(t={},e)=>{if(t.status||t.role)try{let a=ne(_e(re,Be));return t.status&&(a=ne(a,Ke("status","==",t.status))),t.role&&(a=ne(a,Ke("role","==",t.role))),a=ne(a,Qt("displayName","asc"),Oe(100)),wt(a,i=>{const n=[];i.forEach(l=>{const o=l.data();n.push({uid:o.uid,displayName:o.displayName,profileImage:o.profileImage,interests:o.interests,defaultAvailability:o.defaultAvailability})}),e(n)},i=>{var n;if(console.error("Users list listener error:",i),(n=i.message)!=null&&n.includes("index")){console.warn("⚠️ Falling back to simple user listener (no real-time updates)");const l=ne(_e(re,Be),Oe(100));return wt(l,c=>{const u=[];c.forEach(d=>{const f=d.data();(!t.status||f.status===t.status)&&(!t.role||f.role===t.role)&&u.push({uid:f.uid,displayName:f.displayName,profileImage:f.profileImage,interests:f.interests,defaultAvailability:f.defaultAvailability})}),u.sort((d,f)=>d.displayName.localeCompare(f.displayName)),e(u)},c=>{console.error("Fallback users listener error:",c),e([])})}else return e([]),()=>{}})}catch(a){console.error("Error setting up complex user listener:",a);const i=ne(_e(re,Be),Oe(100));return wt(i,n=>{const l=[];n.forEach(o=>{const c=o.data();(!t.status||c.status===t.status)&&(!t.role||c.role===t.role)&&l.push({uid:c.uid,displayName:c.displayName,profileImage:c.profileImage,interests:c.interests,defaultAvailability:c.defaultAvailability})}),l.sort((o,c)=>o.displayName.localeCompare(c.displayName)),e(l)},n=>{console.error("Fallback users listener error:",n),e([])})}else{const a=ne(_e(re,Be),Oe(100));return wt(a,i=>{const n=[];i.forEach(l=>{const o=l.data();n.push({uid:o.uid,displayName:o.displayName,profileImage:o.profileImage,interests:o.interests,defaultAvailability:o.defaultAvailability})}),n.sort((l,o)=>l.displayName.localeCompare(o.displayName)),e(n)},i=>{console.error("Simple users listener error:",i),e([])})}},tl=()=>{const{user:t,userProfile:e}=je(),r=st(),[a,i]=w.useState([]),[n,l]=w.useState([]),[o,c]=w.useState(!0),[u,d]=w.useState(!0),[f,h]=w.useState({totalEvents:0,totalMembers:0,myEvents:0});w.useEffect(()=>{N()},[]);const N=async()=>{try{c(!0);const L=await Fs({status:["published"]},3);i(L.events),d(!0);const U=await ks({status:"approved"},5);l(U.users);const[R,C]=await Promise.all([Jn((t==null?void 0:t.uid)||""),la()]);h({totalEvents:L.totalCount,totalMembers:C.approved+C.pending+C.suspended,myEvents:R.length}),h({totalEvents:L.totalCount,totalMembers:C.approved+C.pending+C.suspended,myEvents:R.length})}catch(L){console.error("Error loading dashboard data:",L),G.error("Failed to load dashboard data")}finally{c(!1),d(!1)}},F=L=>L?(L.toDate?L.toDate():new Date(L)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"TBD",P=()=>{const L=new Date().getHours();return L<12?"Good morning":L<17?"Good afternoon":"Good evening"};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[P(),", ",(e==null?void 0:e.displayName)||(t==null?void 0:t.displayName)||"Member","! 👋"]}),s.jsx("p",{className:"text-gray-600",children:"Welcome to your LCC Assemble dashboard"})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx(z,{onClick:()=>r("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"📅 Create Event"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"📊"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.totalEvents}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"👥"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.totalMembers}),s.jsx("p",{className:"text-sm text-gray-600",children:"Community Members"})]})]})}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"📅"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:f.myEvents}),s.jsx("p",{className:"text-sm text-gray-600",children:"My Events"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs(q,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(z,{onClick:()=>r("/events/create"),className:"w-full justify-start bg-orange-500 hover:bg-orange-600",children:"📅 Create New Event"}),s.jsx(z,{variant:"outline",onClick:()=>r("/events"),className:"w-full justify-start",children:"📋 Browse All Events"}),s.jsx(z,{variant:"outline",onClick:()=>r("/members"),className:"w-full justify-start",children:"👥 Find Members"}),s.jsx(z,{variant:"outline",onClick:()=>r("/profile"),className:"w-full justify-start",children:"⚙️ Update Profile"})]})]}),s.jsxs(q,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming Events"}),s.jsx(gt,{to:"/events",className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all →"})]}),o?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ot,{})}):a.length>0?s.jsx("div",{className:"space-y-3",children:a.slice(0,3).map(L=>{var U;return s.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer transition-colors",onClick:()=>r(`/events/${L.id}`),children:[s.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:L.title}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:F(L.dateTime)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((U=L.location)==null?void 0:U.name)||"Location TBD"})]},L.id)})}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500 mb-3",children:"No upcoming events"}),s.jsx(z,{size:"sm",onClick:()=>r("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"Create First Event"})]})]}),s.jsxs(q,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"New Members"}),s.jsx(gt,{to:"/members",className:"text-sm text-orange-600 hover:text-orange-700 font-medium",children:"View all →"})]}),u?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ot,{})}):n.length>0?s.jsx("div",{className:"space-y-3",children:n.slice(0,4).map(L=>s.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",onClick:()=>r(`/members/${L.uid}`),children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-orange-600",children:L.displayName.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:L.displayName}),s.jsx("p",{className:"text-xs text-gray-500",children:L.interests.length>0?L.interests[0]:"New member"})]})]},L.uid))}):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No recent members"})})]})]}),s.jsxs(q,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Community Overview"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:f.totalEvents}),s.jsx("div",{className:"text-sm text-gray-600",children:"Events Created"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:f.totalMembers}),s.jsx("div",{className:"text-sm text-gray-600",children:"Active Members"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.myEvents}),s.jsx("div",{className:"text-sm text-gray-600",children:"Your Events"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:a.length}),s.jsx("div",{className:"text-sm text-gray-600",children:"Events This Month"})]})]})]})]})},sl=()=>{const t=st(),{user:e}=je(),[r,a]=w.useState([]),[i,n]=w.useState(!0),[l,o]=w.useState(""),[c,u]=w.useState("all"),[d,f]=w.useState("all"),[h,N]=w.useState("grid"),[F,P]=w.useState(!1);w.useEffect(()=>{f(e?"all":"published")},[e]);const L=[{value:"all",label:"All Types"},{value:"birthday",label:"Birthday"},{value:"potluck",label:"Potluck"},{value:"farewell",label:"Farewell"},{value:"celebration",label:"Celebration"},{value:"other",label:"Other"}];w.useEffect(()=>{U()},[l,c,d,e]);const U=async()=>{try{n(!0),console.log("🔍 Loading events with filters:",{selectedStatus:d,selectedType:c,searchQuery:l});const g={};d!=="all"?(g.status=[d],console.log("📋 Applying status filter:",g.status)):console.log("📋 No status filter applied (showing all events)"),c!=="all"&&(g.type=[c]),l.trim()&&(g.location=l),console.log("🔍 Final filters:",g);const I=await Fs(g,20);console.log("✅ Search result:",{eventsCount:I.events.length,hasMore:I.hasMore,events:I.events}),a(I.events),P(I.hasMore)}catch(g){console.error("❌ Error loading events:",g),G.error("Failed to load events")}finally{n(!1)}},R=g=>{const I=new Date(g),se=new Date,ae=I.getTime()-se.getTime(),j=Math.ceil(ae/(1e3*60*60*24));return j===0?"Today":j===1?"Tomorrow":j<7?`In ${j} days`:I.toLocaleDateString("en-US",{month:"short",day:"numeric",year:I.getFullYear()!==se.getFullYear()?"numeric":void 0})},C=g=>{const I=g.capacity||0,se=g.attendeeCount;return I===0?null:se>=I?"Full":se>=I*.8?"Almost Full":`${se}/${I} attending`},v=({event:g})=>s.jsx("div",{className:"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t(`/events/${g.id}`),children:s.jsxs(q,{className:"h-full",children:[g.coverImage&&s.jsxs("div",{className:"h-48 bg-gray-200 relative",children:[s.jsx("img",{src:g.coverImage,alt:g.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.visibility==="public"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:g.visibility})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2",children:g.title}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ml-2 flex-shrink-0 ${g.type==="birthday"?"bg-pink-100 text-pink-800":g.type==="potluck"?"bg-orange-100 text-orange-800":g.type==="farewell"?"bg-blue-100 text-blue-800":g.type==="celebration"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:g.type})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:"📅"}),s.jsx("span",{children:R(g.dateTime)})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:"📍"}),s.jsx("span",{className:"truncate",children:g.location.name})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"mr-2",children:"👥"}),s.jsx("span",{children:C(g)||`${g.attendeeCount} attending`})]}),g.status==="published"&&s.jsx(z,{size:"sm",variant:"outline",className:"text-xs",children:"View Details"})]})]})]})]})}),_=({event:g})=>s.jsx("div",{className:"cursor-pointer",onClick:()=>t(`/events/${g.id}`),children:s.jsx(q,{className:"p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[g.coverImage?s.jsx("img",{src:g.coverImage,alt:g.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}):s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex-shrink-0 flex items-center justify-center",children:"📅"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:g.title}),s.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.type==="birthday"?"bg-pink-100 text-pink-800":g.type==="potluck"?"bg-orange-100 text-orange-800":g.type==="farewell"?"bg-blue-100 text-blue-800":g.type==="celebration"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:g.type}),s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.visibility==="public"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:g.visibility})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[s.jsxs("span",{children:["📅 ",R(g.dateTime)]}),s.jsxs("span",{children:["📍 ",g.location.name]}),s.jsxs("span",{children:["👥 ",C(g)||`${g.attendeeCount} attending`]})]})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(z,{size:"sm",variant:"outline",children:"View Details"})})]})})});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Events"}),s.jsx("p",{className:"text-gray-600",children:"Discover and join community events"})]}),s.jsx(z,{onClick:()=>t("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"📅 Create Event"})]}),s.jsx(q,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(te,{type:"text",placeholder:"Search events by location...",value:l,onChange:g=>o(g.target.value),className:"w-full"})}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("select",{value:c,onChange:g=>u(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:L.map(g=>s.jsx("option",{value:g.value,children:g.label},g.value))}),s.jsxs("select",{value:d,onChange:g=>f(g.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[s.jsx("option",{value:"published",children:"Published Events"}),s.jsx("option",{value:"all",children:"All Events"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(z,{size:"sm",variant:h==="grid"?"primary":"outline",onClick:()=>N("grid"),children:"Grid"}),s.jsx(z,{size:"sm",variant:h==="list"?"primary":"outline",onClick:()=>N("list"),children:"List"})]})]})]})}),i?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(ot,{})}):r.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("p",{className:"text-gray-600",children:["Showing ",r.length," event",r.length!==1?"s":"",F&&" (more available)"]})}),s.jsx("div",{className:h==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:r.map(g=>h==="grid"?s.jsx(v,{event:g},g.id):s.jsx(_,{event:g},g.id))}),F&&s.jsx("div",{className:"text-center py-8",children:s.jsx(z,{variant:"outline",onClick:U,children:"Load More Events"})})]}):s.jsx(q,{className:"p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"📅"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No events found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:l||c!=="all"?"Try adjusting your filters or search terms.":"Be the first to create an event for the community!"}),s.jsx(z,{onClick:()=>t("/events/create"),className:"bg-orange-500 hover:bg-orange-600",children:"Create First Event"})]})})]})},rl=({event:t,currentUserId:e,onRSVP:r,onCancel:a})=>{const[i,n]=w.useState(!1),[l,o]=w.useState(null),[c,u]=w.useState("going"),[d,f]=w.useState(0),h=t.attendees[e],N=!!h,F=t.capacity&&Object.keys(t.attendees).length>=t.capacity,P=N&&h.status==="going"&&F,L=g=>{u(g),g!=="going"&&f(0)},U=async g=>{g.preventDefault();try{n(!0),o(null),await r(c,d)}catch(I){console.error("RSVP error:",I),o(I instanceof Error?I.message:"Failed to update RSVP")}finally{n(!1)}},R=()=>Object.values(t.attendees).reduce((g,I)=>I.status==="going"?g+1+I.guestCount:g,0),C=g=>{switch(g){case"going":return"text-green-600 bg-green-100";case"maybe":return"text-yellow-600 bg-yellow-100";case"not_going":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},v=R(),_=t.capacity?Math.max(0,t.capacity-v):null;return s.jsx(q,{className:"w-full max-w-md mx-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"RSVP to Event"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.title})]}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Attendees:"}),s.jsx("span",{className:"text-sm text-gray-900",children:v})]}),t.capacity&&s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Capacity:"}),s.jsx("span",{className:"text-sm text-gray-900",children:t.capacity})]}),_!==null&&_>0&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Spots Left:"}),s.jsx("span",{className:"text-sm text-green-600",children:_})]}),_===0&&!P&&s.jsx("div",{className:"text-center",children:s.jsx("span",{className:"text-sm text-red-600 font-medium",children:"Event is full"})})]}),N&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Your current response:"}),s.jsxs("div",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium ml-2 ${C(h.status)}`,children:[h.status==="going"&&"Going",h.status==="maybe"&&"Maybe",h.status==="not_going"&&"Not Going",P&&" (Waitlist)"]})]}),h.guestCount>0&&s.jsxs("p",{className:"text-center text-sm text-gray-600 mt-2",children:["+",h.guestCount," guest",h.guestCount!==1?"s":""]})]}),s.jsxs("form",{onSubmit:U,className:"space-y-4",children:[l&&s.jsx(At,{type:"error",message:l}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Your Response"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"rsvp-status",value:"going",checked:c==="going",onChange:()=>L("going"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Going"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"rsvp-status",value:"maybe",checked:c==="maybe",onChange:()=>L("maybe"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Maybe"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"rsvp-status",value:"not_going",checked:c==="not_going",onChange:()=>L("not_going"),disabled:i,className:"text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Not Going"})]})]})]}),c==="going"&&s.jsx(te,{type:"number",label:"Number of Additional Guests",value:d.toString(),onChange:g=>f(Math.max(0,Number(g.target.value))),placeholder:"0",min:"0",max:"10",disabled:i,helperText:"How many guests are you bringing?"}),c==="going"&&F&&!P&&s.jsx(At,{type:"warning",message:"This event is currently full. You'll be added to the waitlist."}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[a&&s.jsx(z,{type:"button",variant:"outline",onClick:a,disabled:i,className:"flex-1",children:"Cancel"}),s.jsx(z,{type:"submit",disabled:i,isLoading:i,className:"flex-1",children:i?"Updating...":N?"Update RSVP":"Send RSVP"})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Event Details"}),s.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date:"})," ",new Date(t.dateTime).toLocaleDateString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Time:"})," ",new Date(t.dateTime).toLocaleTimeString()]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",t.location.name]}),t.bringList.enabled&&s.jsxs("p",{children:[s.jsx("strong",{children:"Bring List:"})," Available"]})]})]})]})})},al=({event:t,onRSVPUpdate:e})=>{const{user:r}=je(),[a,i]=w.useState(!1),[n,l]=w.useState(!1);if(!r)return s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to RSVP to this event."}),s.jsx(z,{onClick:()=>window.location.href="/login",children:"Log In"})]})});const o=r.uid,c=t.attendees[o],u=!!c,d=new Date(t.dateTime)<new Date,f=async(R,C)=>{try{l(!0),await Gn(t.id,o,{status:R,guestCount:C}),G.success("RSVP updated successfully!"),i(!1),e==null||e()}catch(v){throw console.error("RSVP error:",v),G.error(v.message||"Failed to update RSVP"),v}finally{l(!1)}},h=()=>{if(!u)return"Not responded yet";switch(c.status){case"going":return"Going";case"maybe":return"Maybe";case"not_going":return"Not going";default:return"Unknown"}},N=()=>{if(!u)return"bg-gray-100 text-gray-800";switch(c.status){case"going":return"bg-green-100 text-green-800";case"maybe":return"bg-yellow-100 text-yellow-800";case"not_going":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=Object.values(t.attendees).reduce((R,C)=>C.status==="going"?R+1+C.guestCount:R,0),L=t.capacity&&P>=t.capacity,U=u&&c.status==="going"&&L;return a?s.jsx(rl,{event:t,currentUserId:o,onRSVP:f,onCancel:()=>i(!1)}):s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your RSVP"}),u&&!d&&s.jsx(z,{variant:"outline",size:"sm",onClick:()=>i(!0),disabled:n,children:"Change Response"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),s.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${N()}`,children:[h(),U&&" (Waitlist)"]})]}),u&&c.guestCount>0&&s.jsxs("span",{className:"text-sm text-gray-600",children:["+",c.guestCount," guest",c.guestCount!==1?"s":""]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Attendees:"}),s.jsx("span",{className:"ml-2 font-medium",children:P})]}),t.capacity&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Capacity:"}),s.jsx("span",{className:"ml-2 font-medium",children:t.capacity})]})]}),t.capacity&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${Math.min(P/t.capacity*100,100)}%`}})}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:t.capacity-P>0?`${t.capacity-P} spots left`:"Event is full"})]})]}),!d&&s.jsx("div",{className:"pt-2",children:u?s.jsx("div",{className:"text-center",children:s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["RSVP last updated: ",new Date(c.rsvpAt).toLocaleDateString()]})}):s.jsx(z,{onClick:()=>i(!0),className:"w-full bg-blue-600 hover:bg-blue-700",disabled:n,children:"RSVP to Event"})}),d&&s.jsx("div",{className:"text-center py-2",children:s.jsx("p",{className:"text-sm text-gray-500",children:"This event has already occurred"})})]})})},il=({event:t,onItemClaimed:e})=>{var u;const{user:r}=je(),[a,i]=w.useState(null);if(!t.bringList.enabled||!t.bringList.items.length)return null;const n=async d=>{if(!r){G.error("Please log in to claim items");return}try{i(d),await Hn(t.id,d,r.uid),G.success("Item claimed successfully!"),e==null||e()}catch(f){console.error("Error claiming item:",f),G.error(f.message||"Failed to claim item")}finally{i(null)}},l=d=>d.assignedTo?d.assignedTo===(r==null?void 0:r.uid)?{status:"claimed-by-me",text:"Claimed by you",color:"bg-green-100 text-green-800"}:{status:"claimed",text:"Claimed",color:"bg-blue-100 text-blue-800"}:{status:"available",text:"Available",color:"bg-gray-100 text-gray-800"},o=new Date(t.dateTime)<new Date,c=r?((u=t.attendees[r.uid])==null?void 0:u.status)==="going":!1;return s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"What to Bring"}),s.jsxs("span",{className:"text-sm text-gray-600",children:[t.bringList.items.length," item",t.bringList.items.length!==1?"s":""]})]}),!c&&!o&&s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsx("p",{className:"text-sm text-yellow-800",children:'RSVP as "Going" to claim items from the bring list.'})}),s.jsx("div",{className:"space-y-3",children:t.bringList.items.map(d=>{const f=l(d),h=!d.assignedTo&&!o&&c&&f.status==="available";return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:d.item}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.color}`,children:f.text})]}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Quantity needed: ",d.quantity,d.fulfilled&&s.jsx("span",{className:"ml-2 text-green-600",children:"✓ Fulfilled"})]}),d.assignedTo&&d.assignedTo!==(r==null?void 0:r.uid)&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Someone else has claimed this item"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[h&&s.jsx(z,{size:"sm",onClick:()=>n(d.id),disabled:a===d.id,isLoading:a===d.id,className:"bg-orange-500 hover:bg-orange-600",children:a===d.id?"Claiming...":"Claim"}),f.status==="claimed-by-me"&&!o&&s.jsx("div",{className:"text-sm text-green-600 font-medium",children:"✓ Yours"})]})]},d.id)})}),t.bringList.items.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-500",children:"No items on the bring list yet."})}),s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-1",children:"How it works:"}),s.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[s.jsx("li",{children:'• RSVP as "Going" to access the bring list'}),s.jsx("li",{children:"• Claim items you can bring to the event"}),s.jsx("li",{children:"• Mark items as fulfilled when you bring them"}),s.jsx("li",{children:"• Help make the event successful for everyone!"})]})]})]})})},nl=()=>{const{eventId:t}=va(),{user:e}=je(),r=st(),[a,i]=w.useState(null),[n,l]=w.useState(null),[o,c]=w.useState(!0);w.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{c(!0),console.log("🔍 Loading event details for ID:",t);const N=await ts(t);if(console.log("✅ Event data loaded:",N),!N){console.warn("❌ Event not found for ID:",t),G.error("Event not found"),r("/events");return}i(N);try{const P=await Et(N.organizer);l(P)}catch(P){console.warn("Could not load organizer profile:",P),l({uid:N.organizer,displayName:"Unknown Organizer",email:"",interests:[],dietaryPreferences:[],privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1},role:"member",status:"approved",defaultAvailability:{weekdays:!1,evenings:!1,weekends:!1},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}return Kn(t,P=>{P&&i(P)})}catch(N){console.error("❌ Error loading event details:",N);const F=N;console.error("❌ Error details:",{message:F==null?void 0:F.message,code:F==null?void 0:F.code,stack:F==null?void 0:F.stack}),G.error("Failed to load event details"),r("/events");return}finally{c(!1)}},d=N=>N.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"});if(o)return s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(ot,{})});if(!a)return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"The event you're looking for doesn't exist or has been removed."}),s.jsx(z,{onClick:()=>r("/events"),children:"Back to Events"})]});const f=(e==null?void 0:e.uid)===a.organizer,h=new Date(a.dateTime)<new Date;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"relative",children:[a.coverImage&&s.jsxs("div",{className:"h-64 md:h-80 bg-gray-200 relative overflow-hidden rounded-lg",children:[s.jsx("img",{src:a.coverImage,alt:a.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 text-white",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${a.type==="birthday"?"bg-pink-500":a.type==="potluck"?"bg-orange-500":a.type==="farewell"?"bg-blue-500":a.type==="celebration"?"bg-green-500":"bg-gray-500"}`,children:a.type}),s.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${a.visibility==="public"?"bg-green-500":"bg-blue-500"}`,children:a.visibility}),a.status==="published"&&s.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-green-500",children:"Published"})]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:a.title}),s.jsx("p",{className:"text-lg opacity-90",children:a.description})]})]}),!a.coverImage&&s.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-8 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[s.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-white bg-opacity-20",children:a.type}),s.jsx("span",{className:"px-3 py-1 text-sm font-medium rounded-full bg-white bg-opacity-20",children:a.visibility})]}),s.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:a.title}),s.jsx("p",{className:"text-lg opacity-90",children:a.description})]})]}),!h&&s.jsx(al,{event:a,onRSVPUpdate:()=>{u()}}),f&&s.jsx("div",{className:"flex justify-end",children:s.jsx(z,{variant:"outline",onClick:()=>r(`/events/${a.id}/edit`),children:"Edit Event"})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(q,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Event Details"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:"📅"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:d(a.dateTime)}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",a.duration," minutes"]})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:"📍"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:a.location.name}),s.jsx("p",{className:"text-sm text-gray-600",children:a.location.address})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:"👥"}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[Object.keys(a.attendees).length," attending",a.capacity&&` / ${a.capacity} capacity`]}),a.capacity&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${Math.min(Object.keys(a.attendees).length/a.capacity*100,100)}%`}})})]})]})]})]}),s.jsx(il,{event:a,onItemClaimed:()=>{u()}}),a.images&&a.images.length>0&&s.jsxs(q,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Photos"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:a.images.map((N,F)=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg overflow-hidden",children:s.jsx("img",{src:N,alt:`Event photo ${F+1}`,className:"w-full h-full object-cover"})},F))})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(q,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Organizer"}),n&&s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-lg font-medium text-orange-600",children:n.displayName.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:n.displayName}),s.jsx("p",{className:"text-sm text-gray-600",children:"Event Organizer"})]})]})]}),s.jsxs(q,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Attendees (",Object.keys(a.attendees).length,")"]}),s.jsxs("div",{className:"space-y-2",children:[Object.entries(a.attendees).slice(0,5).map(([N,F])=>s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"?"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Attendee"}),s.jsxs("p",{className:"text-xs text-gray-600",children:[F.status," ",F.guestCount>0&&`+${F.guestCount}`]})]})]})},N)),Object.keys(a.attendees).length>5&&s.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["+",Object.keys(a.attendees).length-5," more attendees"]})]})]}),a.waitlist.length>0&&s.jsxs(q,{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Waitlist (",a.waitlist.length,")"]}),s.jsx("p",{className:"text-sm text-gray-600",children:"This event is at capacity. Join the waitlist for cancellations."})]})]})]})]})},ut=[{id:"basic",title:"Basic Info",description:"Event title and description"},{id:"details",title:"Details",description:"Date, time, and location"},{id:"settings",title:"Settings",description:"Privacy and capacity"},{id:"review",title:"Review",description:"Review and publish"}],Er=[{value:"birthday",label:"Birthday",icon:"🎂"},{value:"potluck",label:"Potluck",icon:"🍽️"},{value:"farewell",label:"Farewell",icon:"👋"},{value:"celebration",label:"Celebration",icon:"🎉"},{value:"other",label:"Other",icon:"📅"}],ll=()=>{const{user:t}=je(),e=st(),[r,a]=w.useState(0),[i,n]=w.useState(!1),[l,o]=w.useState(null),[c,u]=w.useState(""),[d,f]=w.useState({title:"",description:"",type:"other",visibility:"public",dateTime:new Date,duration:120,location:{name:"",address:"",coordinates:void 0},capacity:void 0,coverImage:void 0,bringList:{enabled:!1,items:[]}}),[h,N]=w.useState({}),F=j=>{const p={};switch(j){case 0:d.title.trim()||(p.title="Title is required"),d.description.trim()||(p.description="Description is required");break;case 1:d.location.name.trim()||(p.locationName="Location name is required"),d.location.address.trim()||(p.locationAddress="Address is required"),(!d.dateTime||d.dateTime<=new Date)&&(p.dateTime="Event must be in the future"),d.duration<30&&(p.duration="Duration must be at least 30 minutes");break;case 2:d.capacity&&d.capacity<1&&(p.capacity="Capacity must be at least 1");break}return N(p),Object.keys(p).length===0},P=()=>{F(r)&&a(j=>Math.min(j+1,ut.length-1))},L=()=>{a(j=>Math.max(j-1,0))},U=(j,p)=>{f(y=>({...y,[j]:p})),h[j]&&N(y=>{const k={...y};return delete k[j],k})},R=(j,p)=>{f(y=>({...y,location:{...y.location,[j]:p}})),h[`location${j.charAt(0).toUpperCase()+j.slice(1)}`]&&N(y=>{const k={...y};return delete k[`location${j.charAt(0).toUpperCase()+j.slice(1)}`],k})},C=j=>{f(p=>({...p,bringList:{enabled:j,items:j?p.bringList.items:[]}}))},v=()=>{f(j=>({...j,bringList:{...j.bringList,items:[...j.bringList.items,{item:"",quantity:1}]}}))},_=(j,p,y)=>{f(k=>({...k,bringList:{...k.bringList,items:k.bringList.items.map((K,ce)=>ce===j?{...K,[p]:y}:K)}}))},g=j=>{f(p=>({...p,bringList:{...p.bringList,items:p.bringList.items.filter((y,k)=>k!==j)}}))},I=j=>{var y;const p=(y=j.target.files)==null?void 0:y[0];if(p){if(!p.type.startsWith("image/")){G.error("Please select an image file");return}if(p.size>5*1024*1024){G.error("Image must be less than 5MB");return}o(p);const k=new FileReader;k.onload=K=>{var ce;u((ce=K.target)==null?void 0:ce.result)},k.readAsDataURL(p)}},se=async()=>{if(!t){G.error("You must be logged in to create an event");return}try{n(!0);const j=await Yn(t.uid,d);if(l)try{await Qn(j,l,!0)}catch(p){console.warn("Failed to upload cover image:",p)}G.success("Event created successfully!"),e(`/events/${j}`)}catch(j){console.error("Error creating event:",j),G.error(j.message||"Failed to create event. Please try again.")}finally{n(!1)}},ae=()=>{var j,p;switch(r){case 0:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Title *"}),s.jsx(te,{type:"text",placeholder:"e.g., Community Potluck Gathering",value:d.title,onChange:y=>U("title",y.target.value),error:h.title,maxLength:100})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),s.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-vertical",placeholder:"Describe your event...",value:d.description,onChange:y=>U("description",y.target.value),rows:4,maxLength:2e3}),h.description&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Event Type"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Er.map(y=>s.jsx("button",{type:"button",onClick:()=>U("type",y.value),className:`p-3 border rounded-lg text-left hover:border-orange-300 transition-colors ${d.type===y.value?"border-orange-500 bg-orange-50":"border-gray-200"}`,children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:y.icon}),s.jsx("span",{className:"text-sm font-medium",children:y.label})]})},y.value))})]})]});case 1:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time *"}),s.jsx(te,{type:"datetime-local",value:d.dateTime.toISOString().slice(0,16),onChange:y=>U("dateTime",new Date(y.target.value)),error:h.dateTime})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes) *"}),s.jsx(te,{type:"number",min:"30",max:"1440",value:d.duration.toString(),onChange:y=>U("duration",parseInt(y.target.value)||120),error:h.duration})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location Name *"}),s.jsx(te,{type:"text",placeholder:"e.g., Community Center",value:d.location.name,onChange:y=>R("name",y.target.value),error:h.locationName})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),s.jsx(te,{type:"text",placeholder:"Full address for directions",value:d.location.address,onChange:y=>R("address",y.target.value),error:h.locationAddress})]})]});case 2:return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Visibility"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"visibility",value:"public",checked:d.visibility==="public",onChange:y=>U("visibility",y.target.value),className:"text-orange-600 focus:ring-orange-500"}),s.jsx("span",{className:"ml-2 text-sm",children:"Public - Anyone can see and join"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"radio",name:"visibility",value:"private",checked:d.visibility==="private",onChange:y=>U("visibility",y.target.value),className:"text-orange-600 focus:ring-orange-500"}),s.jsx("span",{className:"ml-2 text-sm",children:"Private - Invite only"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity (optional)"}),s.jsx(te,{type:"number",min:"1",placeholder:"Leave empty for unlimited",value:((j=d.capacity)==null?void 0:j.toString())||"",onChange:y=>U("capacity",y.target.value?parseInt(y.target.value):void 0),error:h.capacity}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Maximum number of attendees (excluding organizer)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cover Image (optional)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-orange-50 file:text-orange-700 hover:file:bg-orange-100"}),c&&s.jsx("div",{className:"relative w-full h-48 bg-gray-100 rounded-lg overflow-hidden",children:s.jsx("img",{src:c,alt:"Cover preview",className:"w-full h-full object-cover"})}),s.jsx("p",{className:"text-sm text-gray-500",children:"Recommended: 1200x600px, max 5MB"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.bringList.enabled,onChange:y=>C(y.target.checked),className:"text-orange-600 focus:ring-orange-500 rounded"}),s.jsx("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"Enable bring list for attendees"})]}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Allow attendees to sign up for items to bring"})]}),d.bringList.enabled&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Bring List Items"}),s.jsxs("div",{className:"space-y-3",children:[d.bringList.items.map((y,k)=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(te,{type:"text",placeholder:"Item name",value:y.item,onChange:K=>_(k,"item",K.target.value),className:"flex-1"}),s.jsx(te,{type:"number",min:"1",value:y.quantity.toString(),onChange:K=>_(k,"quantity",parseInt(K.target.value)||1),className:"w-20"}),s.jsx(z,{type:"button",variant:"outline",size:"sm",onClick:()=>g(k),className:"text-red-600 hover:text-red-700",children:"Remove"})]},k)),s.jsx(z,{type:"button",variant:"outline",onClick:v,className:"w-full",children:"Add Item"})]})]})]});case 3:return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Event Summary"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Basic Information"}),s.jsxs("dl",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Title:"})," ",s.jsx("dd",{className:"inline ml-2",children:d.title})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Type:"})," ",s.jsx("dd",{className:"inline ml-2",children:(p=Er.find(y=>y.value===d.type))==null?void 0:p.label})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Visibility:"})," ",s.jsx("dd",{className:"inline ml-2 capitalize",children:d.visibility})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Date & Location"}),s.jsxs("dl",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Date:"})," ",s.jsx("dd",{className:"inline ml-2",children:d.dateTime.toLocaleDateString()})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Time:"})," ",s.jsx("dd",{className:"inline ml-2",children:d.dateTime.toLocaleTimeString()})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Duration:"})," ",s.jsxs("dd",{className:"inline ml-2",children:[d.duration," minutes"]})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"inline font-medium",children:"Location:"})," ",s.jsx("dd",{className:"inline ml-2",children:d.location.name})]})]})]})]}),d.capacity&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Capacity"}),s.jsxs("p",{className:"text-sm",children:["Maximum ",d.capacity," attendees"]})]}),d.bringList.enabled&&d.bringList.items.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Bring List"}),s.jsx("ul",{className:"text-sm space-y-1",children:d.bringList.items.map((y,k)=>s.jsxs("li",{children:["• ",y.item," (x",y.quantity,")"]},k))})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Note:"})," Your event will be saved as a draft. You can review and publish it from the event details page."]})})]})});default:return null}};return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Create New Event"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Bring your community together for memorable gatherings"})]}),s.jsx("div",{className:"flex items-center justify-center space-x-4",children:ut.map((j,p)=>s.jsxs(W.Fragment,{children:[s.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-full ${p<=r?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"}`,children:p+1}),p<ut.length-1&&s.jsx("div",{className:`flex-1 h-1 ${p<r?"bg-orange-500":"bg-gray-200"}`})]},j.id))}),s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:ut[r].title}),s.jsx("p",{className:"text-gray-600",children:ut[r].description})]}),s.jsx(q,{className:"p-8",children:ae()}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx(z,{type:"button",variant:"outline",onClick:L,disabled:r===0,children:"Previous"}),s.jsx("div",{className:"flex space-x-3",children:r<ut.length-1?s.jsx(z,{type:"button",onClick:P,children:"Next"}):s.jsx(z,{type:"button",onClick:se,disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(ot,{className:"w-4 h-4 mr-2"}),"Creating Event..."]}):"Create Event"})})]})]})},ol=({member:t,currentUserId:e,onViewProfile:r,onContact:a,compact:i=!1,showContactButtons:n=!0})=>{const l=e===t.uid,o=u=>u.split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2),c=u=>{a==null||a(t,u)};return i?s.jsx(q,{className:"p-3 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-sm font-medium text-orange-600",children:o(t.displayName)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900 truncate",children:[t.displayName,l&&s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(You)"})]}),t.interests.length>0&&s.jsxs("p",{className:"text-xs text-gray-600 truncate",children:[t.interests.slice(0,2).join(", "),t.interests.length>2&&` +${t.interests.length-2} more`]})]}),n&&!l&&s.jsxs("div",{className:"flex space-x-1",children:[s.jsx(z,{size:"sm",variant:"ghost",onClick:()=>c("whatsapp"),className:"p-1 h-8 w-8",title:"WhatsApp",children:"💬"}),s.jsx(z,{size:"sm",variant:"ghost",onClick:()=>c("email"),className:"p-1 h-8 w-8",title:"Email",children:"✉️"})]})]})}):s.jsx(q,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-xl font-bold text-white",children:o(t.displayName)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.displayName}),l&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"You"})]}),t.interests.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Interests:"}),s.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.interests.slice(0,4).map((u,d)=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:u},d)),t.interests.length>4&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.interests.length-4," more"]})]})]}),n&&!l&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>c("whatsapp"),className:"flex items-center space-x-1",children:[s.jsx("span",{children:"💬"}),s.jsx("span",{children:"WhatsApp"})]}),s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>c("phone"),className:"flex items-center space-x-1",children:[s.jsx("span",{children:"📞"}),s.jsx("span",{children:"Call"})]}),s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>c("email"),className:"flex items-center space-x-1",children:[s.jsx("span",{children:"✉️"}),s.jsx("span",{children:"Email"})]})]})]})]}),s.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:s.jsx(z,{onClick:()=>r==null?void 0:r(t),className:"w-full",variant:l?"outline":"primary",children:l?"Edit Profile":"View Profile"})})]})})},cl=({onMemberSelect:t,onContactMember:e,currentUserId:r})=>{const[a,i]=w.useState([]),[n,l]=w.useState([]),[o,c]=w.useState(!0),[u,d]=w.useState(null),[f,h]=w.useState(""),[N,F]=w.useState({}),[P,L]=w.useState(!1);w.useEffect(()=>(c(!0),d(null),el({},_=>{const g=_.filter(I=>!0);i(g),l(g),c(!1)})),[]),w.useEffect(()=>{let v=a;if(f.trim()){const _=f.toLowerCase();v=v.filter(g=>g.displayName.toLowerCase().includes(_)||g.interests.some(I=>I.toLowerCase().includes(_)))}l(v)},[a,f]);const U=v=>{h(v.target.value)},R=(v,_)=>{F(g=>({...g,[v]:_||void 0}))},C=()=>{F({}),h("")};return o?s.jsxs("div",{className:"flex justify-center items-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Loading members..."})]}):u?s.jsx(At,{type:"error",message:u}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsx(te,{type:"text",placeholder:"Search by name or interests...",value:f,onChange:U,className:"w-full"})}),s.jsx(z,{variant:"outline",onClick:()=>L(!P),children:P?"Hide Filters":"Show Filters"})]}),P&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:N.status||"",onChange:v=>R("status",v.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[s.jsx("option",{value:"",children:"All Statuses"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"suspended",children:"Suspended"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),s.jsxs("select",{value:N.role||"",onChange:v=>R("role",v.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[s.jsx("option",{value:"",children:"All Roles"}),s.jsx("option",{value:"member",children:"Member"}),s.jsx("option",{value:"admin",children:"Admin"})]})]})]}),(f||Object.keys(N).length>0)&&s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[n.length," member",n.length!==1?"s":""," found"]}),s.jsx(z,{variant:"ghost",size:"sm",onClick:C,children:"Clear Filters"})]})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(v=>s.jsx(ol,{member:v,currentUserId:r,onViewProfile:t,onContact:e,showContactButtons:!0},v.uid))}),n.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No members found matching your criteria."}),s.jsx(z,{variant:"outline",onClick:C,className:"mt-4",children:"Clear Filters"})]})]})},dl=()=>{st();const[t,e]=w.useState(null),r=i=>{e(i),G.success(`Viewing profile for ${i.displayName}`)},a=async(i,n)=>{var l,o;try{const c=await Et(i.uid);if(!c){G.error("Unable to load member contact information");return}let u="",d="",f=!1;switch(n){case"whatsapp":if(c.whatsappNumber&&((l=c.privacy)!=null&&l.whatsappVisible))u=`https://wa.me/${c.whatsappNumber.replace(/[\s\-\(\)]/g,"")}?text=Hi%20${encodeURIComponent(i.displayName)}!%20I%20found%20you%20through%20LCC%20Assemble.`,d=`Opening WhatsApp to message ${i.displayName}`,f=!0;else{G.error(`${i.displayName} has not made their WhatsApp number visible`);return}break;case"phone":if(c.phoneNumber&&((o=c.privacy)!=null&&o.phoneVisible))u=`tel:${c.phoneNumber}`,d=`Calling ${i.displayName}`,f=!0;else{G.error(`${i.displayName} has not made their phone number visible`);return}break;case"email":u=`mailto:?subject=Hello%20from%20LCC%20Assemble&body=Hi%20${encodeURIComponent(i.displayName)}!%20I%20found%20you%20through%20LCC%20Assemble.`,d=`Opening email to contact ${i.displayName}`,f=!0;break}f&&u&&(window.open(u,"_blank"),G.success(d))}catch(c){console.error("Error contacting member:",c),G.error("Unable to contact member. Please try again.")}};return s.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Community Members"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Connect with fellow community members and discover shared interests"})]}),s.jsx(cl,{onMemberSelect:r,onContactMember:a}),s.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-6 text-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Join Our Growing Community"}),s.jsx("p",{className:"text-orange-100 mb-4",children:"Connect with neighbors, share interests, and build lasting relationships"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:"50+"}),s.jsx("div",{className:"text-orange-200",children:"Active Members"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:"25+"}),s.jsx("div",{className:"text-orange-200",children:"Events This Month"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:"15+"}),s.jsx("div",{className:"text-orange-200",children:"Shared Interests"})]})]})]})}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"How to Connect"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"📱 WhatsApp"}),s.jsx("p",{children:"Quick messaging for urgent communications and event coordination"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"📞 Phone"}),s.jsx("p",{children:"Direct calls for immediate assistance or detailed discussions"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"✉️ Email"}),s.jsx("p",{children:"Formal communications and sharing detailed information"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"👥 In-Person"}),s.jsx("p",{children:"Meet at community events and build personal connections"})]})]})]})]})},ul=({onSuccess:t,onCancel:e})=>{const{userProfile:r,updateUserProfile:a,isLoading:i,error:n,clearError:l}=je(),[o,c]=w.useState(!1),[u,d]=w.useState({displayName:"",phoneNumber:"",whatsappNumber:"",bio:"",interests:[],dietaryPreferences:[],address:{street:"",city:"",postalCode:""},privacy:{phoneVisible:!1,whatsappVisible:!1,addressVisible:!1}}),[f,h]=w.useState({}),[N,F]=w.useState(""),[P,L]=w.useState("");w.useEffect(()=>{r&&d({displayName:r.displayName,phoneNumber:r.phoneNumber||"",whatsappNumber:r.whatsappNumber||"",bio:r.bio||"",interests:r.interests||[],dietaryPreferences:r.dietaryPreferences||[],address:r.address||{street:"",city:"",postalCode:""},privacy:r.privacy})},[r]);const U=j=>p=>{const y=p.target.value;d(k=>({...k,[j]:y})),f[j]&&h(k=>({...k,[j]:""})),n&&l&&l()},R=j=>p=>{const y=p.target.value;d(k=>({...k,address:{...k.address,[j]:y}}))},C=j=>p=>{const y=p.target.checked;d(k=>({...k,privacy:{...k.privacy,[j]:y}}))},v=()=>{N.trim()&&!u.interests.includes(N.trim())&&(d(j=>({...j,interests:[...j.interests,N.trim()]})),F(""))},_=j=>{d(p=>({...p,interests:p.interests.filter(y=>y!==j)}))},g=()=>{P.trim()&&!u.dietaryPreferences.includes(P.trim())&&(d(j=>({...j,dietaryPreferences:[...j.dietaryPreferences,P.trim()]})),L(""))},I=j=>{d(p=>({...p,dietaryPreferences:p.dietaryPreferences.filter(y=>y!==j)}))},se=()=>{const j={};return u.displayName.trim()?u.displayName.length<2?j.displayName="Display name must be at least 2 characters":u.displayName.length>50&&(j.displayName="Display name must be less than 50 characters"):j.displayName="Display name is required",u.bio&&u.bio.length>500&&(j.bio="Bio must be less than 500 characters"),u.phoneNumber&&!/^\+?[\d\s\-\(\)]+$/.test(u.phoneNumber)&&(j.phoneNumber="Please enter a valid phone number"),u.whatsappNumber&&!/^\+?[\d\s\-\(\)]+$/.test(u.whatsappNumber)&&(j.whatsappNumber="Please enter a valid WhatsApp number"),h(j),Object.keys(j).length===0},ae=async j=>{if(j.preventDefault(),!!se())try{c(!0),a&&(await a(u),t==null||t())}catch{}finally{c(!1)}};return s.jsx(q,{className:"w-full max-w-2xl mx-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Profile"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Update your personal information and preferences"})]}),s.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[n&&s.jsx(At,{type:"error",message:n}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Basic Information"}),s.jsx(te,{type:"text",label:"Display Name",value:u.displayName,onChange:U("displayName"),...f.displayName&&{error:f.displayName},placeholder:"Your display name",disabled:i||o,required:!0}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),s.jsx("textarea",{value:u.bio,onChange:U("bio"),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-50 disabled:cursor-not-allowed",placeholder:"Tell us about yourself...",rows:3,disabled:i||o}),f.bio&&s.jsx("p",{className:"text-sm text-red-600",children:f.bio}),s.jsxs("p",{className:"text-sm text-gray-500",children:[u.bio.length,"/500 characters"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),s.jsx(te,{type:"tel",label:"Phone Number",value:u.phoneNumber,onChange:U("phoneNumber"),...f.phoneNumber&&{error:f.phoneNumber},placeholder:"+1 (555) 123-4567",disabled:i||o}),s.jsx(te,{type:"tel",label:"WhatsApp Number",value:u.whatsappNumber,onChange:U("whatsappNumber"),...f.whatsappNumber&&{error:f.whatsappNumber},placeholder:"+1 (555) 123-4567",disabled:i||o})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Address"}),s.jsx(te,{type:"text",label:"Street Address",value:u.address.street,onChange:R("street"),placeholder:"123 Main Street",disabled:i||o}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(te,{type:"text",label:"City",value:u.address.city,onChange:R("city"),placeholder:"City",disabled:i||o}),s.jsx(te,{type:"text",label:"Postal Code",value:u.address.postalCode,onChange:R("postalCode"),placeholder:"A1A 1A1",disabled:i||o})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Interests"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{type:"text",value:N,onChange:j=>F(j.target.value),placeholder:"Add an interest...",disabled:i||o,onKeyPress:j=>{j.key==="Enter"&&(j.preventDefault(),v())}}),s.jsx(z,{type:"button",onClick:v,disabled:!N.trim()||i||o,size:"sm",children:"Add"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.interests.map(j=>s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[j,s.jsx("button",{type:"button",onClick:()=>_(j),className:"ml-2 text-blue-600 hover:text-blue-800",disabled:i||o,children:"×"})]},j))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dietary Preferences"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(te,{type:"text",value:P,onChange:j=>L(j.target.value),placeholder:"Add a dietary preference...",disabled:i||o,onKeyPress:j=>{j.key==="Enter"&&(j.preventDefault(),g())}}),s.jsx(z,{type:"button",onClick:g,disabled:!P.trim()||i||o,size:"sm",children:"Add"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:u.dietaryPreferences.map(j=>s.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-green-100 text-green-800",children:[j,s.jsx("button",{type:"button",onClick:()=>I(j),className:"ml-2 text-green-600 hover:text-green-800",disabled:i||o,children:"×"})]},j))})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Privacy Settings"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:u.privacy.phoneVisible,onChange:C("phoneVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make phone number visible to other members"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:u.privacy.whatsappVisible,onChange:C("whatsappVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make WhatsApp number visible to other members"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:u.privacy.addressVisible,onChange:C("addressVisible"),disabled:i||o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Make address visible to other members"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t border-gray-200",children:[e&&s.jsx(z,{type:"button",variant:"outline",onClick:e,disabled:i||o,children:"Cancel"}),s.jsx(z,{type:"submit",disabled:i||o,isLoading:o,children:o?"Saving...":"Save Profile"})]})]})]})})},ml=()=>{var l,o,c,u,d;const t=st(),{userProfile:e,logout:r}=je(),a=()=>{G.success("Profile updated successfully!")},i=async()=>{try{await r(),G.success("Logged out successfully"),t("/login")}catch{G.error("Failed to log out")}};if(!e)return s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(ot,{})});const n=f=>f.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2);return s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Profile"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage your account information and preferences"})]}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-400 to-orange-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-white",children:n(e.displayName)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:e.displayName}),s.jsx("p",{className:"text-gray-600",children:e.email}),e.bio&&s.jsx("p",{className:"text-gray-700 mt-1",children:e.bio}),s.jsxs("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[s.jsxs("span",{children:["Role: ",e.role]}),s.jsxs("span",{children:["Status: ",e.status]}),s.jsxs("span",{children:["Member since: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-2",children:[s.jsx(z,{variant:"outline",size:"sm",onClick:()=>t("/events"),children:"View My Events"}),s.jsx(z,{variant:"outline",size:"sm",onClick:i,className:"text-red-600 hover:text-red-800",children:"Logout"})]})]})}),s.jsx(ul,{onSuccess:a}),s.jsxs(q,{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Account Statistics"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:((l=e.interests)==null?void 0:l.length)||0}),s.jsx("div",{className:"text-sm text-gray-600",children:"Interests Listed"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:((o=e.dietaryPreferences)==null?void 0:o.length)||0}),s.jsx("div",{className:"text-sm text-gray-600",children:"Dietary Preferences"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(c=e.privacy)!=null&&c.phoneVisible||(u=e.privacy)!=null&&u.whatsappVisible||(d=e.privacy)!=null&&d.addressVisible?"Yes":"No"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Contact Info Public"})]})]})]}),s.jsxs(q,{className:"p-6 bg-blue-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Privacy & Security"}),s.jsx("p",{className:"text-blue-800 text-sm mb-3",children:"Your privacy is important to us. You control what information is visible to other community members. You can change your privacy settings above."}),s.jsxs("div",{className:"text-xs text-blue-700",children:[s.jsx("p",{children:"• Phone/WhatsApp numbers are only visible if you choose to share them"}),s.jsx("p",{children:"• Your email address is never shared with other members"}),s.jsx("p",{children:"• You can update your privacy settings at any time"})]})]})]})},hl=()=>{const{user:t}=je(),[e,r]=w.useState([]),[a,i]=w.useState([]),[n,l]=w.useState({}),[o,c]=w.useState([]),[u,d]=w.useState(!0),[f,h]=w.useState(null),[N,F]=w.useState({totalMembers:0,pendingMembers:0,approvedMembers:0,suspendedMembers:0,totalEvents:0,publishedEvents:0});w.useEffect(()=>{P()},[]);const P=async()=>{try{d(!0);const v=await ks({},1e3);i(v.users);const _=await ks({status:"pending"},100);r(_.users);const g=await Fs({},100);c(g.events);const I=await la(),se=g.events.reduce((ae,j)=>(ae.totalEvents++,j.status==="published"&&ae.publishedEvents++,ae),{totalEvents:0,publishedEvents:0});F({totalMembers:I.pending+I.approved+I.suspended,pendingMembers:I.pending,approvedMembers:I.approved,suspendedMembers:I.suspended,...se})}catch(v){console.error("Error loading admin data:",v),G.error("Failed to load admin data")}finally{d(!1)}},L=async v=>{try{h(v),await Cr(v),G.success("Member approved successfully"),r(g=>g.filter(I=>I.uid!==v)),F(g=>({...g,pendingMembers:g.pendingMembers-1,approvedMembers:g.approvedMembers+1}));const _=await Et(v);_&&l(g=>({...g,[v]:_}))}catch(_){console.error("Error approving member:",_),G.error("Failed to approve member")}finally{h(null)}},U=async v=>{try{h(v),await Xn(v),G.success("Member suspended"),F(g=>({...g,approvedMembers:g.approvedMembers-1,suspendedMembers:g.suspendedMembers+1}));const _=await Et(v);_&&l(g=>({...g,[v]:_}))}catch(_){console.error("Error suspending member:",_),G.error("Failed to suspend member")}finally{h(null)}},R=async v=>{try{h(v),await Cr(v),G.success("Member reactivated"),F(g=>({...g,suspendedMembers:g.suspendedMembers-1,approvedMembers:g.approvedMembers+1}));const _=await Et(v);_&&l(g=>({...g,[v]:_}))}catch(_){console.error("Error reactivating member:",_),G.error("Failed to reactivate member")}finally{h(null)}},C=v=>{switch(v){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"suspended":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return u?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(ot,{})}):s.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Manage community members and monitor activity"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"👥"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.totalMembers}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Members"})]})]})}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"⏳"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.pendingMembers}),s.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]})]})}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"✅"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.approvedMembers}),s.jsx("p",{className:"text-sm text-gray-600",children:"Active Members"})]})]})}),s.jsx(q,{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx("span",{className:"text-2xl",children:"📅"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:N.totalEvents}),s.jsx("p",{className:"text-sm text-gray-600",children:"Total Events"})]})]})})]}),e.length>0&&s.jsxs(q,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Pending Member Approvals"}),s.jsx("div",{className:"space-y-4",children:e.map(v=>{const _=n[v.uid];return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-medium text-orange-600",children:v.displayName.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:v.displayName}),_&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-sm text-gray-600",children:_.email}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Joined ",new Date(_.createdAt).toLocaleDateString()]})]})]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsx(z,{size:"sm",onClick:()=>L(v.uid),disabled:f===v.uid,isLoading:f===v.uid,className:"bg-green-500 hover:bg-green-600",children:"Approve"})})]},v.uid)})})]}),s.jsxs(q,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Member Overview"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(0,9).map(v=>{const _=n[v.uid];return s.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium text-orange-600",children:v.displayName.charAt(0).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:v.displayName}),_&&s.jsxs(s.Fragment,{children:[s.jsx("p",{className:"text-xs text-gray-600 truncate",children:_.email}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs font-semibold rounded-full ${C(_.status)}`,children:_.status}),_.status==="approved"&&v.uid!==(t==null?void 0:t.uid)&&s.jsx(z,{size:"sm",variant:"outline",onClick:()=>U(v.uid),disabled:f===v.uid,isLoading:f===v.uid,className:"text-red-600 hover:text-red-800",children:"Suspend"}),_.status==="suspended"&&s.jsx(z,{size:"sm",variant:"outline",onClick:()=>R(v.uid),disabled:f===v.uid,isLoading:f===v.uid,className:"text-green-600 hover:text-green-800",children:"Reactivate"})]})]})]})]})},v.uid)})}),a.length>9&&s.jsx("div",{className:"mt-4 text-center",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Showing 9 of ",a.length," members"]})})]}),s.jsxs(q,{className:"p-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Events"}),s.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(v=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:v.title}),s.jsxs("p",{className:"text-sm text-gray-600",children:[v.location.name," • ",v.attendeeCount," attendees"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${v.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:v.status}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(v.dateTime).toLocaleDateString()})]})]},v.id))}),o.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"No events created yet"})]})]})},it=({children:t,adminOnly:e=!1})=>{const{user:r,loading:a}=je();return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):r?e&&r.role!=="admin"?s.jsx($t,{to:"/dashboard",replace:!0}):s.jsx(s.Fragment,{children:t}):s.jsx($t,{to:"/login",replace:!0})},Sr=({children:t})=>{const{user:e,loading:r}=je();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):e?s.jsx($t,{to:"/dashboard",replace:!0}):s.jsx(s.Fragment,{children:t})},fl=({children:t})=>{const{user:e,logout:r}=je(),a=async()=>{try{await r()}catch(i){console.error("Logout error:",i)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"LCC Assemble"})}),s.jsx("div",{className:"flex items-center space-x-4",children:e&&s.jsxs(s.Fragment,{children:[s.jsxs("span",{className:"text-sm text-gray-700",children:["Welcome, ",e.displayName]}),s.jsx(z,{variant:"outline",size:"sm",onClick:a,children:"Logout"})]})})]})})}),e&&s.jsx("nav",{className:"bg-white shadow-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex space-x-8",children:[s.jsx("a",{href:"/dashboard",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Dashboard"}),s.jsx("a",{href:"/events",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Events"}),s.jsx("a",{href:"/members",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Members"}),s.jsx("a",{href:"/profile",className:"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Profile"}),e.role==="admin"&&s.jsx("a",{href:"/admin",className:"border-transparent text-red-500 hover:border-red-300 hover:text-red-700 inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium",children:"Admin"})]})})}),s.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:t}),s.jsx("footer",{className:"bg-white border-t border-gray-200 mt-12",children:s.jsx("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8",children:s.jsx("p",{className:"text-center text-sm text-gray-500",children:"© 2025 LCC Assemble. Building community connections."})})}),s.jsx(Fi,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})};function gl(){return s.jsx(Ga,{children:s.jsx(ja,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(fl,{children:s.jsxs(Na,{children:[s.jsx(Se,{path:"/test",element:s.jsx(Wn,{})}),s.jsx(Se,{path:"/login",element:s.jsx(Sr,{children:s.jsx(Li,{})})}),s.jsx(Se,{path:"/register",element:s.jsx(Sr,{children:s.jsx(qn,{})})}),s.jsx(Se,{path:"/dashboard",element:s.jsx(it,{children:s.jsx(tl,{})})}),s.jsx(Se,{path:"/events",element:s.jsx(it,{children:s.jsx(sl,{})})}),s.jsx(Se,{path:"/events/create",element:s.jsx(it,{children:s.jsx(ll,{})})}),s.jsx(Se,{path:"/events/:eventId",element:s.jsx(it,{children:s.jsx(nl,{})})}),s.jsx(Se,{path:"/members",element:s.jsx(it,{children:s.jsx(dl,{})})}),s.jsx(Se,{path:"/profile",element:s.jsx(it,{children:s.jsx(ml,{})})}),s.jsx(Se,{path:"/admin",element:s.jsx(it,{adminOnly:!0,children:s.jsx(hl,{})})}),s.jsx(Se,{path:"/",element:s.jsx($t,{to:"/dashboard",replace:!0})}),s.jsx(Se,{path:"*",element:s.jsxs(q,{className:"p-8 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"The page you're looking for doesn't exist."}),s.jsx(z,{onClick:()=>window.history.back(),children:"Go Back"})]})})]})})})})}const oa=document.getElementById("root");if(!oa)throw new Error("Failed to find the root element");ms.createRoot(oa).render(s.jsx(W.StrictMode,{children:s.jsx(gl,{})}));
//# sourceMappingURL=index-_qs0QkYl.js.map
